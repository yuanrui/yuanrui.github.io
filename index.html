
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>棠城夜雨</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
	<meta name="baidu-site-verification" content="codeva-IBHMIaEFI0" />
	<meta name="msvalidate.01" content="48C767D897C30868097F1CF438A5B1C0" />	
    
    <meta name="author" content="Banana">
    

    
    <meta property="og:type" content="website">
<meta property="og:title" content="棠城夜雨">
<meta property="og:url" content="https://yuanrui.github.io/index.html">
<meta property="og:site_name" content="棠城夜雨">
<meta property="og:locale">
<meta property="article:author" content="Banana">
<meta name="twitter:card" content="summary">

    
    <link rel="alternative" href="/atom.xml" title="棠城夜雨" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/Stark-icon.png">
    <link rel="apple-touch-icon-precomposed" href="/img/Stark-icon.png">
    
    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="棠城夜雨" title="棠城夜雨"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="棠城夜雨">棠城夜雨</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:yuanrui.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2023/05/12/Oracle-bulk-deletes-stored-procedures-and-functions-of-empty-tables/" title="Oracle批量删除空表的存储过程和函数" itemprop="url">Oracle批量删除空表的存储过程和函数</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Banana" target="_blank" itemprop="author">Banana</a>
		
  <p class="article-time">
    <time datetime="2023-05-12T03:00:00.000Z" itemprop="datePublished"> Published 2023-05-12</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>项目上配置建表语句的程序有误时，创建了大量的未使用的分表，需要执行sql循环删除空表。这里的空表指的数据表行数为空，保险起见数据表存在记录时不删除该表。</p>
<h3 id="定义存储过程"><a href="#定义存储过程" class="headerlink" title="定义存储过程"></a>定义存储过程</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除空表的存储过程</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> SP_DROP_EMPTY_TABLE(owner varchar2, tableName varchar2)</span><br><span class="line"><span class="keyword">is</span></span><br><span class="line">  v_cnt number;</span><br><span class="line">  v_index number :<span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">  v_owner <span class="type">varchar</span>(<span class="number">100</span>) :<span class="operator">=</span> owner;</span><br><span class="line">  v_table varchar2(<span class="number">100</span>) :<span class="operator">=</span> tableName;</span><br><span class="line">  v_sql varchar2(<span class="number">200</span>) :<span class="operator">=</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">cursor</span> cur_tables(c_owner varchar2, c_tableName varchar2) <span class="keyword">is</span> <span class="keyword">select</span> TABLE_NAME <span class="keyword">from</span> all_tables <span class="keyword">where</span> OWNER <span class="operator">=</span> <span class="built_in">UPPER</span>(c_owner) <span class="keyword">and</span> TABLE_NAME <span class="keyword">like</span> <span class="built_in">UPPER</span>(c_tableName) <span class="operator">||</span> <span class="string">&#x27;%&#x27;</span> ;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  dbms_output.enable(buffer_size <span class="operator">=</span><span class="operator">&gt;</span> <span class="keyword">null</span>);</span><br><span class="line">  <span class="keyword">open</span> cur_tables(owner, tableName); <span class="comment">-- 打开游标</span></span><br><span class="line">  loop</span><br><span class="line">      <span class="keyword">fetch</span> cur_tables <span class="keyword">into</span> v_table; <span class="comment">-- 提取游标</span></span><br><span class="line">      exit <span class="keyword">when</span> cur_tables<span class="operator">%</span>notfound;</span><br><span class="line">      v_index :<span class="operator">=</span> v_index <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">      v_sql :<span class="operator">=</span> <span class="string">&#x27;select count(*) from &#x27;</span> <span class="operator">||</span> v_table;</span><br><span class="line">      <span class="keyword">execute</span> immediate v_sql <span class="keyword">into</span> v_cnt;</span><br><span class="line">      if v_cnt <span class="operator">=</span> <span class="number">0</span> <span class="keyword">then</span> </span><br><span class="line">        v_sql :<span class="operator">=</span> <span class="string">&#x27;drop table &#x27;</span><span class="operator">||</span> v_table;</span><br><span class="line">        <span class="keyword">execute</span> immediate v_sql;</span><br><span class="line">        dbms_output.put_line(<span class="string">&#x27;table:&#x27;</span> <span class="operator">||</span> v_table <span class="operator">||</span> <span class="string">&#x27; is empty, drop success.&#x27;</span>);</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        dbms_output.put_line(<span class="string">&#x27;table:&#x27;</span> <span class="operator">||</span> v_table <span class="operator">||</span> <span class="string">&#x27; has records, drop fail. total count=&#x27;</span> <span class="operator">||</span> v_cnt);</span><br><span class="line">      <span class="keyword">end</span> if;</span><br><span class="line">  <span class="keyword">end</span> loop;</span><br><span class="line">  <span class="keyword">close</span> cur_tables; <span class="comment">-- 关闭游标</span></span><br><span class="line"></span><br><span class="line">  if v_index <span class="operator">=</span> <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">    dbms_output.put_line(<span class="string">&#x27;table:&#x27;</span> <span class="operator">||</span> tableName <span class="operator">||</span> <span class="string">&#x27; does not exist.&#x27;</span>);</span><br><span class="line">  <span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="operator">/</span></span><br></pre></td></tr></table></figure>
<h3 id="执行存储过程"><a href="#执行存储过程" class="headerlink" title="执行存储过程"></a>执行存储过程</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> SP_DROP_EMPTY_TABLE(<span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;t_table_xxx&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="定义函数"><a href="#定义函数" class="headerlink" title="定义函数"></a>定义函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除空表的函数</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">function</span> FUN_DROP_EMPTY_TABLE(owner  VARCHAR2, tableName  VARCHAR2)</span><br><span class="line"><span class="keyword">return</span> <span class="type">clob</span></span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">  v_result <span class="type">clob</span> :<span class="operator">=</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  v_cnt number;  </span><br><span class="line">  v_owner varchar2(<span class="number">100</span>) :<span class="operator">=</span> owner;</span><br><span class="line">  v_table varchar2(<span class="number">100</span>) :<span class="operator">=</span> tableName;</span><br><span class="line">  v_sql varchar2(<span class="number">200</span>) :<span class="operator">=</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">cursor</span> cur_tables(c_owner varchar2, c_tableName varchar2) <span class="keyword">is</span> <span class="keyword">select</span> TABLE_NAME <span class="keyword">from</span> all_tables <span class="keyword">where</span> OWNER <span class="operator">=</span> <span class="built_in">UPPER</span>(c_owner) <span class="keyword">and</span> TABLE_NAME <span class="keyword">like</span> <span class="built_in">UPPER</span>(c_tableName) <span class="operator">||</span> <span class="string">&#x27;%&#x27;</span> ;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">open</span> cur_tables(owner, tableName); <span class="comment">-- 打开游标</span></span><br><span class="line">  loop</span><br><span class="line">      <span class="keyword">fetch</span> cur_tables <span class="keyword">into</span> v_table; <span class="comment">-- 提取游标</span></span><br><span class="line">      exit <span class="keyword">when</span> cur_tables<span class="operator">%</span>notfound;</span><br><span class="line">      v_sql :<span class="operator">=</span> <span class="string">&#x27;select count(*) from &#x27;</span> <span class="operator">||</span> v_table;</span><br><span class="line">      <span class="keyword">execute</span> immediate v_sql <span class="keyword">into</span> v_cnt;</span><br><span class="line">      if v_cnt <span class="operator">=</span> <span class="number">0</span> <span class="keyword">then</span> </span><br><span class="line">        v_sql :<span class="operator">=</span> <span class="string">&#x27;drop table &#x27;</span><span class="operator">||</span> v_table;</span><br><span class="line">        <span class="keyword">execute</span> immediate v_sql;</span><br><span class="line">        v_result :<span class="operator">=</span> v_result <span class="operator">||</span> <span class="string">&#x27;table:&#x27;</span> <span class="operator">||</span> v_table <span class="operator">||</span> <span class="string">&#x27; is empty, drop success.&#x27;</span> <span class="operator">||</span> chr(<span class="number">13</span>);</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        v_result :<span class="operator">=</span> v_result <span class="operator">||</span> <span class="string">&#x27;table:&#x27;</span> <span class="operator">||</span> v_table <span class="operator">||</span> <span class="string">&#x27; has records, drop fail. total count=&#x27;</span> <span class="operator">||</span> v_cnt <span class="operator">||</span> chr(<span class="number">13</span>);</span><br><span class="line">      <span class="keyword">end</span> if;</span><br><span class="line">  <span class="keyword">end</span> loop;</span><br><span class="line">  <span class="keyword">close</span> cur_tables; <span class="comment">-- 关闭游标</span></span><br><span class="line"></span><br><span class="line">  if v_result <span class="operator">=</span> <span class="string">&#x27;&#x27;</span> <span class="keyword">or</span> v_result <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;table:&#x27;</span> <span class="operator">||</span> tableName <span class="operator">||</span> <span class="string">&#x27; does not exist&#x27;</span>;</span><br><span class="line">  <span class="keyword">end</span> if;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> v_result;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="operator">/</span></span><br></pre></td></tr></table></figure>
<p>编写删除空表的函数版踩了多个坑。函数执行一般执行使用select FUN_DROP_EMPTY_TABLE(‘test’, ‘t_table_xxx’) from dual，由于存在DDL操作，不能使用select语句，否则会出现如下提示。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; ORA-14552: cannot perform a DDL, commit or rollback inside a query or DML </span><br><span class="line">ORA-06512: at &quot;TEST.FUN_DROP_EMPTY_TABLE&quot;, line 19</span><br></pre></td></tr></table></figure>
<p>一度以为函数不可用的时候，发现可以使用begin end包裹语句，在内部调用dbms_output.put_line显示执行结果。<br>但是又引出另外一个坑，Oracle 12c以前的版本，函数需要返回值。最开始编写这个函数时，把表的删除结果拼接后返回类型为varchar2，当数据表过多时函数执行后会抛出缓冲区过小异常。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; ORA-06502: PL/SQL: numeric or value error: character string buffer too small</span><br><span class="line">ORA-06512: at &quot;TEST.FUN_DROP_EMPTY_TABLE&quot;, line 20</span><br><span class="line">ORA-06512: at line 3</span><br></pre></td></tr></table></figure>
<p>要解决缓冲区问题要么减少返回值，要么将返回类型修改为clob. 函数返回字符串过长时，有可能导致dbms_output.put_line输出异常或不输出…<br>最后，最好使用存储过程。</p>
<h3 id="执行函数"><a href="#执行函数" class="headerlink" title="执行函数"></a>执行函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="comment">-- dbms_output.enable(buffer_size =&gt; null);</span></span><br><span class="line">dbms_output.put_line(FUN_DROP_EMPTY_TABLE(<span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;t_table_xxx&#x27;</span>));</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>
<h3 id="直接执行sql"><a href="#直接执行sql" class="headerlink" title="直接执行sql"></a>直接执行sql</h3><p>考虑到部分账户可能没有执行存储过程和函数的权限，这里给出个直接执行sql的版本。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 直接执行语句</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  v_owner <span class="type">varchar</span>(<span class="number">100</span>) :<span class="operator">=</span> <span class="string">&#x27;admin&#x27;</span>; <span class="comment">-- 必须输入项: 账户, 即拥有者</span></span><br><span class="line">  v_table varchar2(<span class="number">100</span>) :<span class="operator">=</span> <span class="string">&#x27;T_XXX_YYMMDD&#x27;</span>; <span class="comment">-- 必须输入项: 表名或表名前缀</span></span><br><span class="line">  v_cnt number;</span><br><span class="line">  v_index number :<span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">  v_sql varchar2(<span class="number">200</span>) :<span class="operator">=</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">cursor</span> cur_tables(c_owner varchar2, c_tableName varchar2) <span class="keyword">is</span> <span class="keyword">select</span> TABLE_NAME <span class="keyword">from</span> all_tables <span class="keyword">where</span> OWNER <span class="operator">=</span> <span class="built_in">UPPER</span>(c_owner) <span class="keyword">and</span> TABLE_NAME <span class="keyword">like</span> <span class="built_in">UPPER</span>(c_tableName) <span class="operator">||</span> <span class="string">&#x27;%&#x27;</span> ;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  dbms_output.enable(buffer_size <span class="operator">=</span><span class="operator">&gt;</span> <span class="keyword">null</span>);</span><br><span class="line">  <span class="keyword">open</span> cur_tables(owner, tableName); <span class="comment">-- 打开游标</span></span><br><span class="line">  loop</span><br><span class="line">      <span class="keyword">fetch</span> cur_tables <span class="keyword">into</span> v_table; <span class="comment">-- 提取游标</span></span><br><span class="line">      exit <span class="keyword">when</span> cur_tables<span class="operator">%</span>notfound;</span><br><span class="line">      v_index :<span class="operator">=</span> v_index <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">      v_sql :<span class="operator">=</span> <span class="string">&#x27;select count(*) from &#x27;</span> <span class="operator">||</span> v_table;</span><br><span class="line">      <span class="keyword">execute</span> immediate v_sql <span class="keyword">into</span> v_cnt;</span><br><span class="line">      if v_cnt <span class="operator">=</span> <span class="number">0</span> <span class="keyword">then</span> </span><br><span class="line">        v_sql :<span class="operator">=</span> <span class="string">&#x27;drop table &#x27;</span><span class="operator">||</span> v_table;</span><br><span class="line">        <span class="keyword">execute</span> immediate v_sql;</span><br><span class="line">        dbms_output.put_line(<span class="string">&#x27;table:&#x27;</span> <span class="operator">||</span> v_table <span class="operator">||</span> <span class="string">&#x27; is empty, drop success.&#x27;</span>);</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        dbms_output.put_line(<span class="string">&#x27;table:&#x27;</span> <span class="operator">||</span> v_table <span class="operator">||</span> <span class="string">&#x27; has records, drop fail. total count=&#x27;</span> <span class="operator">||</span> v_cnt);</span><br><span class="line">      <span class="keyword">end</span> if;</span><br><span class="line">  <span class="keyword">end</span> loop;</span><br><span class="line">  <span class="keyword">close</span> cur_tables; <span class="comment">-- 关闭游标</span></span><br><span class="line"></span><br><span class="line">  if v_index <span class="operator">=</span> <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">    dbms_output.put_line(<span class="string">&#x27;table:&#x27;</span> <span class="operator">||</span> tableName <span class="operator">||</span> <span class="string">&#x27; does not exist.&#x27;</span>);</span><br><span class="line">  <span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>
<div id="gitalk-container"></div>
<script src="https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

		<script>
		var gitalkConfig = {"clientID":"e6b75c64218ff017ed19","clientSecret":"bd6f2fb48b56274cc02080a5101296ec76990244","repo":"yuanrui.github.io","owner":"yuanrui","admin":["yuanrui"],"distractionFreeMode":false};
	    gitalkConfig.id = md5(location.pathname);
		var gitalk = new Gitalk(gitalkConfig);
	    gitalk.render("gitalk-container");
	    </script>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Oracle/">Oracle</a>►<a class="article-category-link" href="/categories/Oracle/Sql/">Sql</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/开发笔记/">开发笔记</a><a href="/tags/Oracle/">Oracle</a><a href="/tags/Sql/">Sql</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/09/05/Avoid-the-impact-of-set-system-time-on-program-timeout-logic/" title="避免系统校时对程序超时判断逻辑的影响" itemprop="url">避免系统校时对程序超时判断逻辑的影响</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Banana" target="_blank" itemprop="author">Banana</a>
		
  <p class="article-time">
    <time datetime="2021-09-05T07:00:58.000Z" itemprop="datePublished"> Published 2021-09-05</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>程序的超时判断逻辑，一般用于指定时间范围内执行某项操作或等待操作结果。举个例子，Tcp通信中客户端向服务端发送请求数据后，需要等待服务端返回结果。这里的等待一般是有时间限制的，如果不做超时处理，客户端接收数据的线程将长时间处于阻塞状态，影响客户端的运行性能。<br>在超时处理中，有一种很常见的用法是有Bug的，比如下面的代码。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sock = <span class="keyword">new</span> Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);</span><br><span class="line">sock.ReceiveTimeout = <span class="number">10000</span>;</span><br><span class="line">sock.Connect(<span class="string">&quot;192.168.1.100&quot;</span>, <span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> startAt = DateTime.Now;</span><br><span class="line"><span class="keyword">var</span> buffer = <span class="keyword">new</span> Byte[<span class="number">4096</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> ((DateTime.Now - startAt).TotalMilliseconds &lt; sock.ReceiveTimeout)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!sock.Poll(<span class="number">10</span>, SelectMode.SelectRead) || sock.Available &lt;= <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        Thread.Sleep(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sock.Receive(buffer, SocketFlags.None);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>示例代码采用DateTime来获取系统时间，当前时间减去开始时间得到时间范围，当时间范围大于某个值时，超时。这个用法之所以存在Bug是因为是没有考虑系统校时的影响，在时钟回拨的时候，while循环有可能需要执行更长的时间。正确的用法应当采用System.Diagnostics命名空间的Stopwatch.<br><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> watch = Stopwatch.StartNew();</span><br><span class="line"><span class="keyword">while</span> (watch.Elapsed.TotalMilliseconds &lt; sock.ReceiveTimeout)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!sock.Poll(<span class="number">10</span>, SelectMode.SelectRead) || sock.Available &lt;= <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        Thread.Sleep(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sock.Receive(buffer, SocketFlags.None);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>那么，Stopwatch就不会受系统校时影响了吗？答案是看硬件支持情况。.NET Framework版的Stopwatch内部实现基于系统硬件支持高分辨率性能计数器（QueryPerformanceFrequency），不支持高分辨率性能计数器时采用DateTime.UtcNow.Ticks作为时间戳。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">//.NET Framework Stopwatch部分源代码</span></span><br><span class="line">   <span class="function"><span class="keyword">static</span> <span class="title">Stopwatch</span>()</span> &#123;                       </span><br><span class="line">       <span class="built_in">bool</span> succeeded = SafeNativeMethods.QueryPerformanceFrequency(<span class="keyword">out</span> Frequency);            </span><br><span class="line">       <span class="keyword">if</span>(!succeeded) &#123;</span><br><span class="line">           IsHighResolution = <span class="literal">false</span>; </span><br><span class="line">           Frequency = TicksPerSecond;</span><br><span class="line">           tickFrequency = <span class="number">1</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">else</span> &#123;</span><br><span class="line">           IsHighResolution = <span class="literal">true</span>;</span><br><span class="line">           tickFrequency = TicksPerSecond;</span><br><span class="line">           tickFrequency /= Frequency;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">long</span> <span class="title">GetTimestamp</span>()</span> &#123;</span><br><span class="line">       <span class="keyword">if</span>(IsHighResolution) &#123;</span><br><span class="line">           <span class="built_in">long</span> timestamp = <span class="number">0</span>;    </span><br><span class="line">           SafeNativeMethods.QueryPerformanceCounter(<span class="keyword">out</span> timestamp);</span><br><span class="line">           <span class="keyword">return</span> timestamp;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="keyword">return</span> DateTime.UtcNow.Ticks;</span><br><span class="line">       &#125;   </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>通过查看源代码我们知道，可以使用Stopwatch.IsHighResolution字段来判断计时器是否基于高分辨率性能计数器。在最新版的.Net Core源代码中，这个字段直接初始化为true，也就是说.Net Core默认都是采用高分辨率性能计数器来做时间戳的。为什么.Net Core中不像Framework那样内部做下兼容性判断呢，可能的原因是，在Windows XP及以后的操作系统都支持QueryPerformanceFrequency函数，再加上现在的硬件环境普遍越来越好，所以直接取消掉了兼容性处理。</p>
<p>总结，推荐使用Stopwatch来做超时判断处理。尽管一些老旧机器不支持高分辨率性能计数器，传统的.NET Framework在内部做了兼容性处理，.Net Core在最新的硬件上运行默认是支持的，可以放心使用。</p>
<p>参考链接：</p>
<p><a target="_blank" rel="noopener" href="https://github.com/dotnet/runtime/blob/main/src/libraries/System.Private.CoreLib/src/System/Diagnostics/Stopwatch.cs">https://github.com/dotnet/runtime/blob/main/src/libraries/System.Private.CoreLib/src/System/Diagnostics/Stopwatch.cs</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/dotnet/api/system.diagnostics.stopwatch.ishighresolution?view=net-5.0">https://docs.microsoft.com/zh-cn/dotnet/api/system.diagnostics.stopwatch.ishighresolution?view=net-5.0</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/windows/win32/sysinfo/acquiring-high-resolution-time-stamps">https://docs.microsoft.com/zh-cn/windows/win32/sysinfo/acquiring-high-resolution-time-stamps</a></p>
<p><a target="_blank" rel="noopener" href="https://referencesource.microsoft.com/#System/services/monitoring/system/diagnosticts/Stopwatch.cs,c5257ce1ef4b0422">https://referencesource.microsoft.com/#System/services/monitoring/system/diagnosticts/Stopwatch.cs,c5257ce1ef4b0422</a></p>
<p><a target="_blank" rel="noopener" href="https://referencesource.microsoft.com/#System/compmod/microsoft/win32/SafeNativeMethods.cs,b692d974115ae110">https://referencesource.microsoft.com/#System/compmod/microsoft/win32/SafeNativeMethods.cs,b692d974115ae110</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/windows/win32/api/profileapi/nf-profileapi-queryperformancefrequency">https://docs.microsoft.com/zh-cn/windows/win32/api/profileapi/nf-profileapi-queryperformancefrequency</a></p>

<div id="gitalk-container"></div>
<script src="https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

		<script>
		var gitalkConfig = {"clientID":"e6b75c64218ff017ed19","clientSecret":"bd6f2fb48b56274cc02080a5101296ec76990244","repo":"yuanrui.github.io","owner":"yuanrui","admin":["yuanrui"],"distractionFreeMode":false};
	    gitalkConfig.id = md5(location.pathname);
		var gitalk = new Gitalk(gitalkConfig);
	    gitalk.render("gitalk-container");
	    </script>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/开发笔记/">开发笔记</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/08/19/Choose-Environment-NewLine-carefully/" title="谨慎使用系统换行符" itemprop="url">谨慎使用系统换行符</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Banana" target="_blank" itemprop="author">Banana</a>
		
  <p class="article-time">
    <time datetime="2021-08-19T10:10:01.000Z" itemprop="datePublished"> Published 2021-08-19</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>项目中有一个计算Http请求哈希值的环节，客户端按照指定文本格式生成哈希值；服务端收到Http请求后按照相同格式的生成文本并计算哈希，比较哈希值的异同判断请求信息是否被篡改。定义的文本格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Request Method      + &quot;\n&quot; +</span><br><span class="line">Accept              + &quot;\n&quot; +  </span><br><span class="line">Content-Type        + &quot;\n&quot; +</span><br><span class="line">Request URI         + &quot;\n&quot; +</span><br><span class="line">MD5(Request Body)   + &quot;\n&quot; +</span><br><span class="line">jti                 + &quot;\n&quot; +</span><br><span class="line">iat</span><br></pre></td></tr></table></figure>
<p>公司内部测试没啥问题，移交给客户后报出生成的哈希值和工具生成的哈希值不匹配，而用工具生成的哈希值是可以请求服务接口的。截图也看了，日志也看了，明明是相同的文本，为啥生成的哈希就是不一样呢。找了好久才发现是不可见字符的影响，原来在服务端拼接指定格式文本的时候使用的StringBuilder的AppendLine方法，而AppendLine方法的内部自动追加了一个Environment.NewLine.</p>
<p>我们都知道“\n”是换行符，一直以来C#的各种编程实践都推荐使用 Environment.NewLine 用于指定系统换行符，但是 <strong>Environment.NewLine != “\n”</strong>. 所以在这个示例中正确的用法应该是使用Append方法，在Append方法里添加”\n”作为换行使用.</p>
<table>
<thead>
<tr>
<th>操作系统</th>
<th>回车换行所用字符</th>
</tr>
</thead>
<tbody>
<tr>
<td>Linux/Unix/Android/Mac OS X 10</td>
<td>\n = Newline = 0x0A = 10 = LF =Line Feed = 换行 = Ctrl + J</td>
</tr>
<tr>
<td>Mac OS 9</td>
<td>\r = Return = 0x0D = 13 = CR = Carriage Return = 回车 = Ctrl + M</td>
</tr>
<tr>
<td>Windows/Dos</td>
<td>\r \n = 0x0D 0x0A = CR LF = 回车 换行</td>
</tr>
</tbody>
</table>
<p>Windows平台的换行符是”\r\n“，而Linux平台的换行符是”\n“，在不同平台下调用系统换行符返回的换行符是不一样的。很多时候我们需要保证平台兼容性，让Linux平台和Windows平台的保持一致时应该拒绝使用编程语言提供的系统换行符，应该使用原生的”\n”或”\r\n”。至于是使用”\n”还是”\r\n”来定义换行格式，理论上都可以，只要约定好就行。</p>
<table>
<thead>
<tr>
<th>编程语言/环境</th>
<th>系统换行符</th>
</tr>
</thead>
<tbody>
<tr>
<td>C#</td>
<td>Environment.NewLine</td>
</tr>
<tr>
<td>Java/JDK7前</td>
<td>System.getProperty(“line.separator”)</td>
</tr>
<tr>
<td>Java/JDK7后</td>
<td>System.lineSeparator()</td>
</tr>
<tr>
<td>Python</td>
<td>os.linesep</td>
</tr>
</tbody>
</table>
<hr>
<p>后记：在排查完问题后，很好奇到底还有那些字符属于不可见字符。原来在ASCII中存在控制字符和打印字符的说法，通常我们说的不可见字符大多是控制字符。常见的控制字符（US-ASCII控制字符）见下表。</p>
<table>
<thead>
<tr>
<th style="text-align:left">十进制</th>
<th style="text-align:left">十六进制</th>
<th style="text-align:left">控制字符</th>
<th style="text-align:left">转义字符</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">0</td>
<td style="text-align:left">00</td>
<td style="text-align:left">NUL</td>
<td style="text-align:left">\0</td>
<td style="text-align:left">Null character(空字符)</td>
</tr>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left">01</td>
<td style="text-align:left">SOH</td>
<td style="text-align:left"></td>
<td style="text-align:left">Start of Header(标题开始)</td>
</tr>
<tr>
<td style="text-align:left">2</td>
<td style="text-align:left">02</td>
<td style="text-align:left">STX</td>
<td style="text-align:left"></td>
<td style="text-align:left">Start of Text(正文开始)</td>
</tr>
<tr>
<td style="text-align:left">3</td>
<td style="text-align:left">03</td>
<td style="text-align:left">ETX</td>
<td style="text-align:left"></td>
<td style="text-align:left">End of Text(正文结束)</td>
</tr>
<tr>
<td style="text-align:left">4</td>
<td style="text-align:left">04</td>
<td style="text-align:left">EOT</td>
<td style="text-align:left"></td>
<td style="text-align:left">End of Transmission(传输结束)</td>
</tr>
<tr>
<td style="text-align:left">5</td>
<td style="text-align:left">05</td>
<td style="text-align:left">ENQ</td>
<td style="text-align:left"></td>
<td style="text-align:left">Enquiry(请求)</td>
</tr>
<tr>
<td style="text-align:left">6</td>
<td style="text-align:left">06</td>
<td style="text-align:left">ACK</td>
<td style="text-align:left"></td>
<td style="text-align:left">Acknowledgment(收到通知/响应)</td>
</tr>
<tr>
<td style="text-align:left">7</td>
<td style="text-align:left">07</td>
<td style="text-align:left">BEL</td>
<td style="text-align:left">\a</td>
<td style="text-align:left">Bell(响铃)</td>
</tr>
<tr>
<td style="text-align:left">8</td>
<td style="text-align:left">08</td>
<td style="text-align:left">BS</td>
<td style="text-align:left">\b</td>
<td style="text-align:left">Backspace(退格)</td>
</tr>
<tr>
<td style="text-align:left">9</td>
<td style="text-align:left">09</td>
<td style="text-align:left">HT</td>
<td style="text-align:left">\t</td>
<td style="text-align:left">Horizontal Tab(水平制表符)</td>
</tr>
<tr>
<td style="text-align:left">10</td>
<td style="text-align:left">0A</td>
<td style="text-align:left">LF</td>
<td style="text-align:left">\n</td>
<td style="text-align:left">Line feed(换行键)</td>
</tr>
<tr>
<td style="text-align:left">11</td>
<td style="text-align:left">0B</td>
<td style="text-align:left">VT</td>
<td style="text-align:left">\v</td>
<td style="text-align:left">Vertical Tab(垂直制表符)</td>
</tr>
<tr>
<td style="text-align:left">12</td>
<td style="text-align:left">0C</td>
<td style="text-align:left">FF</td>
<td style="text-align:left">\f</td>
<td style="text-align:left">Form feed(换页键)</td>
</tr>
<tr>
<td style="text-align:left">13</td>
<td style="text-align:left">0D</td>
<td style="text-align:left">CR</td>
<td style="text-align:left">\r</td>
<td style="text-align:left">Carriage return(回车键)</td>
</tr>
<tr>
<td style="text-align:left">14</td>
<td style="text-align:left">0E</td>
<td style="text-align:left">SO</td>
<td style="text-align:left"></td>
<td style="text-align:left">Shift Out(不用切换)</td>
</tr>
<tr>
<td style="text-align:left">15</td>
<td style="text-align:left">0F</td>
<td style="text-align:left">SI</td>
<td style="text-align:left"></td>
<td style="text-align:left">Shift In(启用切换)</td>
</tr>
<tr>
<td style="text-align:left">16</td>
<td style="text-align:left">10</td>
<td style="text-align:left">DLE</td>
<td style="text-align:left"></td>
<td style="text-align:left">Data Link Escape(数据链路转义)</td>
</tr>
<tr>
<td style="text-align:left">17</td>
<td style="text-align:left">11</td>
<td style="text-align:left">DC1</td>
<td style="text-align:left"></td>
<td style="text-align:left">Device Control 1(设备控制1) /XON(Transmit On)</td>
</tr>
<tr>
<td style="text-align:left">18</td>
<td style="text-align:left">12</td>
<td style="text-align:left">DC2</td>
<td style="text-align:left"></td>
<td style="text-align:left">Device Control 2(设备控制2)</td>
</tr>
<tr>
<td style="text-align:left">19</td>
<td style="text-align:left">13</td>
<td style="text-align:left">DC3</td>
<td style="text-align:left"></td>
<td style="text-align:left">Device Control 3(设备控制3) /XOFF(Transmit Off)</td>
</tr>
<tr>
<td style="text-align:left">20</td>
<td style="text-align:left">14</td>
<td style="text-align:left">DC4</td>
<td style="text-align:left"></td>
<td style="text-align:left">Device Control 4(设备控制4)</td>
</tr>
<tr>
<td style="text-align:left">21</td>
<td style="text-align:left">15</td>
<td style="text-align:left">NAK</td>
<td style="text-align:left"></td>
<td style="text-align:left">Negative Acknowledgement(拒绝接收/无响应)</td>
</tr>
<tr>
<td style="text-align:left">22</td>
<td style="text-align:left">16</td>
<td style="text-align:left">SYN</td>
<td style="text-align:left"></td>
<td style="text-align:left">Synchronous Idle(同步空闲)</td>
</tr>
<tr>
<td style="text-align:left">23</td>
<td style="text-align:left">17</td>
<td style="text-align:left">ETB</td>
<td style="text-align:left"></td>
<td style="text-align:left">End of Trans the Block(传输块结束)</td>
</tr>
<tr>
<td style="text-align:left">24</td>
<td style="text-align:left">18</td>
<td style="text-align:left">CAN</td>
<td style="text-align:left"></td>
<td style="text-align:left">Cancel(取消)</td>
</tr>
<tr>
<td style="text-align:left">25</td>
<td style="text-align:left">19</td>
<td style="text-align:left">EM</td>
<td style="text-align:left"></td>
<td style="text-align:left">End of Medium(已到介质末端/介质存储已满)</td>
</tr>
<tr>
<td style="text-align:left">26</td>
<td style="text-align:left">1A</td>
<td style="text-align:left">SUB</td>
<td style="text-align:left"></td>
<td style="text-align:left">Substitute(替补/替换)</td>
</tr>
<tr>
<td style="text-align:left">27</td>
<td style="text-align:left">1B</td>
<td style="text-align:left">ESC</td>
<td style="text-align:left">\e</td>
<td style="text-align:left">Escape(溢出/逃离/取消)</td>
</tr>
<tr>
<td style="text-align:left">28</td>
<td style="text-align:left">1C</td>
<td style="text-align:left">FS</td>
<td style="text-align:left"></td>
<td style="text-align:left">File Separator(文件分割符)</td>
</tr>
<tr>
<td style="text-align:left">29</td>
<td style="text-align:left">1D</td>
<td style="text-align:left">GS</td>
<td style="text-align:left"></td>
<td style="text-align:left">Group Separator(分组符)</td>
</tr>
<tr>
<td style="text-align:left">30</td>
<td style="text-align:left">1E</td>
<td style="text-align:left">RS</td>
<td style="text-align:left"></td>
<td style="text-align:left">Record Separator(记录分隔符)</td>
</tr>
<tr>
<td style="text-align:left">31</td>
<td style="text-align:left">1F</td>
<td style="text-align:left">US</td>
<td style="text-align:left"></td>
<td style="text-align:left">Unit Separator(单元分隔符)</td>
</tr>
<tr>
<td style="text-align:left">32</td>
<td style="text-align:left">20</td>
<td style="text-align:left">SP</td>
<td style="text-align:left"></td>
<td style="text-align:left">White space</td>
</tr>
<tr>
<td style="text-align:left">127</td>
<td style="text-align:left">7F</td>
<td style="text-align:left">DEL</td>
<td style="text-align:left"></td>
<td style="text-align:left">Delete(删除)</td>
</tr>
</tbody>
</table>
<p>参考链接：</p>
<p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/zh-hans/%E6%8E%A7%E5%88%B6%E5%AD%97%E7%AC%A6">https://zh.wikipedia.org/zh-hans/%E6%8E%A7%E5%88%B6%E5%AD%97%E7%AC%A6</a></p>
<p><a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2006/04/post_213.html">https://www.ruanyifeng.com/blog/2006/04/post_213.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.crifan.com/files/doc/docbook/char_encoding/release/webhelp/ascii_ctrl_char.html">https://www.crifan.com/files/doc/docbook/char_encoding/release/webhelp/ascii_ctrl_char.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.crifan.com/detailed_carriage_return_0x0d_0x0a_cr_lf__r__n_the_context/">https://www.crifan.com/detailed_carriage_return_0x0d_0x0a_cr_lf__r__n_the_context/</a></p>

<div id="gitalk-container"></div>
<script src="https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

		<script>
		var gitalkConfig = {"clientID":"e6b75c64218ff017ed19","clientSecret":"bd6f2fb48b56274cc02080a5101296ec76990244","repo":"yuanrui.github.io","owner":"yuanrui","admin":["yuanrui"],"distractionFreeMode":false};
	    gitalkConfig.id = md5(location.pathname);
		var gitalk = new Gitalk(gitalkConfig);
	    gitalk.render("gitalk-container");
	    </script>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/开发笔记/">开发笔记</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/04/27/MySql-insert-or-update-syntax/" title="MySql SQL语句实现数据表插入或更新" itemprop="url">MySql SQL语句实现数据表插入或更新</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Banana" target="_blank" itemprop="author">Banana</a>
		
  <p class="article-time">
    <time datetime="2021-04-27T03:35:00.000Z" itemprop="datePublished"> Published 2021-04-27</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>Spring Data Jpa的增删改查仓库接口(CrudRepository)提供一个sava方法，用于保存实体对象。众所周知，在ORM框架中实体对应数据表，对实体的保存操作最终会转换为sql执行语句。数据保存实际上是执行插入和更新操作，在数据表中不存在该记录时，使用insert语句插入，存在相关记录时，使用update语句更新非主键列。本文主要介绍MySql数据表插入或更新的几种sql语句实现。</p>
<p>在正式开始之前，假设我们要是保存的数据表是<em>t_sequence</em>，并且存在部分数据。数据表结构定义如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">drop table if exists t_sequence;</span><br><span class="line">create table t_sequence</span><br><span class="line">(</span><br><span class="line">  seq_name varchar(64) not null primary key comment &#x27;序列名称&#x27;,</span><br><span class="line">  start_value bigint(20) not null default 1 comment &#x27;起始值&#x27;,</span><br><span class="line">  increment int(11) not null default 1 comment &#x27;增量值&#x27;,</span><br><span class="line">  updated_at timestamp not null default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP comment &#x27;更新时间&#x27;</span><br><span class="line">) engine=InnoDB;</span><br><span class="line">alter table t_sequence comment &#x27;序列表&#x27;;</span><br></pre></td></tr></table></figure>
<p>初始表中数据显示如下：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t_sequence(seq_name, start_value, increment, updated_at) values (&#x27;a&#x27;, 1, 1, &#x27;2021-04-27 00:00:00&#x27;);</span><br><span class="line">Query OK, 1 row affected (0.04 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_sequence;</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| seq_name | start_value | increment | updated_at          |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| a        |           1 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></p>
<h3 id="INSERT-…-ON-DUPLICATE-KEY-UPDATE语法"><a href="#INSERT-…-ON-DUPLICATE-KEY-UPDATE语法" class="headerlink" title="INSERT … ON DUPLICATE KEY UPDATE语法"></a>INSERT … ON DUPLICATE KEY UPDATE语法</h3><p>该语法用于插入或更新，使用前提是数据表必须包含唯一索引或主键。当执行的sql包含on duplicate key update子句时，插入的记录已经存在时，执行更新操作。 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t_sequence (seq_name, start_value, increment, updated_at) values (&#x27;a&#x27;, 100, 1, now()) on duplicate key update start_value=200, increment=1, updated_at=now();</span><br><span class="line">Query OK, 2 rows affected (0.04 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_sequence;</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| seq_name | start_value | increment | updated_at          |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| a        |         200 |         1 | 2021-04-27 17:12:27 |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_sequence (seq_name, start_value, increment, updated_at) values (&#x27;b&#x27;, 1, 1, now()) on duplicate key update start_value=1, increment=1, updated_at=now();</span><br><span class="line">Query OK, 1 row affected (0.05 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_sequence;</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| seq_name | start_value | increment | updated_at          |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| a        |         200 |         1 | 2021-04-27 17:12:27 |</span><br><span class="line">| b        |           1 |         1 | 2021-04-27 17:13:31 |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h3 id="REPLACE-INTO语法"><a href="#REPLACE-INTO语法" class="headerlink" title="REPLACE INTO语法"></a>REPLACE INTO语法</h3><p>replace into语法的工作方式和insert完全相同，不同之处在于，如果表中旧行的主键或唯一索引与新行值相同，则在插入新行之前删除旧行。简述：要么插入，要么删除后再插入。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; replace into t_sequence (seq_name, start_value, increment, updated_at) values (&#x27;b&#x27;, 10, 1, &#x27;2021-04-27 00:00:00&#x27;);</span><br><span class="line">Query OK, 2 rows affected (0.03 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_sequence;</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| seq_name | start_value | increment | updated_at          |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| a        |         200 |         1 | 2021-04-27 17:12:27 |</span><br><span class="line">| b        |          10 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; replace into t_sequence(seq_name, start_value, increment, updated_at) values (&#x27;c&#x27;, 1, 1, &#x27;2021-04-27 00:00:00&#x27;);</span><br><span class="line">Query OK, 1 row affected (0.03 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_sequence;</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| seq_name | start_value | increment | updated_at          |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| a        |         200 |         1 | 2021-04-27 17:12:27 |</span><br><span class="line">| b        |          10 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">| c        |           1 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h3 id="先插入后更新"><a href="#先插入后更新" class="headerlink" title="先插入后更新"></a>先插入后更新</h3><p>先插入后更新主要运用MySql提供的insert ignore语法执行数据插入，执行update语句更新数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert ignore into t_sequence (seq_name, start_value, increment, updated_</span><br><span class="line">at) values (&#x27;d&#x27;, 1, 1, &#x27;2021-04-27 00:00:00&#x27;);</span><br><span class="line">Query OK, 1 row affected (0.05 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; update t_sequence</span><br><span class="line">    -&gt; set start_value= 1, increment=1, updated_at=now()</span><br><span class="line">    -&gt; where seq_name = &#x27;d&#x27;;</span><br><span class="line">Query OK, 1 row affected (0.04 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_sequence;</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| seq_name | start_value | increment | updated_at          |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| a        |         200 |         1 | 2021-04-27 17:12:27 |</span><br><span class="line">| b        |          10 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">| c        |           1 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">| d        |           1 |         1 | 2021-04-27 17:15:17 |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert ignore into t_sequence (seq_name, start_value, increment, updated_at) values (&#x27;d&#x27;, 1, 1, &#x27;2021-04-27 00:00:00&#x27;);</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; update t_sequence</span><br><span class="line">    -&gt; set start_value= 1, increment=1, updated_at=&#x27;2021-04-27 00:00:00&#x27;</span><br><span class="line">    -&gt; where seq_name = &#x27;d&#x27;;</span><br><span class="line">Query OK, 1 row affected (0.03 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_sequence;</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| seq_name | start_value | increment | updated_at          |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| a        |         200 |         1 | 2021-04-27 17:12:27 |</span><br><span class="line">| b        |          10 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">| c        |           1 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">| d        |           1 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h3 id="先更新后插入"><a href="#先更新后插入" class="headerlink" title="先更新后插入"></a>先更新后插入</h3><p>先更新后插入和先插入后更新的原理相同，都用到了insert ignore语法，只是insert 语句和update语句调换了顺序。这里更高级的用法是：先执行update语句，使用row_count()函数获取影响行数，再使用insert ignore … select语法过滤where条件后执行插入操作。</p>
<p>PS：当待更新的数据在表中存在，执行update语句后，数据未发送变化时，row_count()函数结果可能返回0.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update t_sequence</span><br><span class="line">    -&gt; set start_value= 1, increment=1, updated_at=now()</span><br><span class="line">    -&gt; where seq_name = &#x27;e&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line">Rows matched: 0  Changed: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select ROW_COUNT() into @cnt;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert ignore into t_sequence (seq_name, start_value, increment, updated_at)</span><br><span class="line">    -&gt; select * from (select &#x27;e&#x27; as seq_name, 1 as start_value, 1 as increment,&#x27;2021-04-27 00:00:00&#x27; as updated_at) t</span><br><span class="line">    -&gt; where 1 = if(@cnt &gt; 0, 0, 1);</span><br><span class="line">Query OK, 1 row affected (0.08 sec)</span><br><span class="line">Records: 1  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_sequence;</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| seq_name | start_value | increment | updated_at          |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| a        |         200 |         1 | 2021-04-27 17:12:27 |</span><br><span class="line">| b        |          10 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">| c        |           1 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">| d        |           1 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">| e        |           1 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; update t_sequence</span><br><span class="line">    -&gt; set start_value= 1000, increment=1, updated_at=now()</span><br><span class="line">    -&gt; where seq_name = &#x27;e&#x27;;</span><br><span class="line">Query OK, 1 row affected (0.04 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select ROW_COUNT() into @cnt;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert ignore into t_sequence (seq_name, start_value, increment, updated_at)</span><br><span class="line">    -&gt; select * from (select &#x27;e&#x27; as seq_name, 1 as start_value, 1 as increment,&#x27;2021-04-27 00:00:00&#x27; as updated_at) t</span><br><span class="line">    -&gt; where 1 = if(@cnt &gt; 0, 0, 1);</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_sequence;</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| seq_name | start_value | increment | updated_at          |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| a        |         200 |         1 | 2021-04-27 17:12:27 |</span><br><span class="line">| b        |          10 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">| c        |           1 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">| d        |           1 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">| e        |        1000 |         1 | 2021-04-27 17:20:37 |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h3 id="先删除后插入"><a href="#先删除后插入" class="headerlink" title="先删除后插入"></a>先删除后插入</h3><p>先删除后插入：先执行delete语句删除数据，然后执行insert语句插入数据。 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; delete from t_sequence where seq_name = &#x27;e&#x27;;</span><br><span class="line">Query OK, 1 row affected (0.04 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_sequence(seq_name, start_value, increment, updated_at) values (&#x27;e&#x27;, 10, 1, &#x27;2021-04-27 00:00:00&#x27;);</span><br><span class="line">Query OK, 1 row affected (0.06 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_sequence;</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| seq_name | start_value | increment | updated_at          |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">| a        |         200 |         1 | 2021-04-27 17:12:27 |</span><br><span class="line">| b        |          10 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">| c        |           1 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">| d        |           1 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">| e        |          10 |         1 | 2021-04-27 00:00:00 |</span><br><span class="line">+----------+-------------+-----------+---------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>毫无疑问，insert … on duplicate key update语法是最适合数据表插入或更新操作的最佳方式。</p>
<p>严格意义上说，replace into语法和先删除后插入都不符合数据插入或更新的标准，执行过程存在删除操作，因此不推荐。</p>
<p>先插入后更新、先更新后插入的核心在于insert ignore语法，当插入的数据与主键或唯一索引冲突时，数据插入会被丢弃，且不会抛出异常。当数据表不存在主键和唯一索引时，先插入后更新、先更新后插入可以作为备选方案。结合row_count()和if()函数在where子句中对插入或更新影响行数进行过滤，可以减少一次sql语句执行，进而提升处理效率。</p>
<table>
<thead>
<tr>
<th>插入或更新实现方式</th>
<th>前提条件</th>
<th>推荐指数</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>INSERT … ON DUPLICATE KEY UPDATE语法</td>
<td>数据表存在主键或唯一索引</td>
<td>★★★★★</td>
<td>推荐</td>
</tr>
<tr>
<td>REPLACE INTO语法</td>
<td>数据表存在主键或唯一索引</td>
<td>★★★</td>
<td>存在删除操作</td>
</tr>
<tr>
<td>先插入后更新</td>
<td></td>
<td>★★★</td>
<td>结合ROW_COUNT()可更高效</td>
</tr>
<tr>
<td>先更新后插入</td>
<td></td>
<td>★★★</td>
<td>结合ROW_COUNT()可更高效</td>
</tr>
<tr>
<td>先删除后插入</td>
<td></td>
<td>★★</td>
<td>存在删除操作</td>
</tr>
</tbody>
</table>
<hr>
<p>参考信息：</p>
<p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/insert.html">https://dev.mysql.com/doc/refman/5.7/en/insert.html</a></p>
<p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/insert-select.html">https://dev.mysql.com/doc/refman/5.7/en/insert-select.html</a></p>
<p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/insert-on-duplicate.html">https://dev.mysql.com/doc/refman/5.7/en/insert-on-duplicate.html</a></p>
<p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/replace.html">https://dev.mysql.com/doc/refman/5.7/en/replace.html</a></p>
<p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/information-functions.html#function_row-count">https://dev.mysql.com/doc/refman/5.7/en/information-functions.html#function_row-count</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-data/jpa/docs/2.5.0/reference/html/#jpa.entity-persistence.saving-entites">https://docs.spring.io/spring-data/jpa/docs/2.5.0/reference/html/#jpa.entity-persistence.saving-entites</a></p>

<div id="gitalk-container"></div>
<script src="https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

		<script>
		var gitalkConfig = {"clientID":"e6b75c64218ff017ed19","clientSecret":"bd6f2fb48b56274cc02080a5101296ec76990244","repo":"yuanrui.github.io","owner":"yuanrui","admin":["yuanrui"],"distractionFreeMode":false};
	    gitalkConfig.id = md5(location.pathname);
		var gitalk = new Gitalk(gitalkConfig);
	    gitalk.render("gitalk-container");
	    </script>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/MySql/">MySql</a>►<a class="article-category-link" href="/categories/MySql/Sql/">Sql</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/MySql/">MySql</a><a href="/tags/Sql/">Sql</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/04/25/Bulk-insert-into-mysql-using-csharp/" title="C#实现MySql批量导入" itemprop="url">C#实现MySql批量导入</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Banana" target="_blank" itemprop="author">Banana</a>
		
  <p class="article-time">
    <time datetime="2021-04-25T02:16:00.000Z" itemprop="datePublished"> Published 2021-04-25</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>随着数据库的存储规模的增长，需要选择合适的数据批量写入技术。在MySql中实现批量导入，是指一次性的在数据表中插入很多记录，一般用于解决数据库写入性能。本文主要介绍C#中实现批量导入的MySql数据库的几种方法。</p>
<h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><p>本文使用的MySql数据库版本是：5.7，数据库连接驱动采用<a target="_blank" rel="noopener" href="https://www.nuget.org/packages/MySql.Data/">nuget.org</a>的最新中间件MySql.Data，安装方式如下：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Install-Package</span> MySql.Data <span class="literal">-Version</span> <span class="number">8.0</span>.<span class="number">24</span></span><br></pre></td></tr></table></figure>
<p>我们将通过详细的代码示例研究这些方法，首先我们定义用于测试的数据表结构：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS t_vehicle_pass_record;</span><br><span class="line">CREATE TABLE t_vehicle_pass_record (</span><br><span class="line">  id bigint NOT NULL AUTO_INCREMENT,</span><br><span class="line">  plate_no varchar(10) NOT NULL DEFAULT &#x27;&#x27;,</span><br><span class="line">  plate_color varchar(6) NOT NULL DEFAULT &#x27;&#x27;,</span><br><span class="line">  pass_time datetime NOT NULL DEFAULT now(),</span><br><span class="line">  equip_id varchar(20) NOT NULL,</span><br><span class="line">  created_at datetime NOT NULL DEFAULT now(),</span><br><span class="line">  PRIMARY KEY (id)</span><br><span class="line">) ENGINE=InnoDB;</span><br></pre></td></tr></table></figure>
<p>然后定义代码所引用的C#模型代码：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">VehiclePassModel</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Int64 Id &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> PlateNO &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> PlateColor &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> DateTime PassTime &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> EquipId &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> DateTime CreatedAt &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="循环执行命令"><a href="#循环执行命令" class="headerlink" title="循环执行命令"></a>循环执行命令</h3><p>循环执行命令（MySqlCommand）是一种常规的方式，一般步骤是：创建连接-&gt;打开数据库连接-&gt;创建事务-&gt;创建命令-&gt;循环执行命令-&gt;提交事务-&gt;关闭连接，结束。小提示：循环执行命令时，需要将绑定的参数清空后重新绑定，避免抛出参数已经定义的异常。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">DoInsertList1</span>(<span class="params">IEnumerable&lt;VehiclePassModel&gt; list</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">string</span> sql = <span class="string">&quot;insert into t_vehicle_pass_record (id, plate_no, plate_color, pass_time, equip_id, created_at) values (?id, ?plate_no, ?plate_color, ?pass_time, ?equip_id, now());&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> connStr = ConfigurationManager.ConnectionStrings[<span class="string">&quot;DefaultConnectionString&quot;</span>].ConnectionString;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">using</span> (<span class="keyword">var</span> conn = <span class="keyword">new</span> MySqlConnection(connStr))</span><br><span class="line">    &#123;</span><br><span class="line">        conn.Open();</span><br><span class="line">        <span class="keyword">using</span> (<span class="keyword">var</span> tran = conn.BeginTransaction())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">using</span> (<span class="keyword">var</span> cmd = conn.CreateCommand())</span><br><span class="line">            &#123;</span><br><span class="line">                cmd.CommandText = sql;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">foreach</span> (<span class="keyword">var</span> model <span class="keyword">in</span> list)</span><br><span class="line">                &#123;</span><br><span class="line">                    cmd.Parameters.Clear();</span><br><span class="line">                    cmd.Parameters.AddWithValue(<span class="string">&quot;id&quot;</span>, model.Id);</span><br><span class="line">                    cmd.Parameters.AddWithValue(<span class="string">&quot;plate_no&quot;</span>, model.PlateNO);</span><br><span class="line">                    cmd.Parameters.AddWithValue(<span class="string">&quot;plate_color&quot;</span>, model.PlateColor);</span><br><span class="line">                    cmd.Parameters.AddWithValue(<span class="string">&quot;pass_time&quot;</span>, model.PassTime);</span><br><span class="line">                    cmd.Parameters.AddWithValue(<span class="string">&quot;equip_id&quot;</span>, model.EquipId);</span><br><span class="line"></span><br><span class="line">                    result += cmd.ExecuteNonQuery(); <span class="comment">//执行sql语句</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            tran.Commit();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="适配器批量更新"><a href="#适配器批量更新" class="headerlink" title="适配器批量更新"></a>适配器批量更新</h3><p>使用此方法执行插入语句，内部实现同样采用循环执行原理，不同的是适配器(MySqlDataAdapter)会根据UpdateBatchSize参数进行分组后循环执行。适配器包含4个执行命令：UpdateCommand、SelectCommand、InsertCommand、DeleteCommand，用于数据的更新、查询、插入、删除操作。批量插入时应当使用InsertCommand，同时不要给其他执行命令赋值，因为给其他执行命令赋值会造成不必要的执行。适配器包含一个UpdateBatchSize属性，用于将DataTable中的Rows拆分按照数量拆分成多个（Rows.Count / UpdateBatchSize）执行命令；UpdateBatchSize未设置或者小于1时，UpdateBatchSize等于DataTable行数，此时只有一个执行命令。</p>
<p>适配器的Update方法，提供多个方法重载，推荐使用传入DataTable类型，并设置表名称。传入DataSet类型时方法内部会转换为DataTable，并调用UpdateFromDataTable(DataTable dataTable, DataTableMapping tableMapping)方法，因此传入DataTable类型的方法更高效。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">DoInsertList2</span>(<span class="params">IEnumerable&lt;VehiclePassModel&gt; list</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">string</span> sql = <span class="string">&quot;insert into t_vehicle_pass_record (id, plate_no, plate_color, pass_time, equip_id, created_at) values (?id, ?plate_no, ?plate_color, ?pass_time, ?equip_id, now());&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> connStr = ConfigurationManager.ConnectionStrings[<span class="string">&quot;DefaultConnectionString&quot;</span>].ConnectionString;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> table = <span class="keyword">new</span> DataTable(<span class="string">&quot;t_vehicle_pass_record&quot;</span>);</span><br><span class="line">    table.Columns.Add(<span class="string">&quot;id&quot;</span>, <span class="keyword">typeof</span>(Int64));</span><br><span class="line">    table.Columns.Add(<span class="string">&quot;plate_no&quot;</span>, <span class="keyword">typeof</span>(<span class="built_in">string</span>));</span><br><span class="line">    table.Columns.Add(<span class="string">&quot;plate_color&quot;</span>, <span class="keyword">typeof</span>(<span class="built_in">string</span>));</span><br><span class="line">    table.Columns.Add(<span class="string">&quot;pass_time&quot;</span>, <span class="keyword">typeof</span>(DateTime));</span><br><span class="line">    table.Columns.Add(<span class="string">&quot;equip_id&quot;</span>, <span class="keyword">typeof</span>(<span class="built_in">string</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">var</span> model <span class="keyword">in</span> list)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> row = table.NewRow();</span><br><span class="line">        row[<span class="string">&quot;id&quot;</span>] = model.Id;</span><br><span class="line">        row[<span class="string">&quot;plate_no&quot;</span>] = model.PlateNO;</span><br><span class="line">        row[<span class="string">&quot;plate_color&quot;</span>] = model.PlateColor;</span><br><span class="line">        row[<span class="string">&quot;pass_time&quot;</span>] = model.PassTime;</span><br><span class="line">        row[<span class="string">&quot;equip_id&quot;</span>] = model.EquipId;</span><br><span class="line"></span><br><span class="line">        table.Rows.Add(row);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">using</span> (<span class="keyword">var</span> conn = <span class="keyword">new</span> MySqlConnection(connStr))</span><br><span class="line">    &#123;</span><br><span class="line">        conn.Open();</span><br><span class="line">        <span class="keyword">using</span> (<span class="keyword">var</span> tran = conn.BeginTransaction())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">using</span> (<span class="keyword">var</span> cmd = conn.CreateCommand())</span><br><span class="line">            &#123;</span><br><span class="line">                cmd.CommandText = sql;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">using</span> (<span class="keyword">var</span> adapter = <span class="keyword">new</span> MySqlDataAdapter())</span><br><span class="line">                &#123;</span><br><span class="line">                    adapter.InsertCommand = cmd;</span><br><span class="line">                    </span><br><span class="line">                    adapter.InsertCommand.Parameters.Add(<span class="string">&quot;?id&quot;</span>, MySqlDbType.Int64, <span class="number">21</span>, <span class="string">&quot;id&quot;</span>);</span><br><span class="line">                    adapter.InsertCommand.Parameters.Add(<span class="string">&quot;?plate_no&quot;</span>, MySqlDbType.VarChar, <span class="number">10</span>, <span class="string">&quot;plate_no&quot;</span>);</span><br><span class="line">                    adapter.InsertCommand.Parameters.Add(<span class="string">&quot;?plate_color&quot;</span>, MySqlDbType.VarChar, <span class="number">6</span>, <span class="string">&quot;plate_color&quot;</span>);</span><br><span class="line">                    adapter.InsertCommand.Parameters.Add(<span class="string">&quot;?pass_time&quot;</span>, MySqlDbType.DateTime, <span class="number">8</span>, <span class="string">&quot;pass_time&quot;</span>);</span><br><span class="line">                    adapter.InsertCommand.Parameters.Add(<span class="string">&quot;?equip_id&quot;</span>, MySqlDbType.VarChar, <span class="number">20</span>, <span class="string">&quot;equip_id&quot;</span>);</span><br><span class="line"></span><br><span class="line">                    adapter.InsertCommand.UpdatedRowSource = UpdateRowSource.None;</span><br><span class="line"></span><br><span class="line">                    adapter.UpdateBatchSize = <span class="number">1000</span>;</span><br><span class="line">                    result = adapter.Update(table); <span class="comment">//执行sql语句</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            tran.Commit();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="执行拼接SQL语句"><a href="#执行拼接SQL语句" class="headerlink" title="执行拼接SQL语句"></a>执行拼接SQL语句</h3><p>MySql的<a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/insert.html"><code>INSERT ... VALUES</code></a> 语法中提供插入多个值列表的功能。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO tbl_name (a,b,c) VALUES(1,2,3),(4,5,6),(7,8,9);</span><br></pre></td></tr></table></figure>
<p>此方法的核心在于拼接SQL语句，绑定参数变量列表，然后执行SQL.</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">DoInsertList3</span>(<span class="params">IEnumerable&lt;VehiclePassModel&gt; list</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">string</span> insertIntoClause = <span class="string">&quot;insert into t_vehicle_pass_record (id, plate_no, plate_color, pass_time, equip_id, created_at) values &quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> connStr = ConfigurationManager.ConnectionStrings[<span class="string">&quot;DefaultConnectionString&quot;</span>].ConnectionString;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> valueClauses = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;(list.Count());</span><br><span class="line">    <span class="keyword">var</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">using</span> (<span class="keyword">var</span> conn = <span class="keyword">new</span> MySqlConnection(connStr))</span><br><span class="line">    &#123;</span><br><span class="line">        conn.Open();</span><br><span class="line">        <span class="keyword">using</span> (<span class="keyword">var</span> tran = conn.BeginTransaction())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">using</span> (<span class="keyword">var</span> cmd = conn.CreateCommand())</span><br><span class="line">            &#123;</span><br><span class="line">                cmd.Transaction = tran;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//foreach (var model in list)</span></span><br><span class="line">                <span class="comment">//&#123;</span></span><br><span class="line">                <span class="comment">//    var suffix = Convert.ToString(index, 16);</span></span><br><span class="line">                <span class="comment">//    var clause = $&quot;(?a&#123;suffix&#125;, ?b&#123;suffix&#125;, ?c&#123;suffix&#125;, ?d&#123;suffix&#125;, ?e&#123;suffix&#125;, now())&quot;;</span></span><br><span class="line">                <span class="comment">//    valueClauses.Add(clause);</span></span><br><span class="line">                <span class="comment">//    cmd.Parameters.AddWithValue($&quot;a&#123;suffix&#125;&quot;, model.Id);</span></span><br><span class="line">                <span class="comment">//    cmd.Parameters.AddWithValue($&quot;b&#123;suffix&#125;&quot;, model.PlateNO);</span></span><br><span class="line">                <span class="comment">//    cmd.Parameters.AddWithValue($&quot;c&#123;suffix&#125;&quot;, model.PlateColor);</span></span><br><span class="line">                <span class="comment">//    cmd.Parameters.AddWithValue($&quot;d&#123;suffix&#125;&quot;, model.PassTime);</span></span><br><span class="line">                <span class="comment">//    cmd.Parameters.AddWithValue($&quot;e&#123;suffix&#125;&quot;, model.EquipId);</span></span><br><span class="line">                <span class="comment">//    index++;</span></span><br><span class="line">                <span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">foreach</span> (<span class="keyword">var</span> model <span class="keyword">in</span> list)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">var</span> clause = <span class="string">$&quot;(?id_<span class="subst">&#123;index&#125;</span>, ?plate_no_<span class="subst">&#123;index&#125;</span>, ?plate_color_<span class="subst">&#123;index&#125;</span>, ?pass_time_<span class="subst">&#123;index&#125;</span>, ?equip_id_<span class="subst">&#123;index&#125;</span>, now())&quot;</span>;</span><br><span class="line">                    valueClauses.Add(clause);</span><br><span class="line">                    cmd.Parameters.AddWithValue(<span class="string">$&quot;id_<span class="subst">&#123;index&#125;</span>&quot;</span>, model.Id);</span><br><span class="line">                    cmd.Parameters.AddWithValue(<span class="string">$&quot;plate_no_<span class="subst">&#123;index&#125;</span>&quot;</span>, model.PlateNO);</span><br><span class="line">                    cmd.Parameters.AddWithValue(<span class="string">$&quot;plate_color_<span class="subst">&#123;index&#125;</span>&quot;</span>, model.PlateColor);</span><br><span class="line">                    cmd.Parameters.AddWithValue(<span class="string">$&quot;pass_time_<span class="subst">&#123;index&#125;</span>&quot;</span>, model.PassTime);</span><br><span class="line">                    cmd.Parameters.AddWithValue(<span class="string">$&quot;equip_id_<span class="subst">&#123;index&#125;</span>&quot;</span>, model.EquipId);</span><br><span class="line">                    index++;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">var</span> sql = insertIntoClause + <span class="built_in">string</span>.Join(<span class="string">&quot;,&quot;</span>, valueClauses) + <span class="string">&quot;;&quot;</span>;</span><br><span class="line">                cmd.CommandText = sql;</span><br><span class="line"></span><br><span class="line">                Console.WriteLine(sql.Length);</span><br><span class="line">                Console.WriteLine(Encoding.UTF8.GetBytes(sql).Length);</span><br><span class="line"></span><br><span class="line">                result = cmd.ExecuteNonQuery(); <span class="comment">//执行sql语句</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            tran.Commit();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="使用MySqlBulkLoader"><a href="#使用MySqlBulkLoader" class="headerlink" title="使用MySqlBulkLoader"></a>使用MySqlBulkLoader</h3><p>MySqlBulkLoader主要包装MySql的语法 <a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html"><code>LOAD DATA INFILE</code></a>，提供将数据文件从本地或远程保存到数据库。使用参数详解：</p>
<ol>
<li>Local表示要加载的文件是否在客户端本地，默认值为false（如果导入程序和数据库在同一台服务器，此参数可以设置为false），使用时应当设置为true；</li>
<li>TableName为待导入的数据表名，为必传参数；</li>
<li>FileName为导入的文本文件路径，导入的格式可以为后缀为：.txt、.csv的UTF-8文本文件。推荐使用csv格式，将FieldTerminator设置为”,”，LineTerminator设置为Environment.NewLine；</li>
<li>导入的文本文件包含中文字符时，文本保存的格式应当设置为UTF-8，同时将CharacterSet属性设置为”utf8mb4”;</li>
<li>NumberOfLinesToSkip表示跳过多少条文本开始导入，主要用于跳过表头设置。标准的csv文件格式带有一行表头，所以此处应当设置为1;</li>
<li>Columns用于指定待导入的数据字段，字段名称和数据表中字段名称保持一致，字段顺序和内容需一一对应。通过此参数可以设置只导入部分字段内容，未设置时，需要将文本文件设置为全表字段内容。</li>
</ol>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">DoInsertList4</span>(<span class="params">IEnumerable&lt;VehiclePassModel&gt; list</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> connStr = ConfigurationManager.ConnectionStrings[<span class="string">&quot;DefaultConnectionString&quot;</span>].ConnectionString;</span><br><span class="line">    <span class="keyword">var</span> path = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, Guid.NewGuid().ToString() + <span class="string">&quot;.csv&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> head = <span class="string">&quot;id,plate_color,plate_no,pass_time,equip_id&quot;</span>;</span><br><span class="line">    <span class="keyword">using</span> (<span class="keyword">var</span> writer = File.CreateText(path))</span><br><span class="line">    &#123;</span><br><span class="line">        writer.WriteLine(head);<span class="comment">//注释掉此行后, loader.NumberOfLinesToSkip可以设置为0</span></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> item <span class="keyword">in</span> list)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> content = <span class="string">$&quot;<span class="subst">&#123;item.Id&#125;</span>,<span class="subst">&#123;item.PlateColor&#125;</span>,<span class="subst">&#123;item.PlateNO&#125;</span>,<span class="subst">&#123;item.PassTime.ToString(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>)&#125;</span>,<span class="subst">&#123;item.EquipId&#125;</span>&quot;</span>;</span><br><span class="line">            writer.WriteLine(content);</span><br><span class="line">        &#125;</span><br><span class="line">        writer.Flush();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">using</span> (<span class="keyword">var</span> conn = <span class="keyword">new</span> MySqlConnection(connStr))</span><br><span class="line">        &#123;</span><br><span class="line">            conn.Open();</span><br><span class="line">            MySqlBulkLoader loader = <span class="keyword">new</span> MySqlBulkLoader(conn);</span><br><span class="line">            loader.Local = <span class="literal">true</span>;</span><br><span class="line">            loader.FieldTerminator = <span class="string">&quot;,&quot;</span>;</span><br><span class="line">            loader.LineTerminator = Environment.NewLine;</span><br><span class="line">            loader.FileName = path;</span><br><span class="line">            loader.NumberOfLinesToSkip = <span class="number">1</span>;</span><br><span class="line">            loader.CharacterSet = <span class="string">&quot;utf8mb4&quot;</span>;</span><br><span class="line"></span><br><span class="line">            loader.TableName = <span class="string">&quot;t_vehicle_pass_record&quot;</span>;</span><br><span class="line">            loader.Columns.AddRange(head.Split(<span class="keyword">new</span>[] &#123; <span class="string">&#x27;,&#x27;</span> &#125;, StringSplitOptions.RemoveEmptyEntries));</span><br><span class="line"></span><br><span class="line">            result = loader.Load();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">finally</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (File.Exists(path))</span><br><span class="line">        &#123;</span><br><span class="line">            File.Delete(path);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>使用适配器更新时，第一次验证未设置UpdateBatchSize参数测试结果和循环执行差不多，设置为1000后，性能有着明显的提升。</p>
<p>在导入数量超过10w时，执行拼接SQL语句异常。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MySql.Data.MySqlClient.MySqlException (0x80004005): Packets larger than max_allowed_packet are not allowed.</span><br><span class="line">   在 MySql.Data.MySqlClient.MySqlStream.SendPacket(MySqlPacket packet)</span><br><span class="line">   在 MySql.Data.MySqlClient.NativeDriver.ExecutePacket(MySqlPacket packetToExecute)</span><br><span class="line">   在 MySql.Data.MySqlClient.NativeDriver.SendQuery(MySqlPacket queryPacket)</span><br><span class="line">   在 MySql.Data.MySqlClient.Driver.SendQuery(MySqlPacket p)</span><br><span class="line">   在 MySql.Data.MySqlClient.Statement.ExecuteNext()</span><br><span class="line">   在 MySql.Data.MySqlClient.PreparableStatement.Execute()</span><br><span class="line">   在 MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)</span><br><span class="line">   在 MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery()</span><br></pre></td></tr></table></figure>
<p>异常原因是客户端传输的数据包消息长度超过了4MB，解决方案是：修改数据库max_allowed_packet参数，或分批执行SQL，或修改SQL缩小语句长度和变量参数名称长度。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> model <span class="keyword">in</span> list)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> suffix = Convert.ToString(index, <span class="number">16</span>);</span><br><span class="line">    <span class="keyword">var</span> clause = <span class="string">$&quot;(?a<span class="subst">&#123;suffix&#125;</span>, ?b<span class="subst">&#123;suffix&#125;</span>, ?c<span class="subst">&#123;suffix&#125;</span>, ?d<span class="subst">&#123;suffix&#125;</span>, ?e<span class="subst">&#123;suffix&#125;</span>, now())&quot;</span>;</span><br><span class="line">    valueClauses.Add(clause);</span><br><span class="line">    cmd.Parameters.AddWithValue(<span class="string">$&quot;a<span class="subst">&#123;suffix&#125;</span>&quot;</span>, model.Id);</span><br><span class="line">    cmd.Parameters.AddWithValue(<span class="string">$&quot;b<span class="subst">&#123;suffix&#125;</span>&quot;</span>, model.PlateNO);</span><br><span class="line">    cmd.Parameters.AddWithValue(<span class="string">$&quot;c<span class="subst">&#123;suffix&#125;</span>&quot;</span>, model.PlateColor);</span><br><span class="line">    cmd.Parameters.AddWithValue(<span class="string">$&quot;d<span class="subst">&#123;suffix&#125;</span>&quot;</span>, model.PassTime);</span><br><span class="line">    cmd.Parameters.AddWithValue(<span class="string">$&quot;e<span class="subst">&#123;suffix&#125;</span>&quot;</span>, model.EquipId);</span><br><span class="line">    index++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实际运用时，还可以做更进一步的导入优化：</p>
<ul>
<li>缩小SQL绑定变量的大小，减少网络传输的消耗；</li>
<li>确保待执行的SQL在85k以内避免产生内存大对象；</li>
<li>设置合适的批次执行的数量，以达到最优解；</li>
</ul>
<p>批量导入的耗时是评价导入性能的参照标准之一，这里我们分别导入100、1000、10000、50000、10000条数据测试本地MySql数据库的平均耗时，供读者参考。</p>
<table>
<thead>
<tr>
<th>导入数量</th>
<th>循环执行命令</th>
<th>适配器批量更新</th>
<th>执行拼接SQL语句</th>
<th>使用MySqlBulkLoader</th>
</tr>
</thead>
<tbody>
<tr>
<td>100</td>
<td>121ms</td>
<td>149ms</td>
<td>124ms</td>
<td>95ms</td>
</tr>
<tr>
<td>1000</td>
<td>509ms</td>
<td>430ms</td>
<td>296ms</td>
<td>210ms</td>
</tr>
<tr>
<td>10000</td>
<td>2.87s</td>
<td>1.74s</td>
<td>787ms</td>
<td>387ms</td>
</tr>
<tr>
<td>50000</td>
<td>14.21s</td>
<td>9.12s</td>
<td>2.92s</td>
<td>2.21s</td>
</tr>
<tr>
<td>100000</td>
<td>27.73s</td>
<td>27.77s</td>
<td>异常</td>
<td>3.45s</td>
</tr>
</tbody>
</table>
<p>从测试结果来看排名：</p>
<ol>
<li><p>MySqlBulkLoader，缺点是会生成临时文件，优点是速度最快性能最好，推荐使用；</p>
</li>
<li><p>拼接SQL语句，性能次之，编码方便，数据量不大情况推荐使用。</p>
</li>
<li><p>适配器批量更新，适配器的核心在于设置UpdateBatchSize参数，需手动调优，少量数据时使用；</p>
</li>
<li><p>循环执行，简单方案，少量数据时使用；</p>
</li>
</ol>
<hr>
<p>参考信息：</p>
<p><a target="_blank" rel="noopener" href="https://referencesource.microsoft.com/#System.Data/fx/src/data/System/Data/Common/DbDataAdapter.cs">https://referencesource.microsoft.com/#System.Data/fx/src/data/System/Data/Common/DbDataAdapter.cs</a></p>
<p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/insert.html">https://dev.mysql.com/doc/refman/5.7/en/insert.html</a></p>
<p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/connector-net/en/connector-net-programming-bulk-loader.html">https://dev.mysql.com/doc/connector-net/en/connector-net-programming-bulk-loader.html</a></p>
<p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/dev/connector-net/8.0/html/T_MySql_Data_MySqlClient_MySqlBulkLoader.htm">https://dev.mysql.com/doc/dev/connector-net/8.0/html/T_MySql_Data_MySqlClient_MySqlBulkLoader.htm</a></p>
<p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/replication-features-max-allowed-packet.html">https://dev.mysql.com/doc/refman/5.7/en/replication-features-max-allowed-packet.html</a></p>
<p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_max_allowed_packet">https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_max_allowed_packet</a></p>

<div id="gitalk-container"></div>
<script src="https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

		<script>
		var gitalkConfig = {"clientID":"e6b75c64218ff017ed19","clientSecret":"bd6f2fb48b56274cc02080a5101296ec76990244","repo":"yuanrui.github.io","owner":"yuanrui","admin":["yuanrui"],"distractionFreeMode":false};
	    gitalkConfig.id = md5(location.pathname);
		var gitalk = new Gitalk(gitalkConfig);
	    gitalk.render("gitalk-container");
	    </script>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Net/">.Net</a>►<a class="article-category-link" href="/categories/Net/Ado-Net/">Ado.Net</a>►<a class="article-category-link" href="/categories/Net/Ado-Net/MySql/">MySql</a>►<a class="article-category-link" href="/categories/Net/Ado-Net/MySql/Sql/">Sql</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Net/">.Net</a><a href="/tags/Ado-Net/">Ado.Net</a><a href="/tags/MySql/">MySql</a><a href="/tags/Sql/">Sql</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/04/01/MySql-create-sequence-like-oracle/" title="MySql实现生成序列值" itemprop="url">MySql实现生成序列值</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Banana" target="_blank" itemprop="author">Banana</a>
		
  <p class="article-time">
    <time datetime="2021-04-01T03:32:00.000Z" itemprop="datePublished"> Published 2021-04-01</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>在Oracle中我们使用sequence来生成整型自增ID，而MySql不支持创建sequence. 虽然MySql中可以对主键设置AUTO_INCREMENT属性来实现表ID自增，但某些场景下需要提前获取ID标识领域对象，以实现业务生存周期的后续处理。在不支持sequence的其他RMDB中，一般使用序列表来实现对数列值的管理，并定义函数或存储过程用于获取更新序列值。</p>
<p>序列表的定义大同小异，一般包含序列名称(业务编号)、起始值(当前值)、增量(步长)等字段。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">drop table if exists t_sequence;</span><br><span class="line">create table t_sequence</span><br><span class="line">(</span><br><span class="line">  seq_name varchar(64) not null primary key comment &#x27;序列名称&#x27;,</span><br><span class="line">  start_value bigint(20) not null default 1 comment &#x27;起始值&#x27;,</span><br><span class="line">  increment int(11) not null default 1 comment &#x27;增量值&#x27;,</span><br><span class="line">  updated_at timestamp not null default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP comment &#x27;更新时间&#x27;</span><br><span class="line">) engine=InnoDB;</span><br><span class="line">alter table t_sequence comment &#x27;序列表&#x27;;</span><br></pre></td></tr></table></figure>
<p>在MySql的分支项目MariaDB，从10.3开始支持创建sequence，可以使用Oracle的PL/SQL语法调用序列。MariaDB为了兼容PostgreSQL语法风格，定义了函数：setval()、nextval()、lastval()，分布用于设置当前序列值、获取下一个序列值、获取当前序列值。在PostgreSQL还定义了currval函数，用于返回序列最近获取的值，功能上和lastval相同；不同的是lastval不需要传递序列参数，获取的是当前会话的的序列的最近值。MariaDB中的lastval函数其实应该对应PostgreSQL中的currval，等同于Oracle中的sequence_name.currval.</p>
<p>为了和MariaDB保持兼容，我们定义名称相同的函数以实现序列功能。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">-- 启用函数创建功能</span><br><span class="line">-- set global log_bin_trust_function_creators=1;</span><br><span class="line"></span><br><span class="line">drop function if exists setval;</span><br><span class="line">create function setval(vseq varchar(64), vstart bigint(20))</span><br><span class="line">returns bigint(20)</span><br><span class="line">begin</span><br><span class="line">  insert into t_sequence(seq_name, start_value, increment, updated_at)</span><br><span class="line">  values (vseq, vstart + 1, 1, CURRENT_TIMESTAMP())</span><br><span class="line">  on duplicate key update start_value = vstart + increment;</span><br><span class="line">  </span><br><span class="line">  return vstart;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">drop function if exists nextval;</span><br><span class="line">create function nextval(vseq varchar(64))</span><br><span class="line">returns bigint(20)</span><br><span class="line">begin</span><br><span class="line">  set @next = null;</span><br><span class="line">  update t_sequence</span><br><span class="line">  set start_value = (@next := start_value) + increment</span><br><span class="line">  where seq_name = vseq;</span><br><span class="line">  </span><br><span class="line">  return ifnull(@next, setval(vseq, 1));</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">drop function if exists lastval;</span><br><span class="line">create function lastval(vseq varchar(64))</span><br><span class="line">returns bigint(20)</span><br><span class="line">begin</span><br><span class="line">  set @cur_val = null;</span><br><span class="line">  select start_value into @cur_val </span><br><span class="line">  from t_sequence</span><br><span class="line">  where seq_name = vseq;</span><br><span class="line">  </span><br><span class="line">  return ifnull(@cur_val, setval(vseq, 1));</span><br><span class="line">end;</span><br></pre></td></tr></table></figure>
<p>虽然每一个函数都有自动创建序列的功能，但是推荐在使用nextval函数前，初始化序列，避免高并发时获取到重复的初始值。使用示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select setval(&#x27;abc&#x27;,1);  -- 返回1</span><br><span class="line">select nextval(&#x27;abc&#x27;);   -- 返回2</span><br><span class="line">select lastval(&#x27;abc&#x27;);   -- 返回3</span><br></pre></td></tr></table></figure>
<p>序列的默认增量为1，业务需要高并发生成ID时，可适当扩充增量值，并通过编程实现批量获取ID值。以下是伪代码示例。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 执行sql:</span><br><span class="line">insert into t_sequence (seq_name, start_value, increment) values (&#x27;system&#x27;, 1, 100); -- 序列名称：system，初始值:1, 增量:100</span><br><span class="line">批量获取序列值:</span><br><span class="line">var startId = nextval(&#x27;system&#x27;); // 返回1</span><br><span class="line">var increment = 100;</span><br><span class="line">var ids = new List&lt;long&gt;();</span><br><span class="line">for(var i = 0; i &lt; increment; i++) &#123;</span><br><span class="line">	ids.add(startId++);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>本文所列举的是MySql的示例，此方案同样可用于其他不支持sequence的RMDB，比如Sql Server 2008、Sqlite…  </p>
<p>sql附件： <a href="/2021/04/01/MySql-create-sequence-like-oracle/mysql_sequence.sql" title="mysql_sequence.sql">mysql_sequence.sql</a></p>
<p>参考信息：</p>
<p><a target="_blank" rel="noopener" href="https://mariadb.com/kb/en/sequence-overview/">https://mariadb.com/kb/en/sequence-overview/</a></p>
<p><a target="_blank" rel="noopener" href="https://mariadb.com/kb/en/create-sequence/">https://mariadb.com/kb/en/create-sequence/</a></p>
<p><a target="_blank" rel="noopener" href="https://mariadb.com/kb/en/sequence-functions/">https://mariadb.com/kb/en/sequence-functions/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.postgresql.org/docs/current/sql-createsequence.html">https://www.postgresql.org/docs/current/sql-createsequence.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.postgresql.org/docs/current/functions-sequence.html">https://www.postgresql.org/docs/current/functions-sequence.html</a></p>

<div id="gitalk-container"></div>
<script src="https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

		<script>
		var gitalkConfig = {"clientID":"e6b75c64218ff017ed19","clientSecret":"bd6f2fb48b56274cc02080a5101296ec76990244","repo":"yuanrui.github.io","owner":"yuanrui","admin":["yuanrui"],"distractionFreeMode":false};
	    gitalkConfig.id = md5(location.pathname);
		var gitalk = new Gitalk(gitalkConfig);
	    gitalk.render("gitalk-container");
	    </script>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Sql/">Sql</a>►<a class="article-category-link" href="/categories/Sql/MySql/">MySql</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/MySql/">MySql</a><a href="/tags/Sql/">Sql</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/02/19/Traffic-industry-terminology/" title="公共安全行业常见术语" itemprop="url">公共安全行业常见术语</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Banana" target="_blank" itemprop="author">Banana</a>
		
  <p class="article-time">
    <time datetime="2021-02-19T10:00:00.000Z" itemprop="datePublished"> Published 2021-02-19</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>经常参与一些政府的招标项目，标书文档里普遍引用了一些国家和行业相关标准等内容。处于好奇的目的，收集这些术语及含义。</p>
<p>机动车测速仪 motor vehicle speed detector<br>用于测定在道路上行驶机动车速度的装置，包括利用雷达、激光测速原理由人工操作仅测定机动车速度的单一功能测速仪和利用雷达、激光、线圈感应、视频分析等测速原理测定机动车速度，同时采集、处理图像的复合功能测速仪。</p>
<p>雷达测速 radar speed detect<br>通过测量雷达波的发射频率和反射波频率之间的变化量，计算得出机动车的行驶速度。</p>
<p>激光测速 laser speed detect<br>通过测量一定时间间隔内被测机动车的移动距离，计算得出机动车的行驶速度。</p>
<p>线圈感应测速 loop induction speed detect<br>通过测量机动车经过一组按一定距离埋设于地面的感应线圈的时间差，计算得出机动车的行驶速度。</p>
<p>视频分析测速 video analysis speed detect<br>通过测量机动车经过视频中一定距离的时间差，或对视频中目标机动车的运动轨迹进行实时跟踪并分析车辆在一定时间间隔内的移动距离，计算得出机动车的行驶速度。</p>
<p>静态测速 speed detect in stationary mode<br>测速仪在固定静止位置上对机动车进行速度测定。</p>
<p>动态测速 speed detect in moving mode<br>测速仪安装于测量车上，在行驶状态下对被测机动车进行速度测定。</p>
<p>测定角度 speed detect angle<br>测速仪的测速单元与被测机动车行驶方向之间的夹角。</p>
<p>测定区域 detect area<br>测速仪能够有效测定机动车速度并采集对应机动车图像的区域。</p>
<p>有效速度测定区域 effective speed detect area<br>测速仪能够准确测定机动车速度的区域。</p>
<p>有效图像采集区域 effective area of taking picture<br>测速仪能够清晰采集机动车图像的区域。</p>
<p>超速车辆捕获率 overspeed vehicle capture ratio<br>有效记录的超速车辆数与有效通行的超速车辆数的百分比。<br>注：1、有效记录的超速车辆数是指记录中包含有效车辆信息（号牌号码、号牌颜色、车辆类型等）和对应行驶速度的车辆数。<br>       2、有效通行的超速车辆数是指实际通行车辆中超过速度限定值并且机动车号牌完好（悬挂规范、无遮挡、无污损）的车辆数。</p>
<p>速度图像对应性 corresponding of speed and picture<br>测速仪采集的图像中反映的机动车与被测定速度的机动车相对应的特性。</p>
<p>响应时间 responding time<br>测速仪从机动车进入测定区域开始到形成超速记录为止所需要的时间。</p>
<p>图像分辨率 picture distinguish ratio<br>图像文件在水平和垂直方向上能够分辨的像素数，以“水平像素数×垂直像素数”表示。</p>
<p>兴趣点（POI）分类表</p>
<table>
<thead>
<tr>
<th>大类</th>
<th>中类</th>
<th>小类</th>
<th>Big Category</th>
<th>Mid Category</th>
<th>Sub Category</th>
</tr>
</thead>
<tbody>
<tr>
<td>汽车服务</td>
<td>汽车服务相关</td>
<td>汽车服务相关</td>
<td>Auto Service</td>
<td>Automobile Service Related</td>
<td>Automobile Service Related</td>
</tr>
<tr>
<td>汽车服务</td>
<td>加油站</td>
<td>加油站</td>
<td>Auto Service</td>
<td>Filling Station</td>
<td>Filling Station</td>
</tr>
<tr>
<td>汽车服务</td>
<td>加油站</td>
<td>中国石化</td>
<td>Auto Service</td>
<td>Filling Station</td>
<td>Sinopec</td>
</tr>
<tr>
<td>汽车服务</td>
<td>加油站</td>
<td>中国石油</td>
<td>Auto Service</td>
<td>Filling Station</td>
<td>PetroChina</td>
</tr>
<tr>
<td>汽车服务</td>
<td>加油站</td>
<td>壳牌</td>
<td>Auto Service</td>
<td>Filling Station</td>
<td>Shell</td>
</tr>
<tr>
<td>汽车服务</td>
<td>加油站</td>
<td>美孚</td>
<td>Auto Service</td>
<td>Filling Station</td>
<td>Mobil</td>
</tr>
<tr>
<td>汽车服务</td>
<td>加油站</td>
<td>加德士</td>
<td>Auto Service</td>
<td>Filling Station</td>
<td>Caltex</td>
</tr>
<tr>
<td>汽车服务</td>
<td>加油站</td>
<td>东方</td>
<td>Auto Service</td>
<td>Filling Station</td>
<td>FEOSO</td>
</tr>
<tr>
<td>汽车服务</td>
<td>加油站</td>
<td>中石油碧辟</td>
<td>Auto Service</td>
<td>Filling Station</td>
<td>BP PetroChina</td>
</tr>
<tr>
<td>汽车服务</td>
<td>加油站</td>
<td>中石化碧辟</td>
<td>Auto Service</td>
<td>Filling Station</td>
<td>BP Sinopec</td>
</tr>
<tr>
<td>汽车服务</td>
<td>加油站</td>
<td>道达尔</td>
<td>Auto Service</td>
<td>Filling Station</td>
<td>TOTAL</td>
</tr>
<tr>
<td>汽车服务</td>
<td>加油站</td>
<td>埃索</td>
<td>Auto Service</td>
<td>Filling Station</td>
<td>ESSO</td>
</tr>
<tr>
<td>汽车服务</td>
<td>加油站</td>
<td>中化道达尔</td>
<td>Auto Service</td>
<td>Filling Station</td>
<td>TOTAL-SINOCHEM</td>
</tr>
<tr>
<td>汽车服务</td>
<td>其它能源站</td>
<td>其它能源站</td>
<td>Auto Service</td>
<td>Other Energy Station</td>
<td>Other Energy Station</td>
</tr>
<tr>
<td>汽车服务</td>
<td>加气站</td>
<td>加气站</td>
<td>Auto Service</td>
<td>Filling Station</td>
<td>Filling Station</td>
</tr>
<tr>
<td>汽车服务</td>
<td>汽车养护/装饰</td>
<td>汽车养护</td>
<td>Auto Service</td>
<td>Automobile Maintenance/Decoration</td>
<td>Automobile Maintenance</td>
</tr>
<tr>
<td>汽车服务</td>
<td>汽车养护/装饰</td>
<td>加水站</td>
<td>Auto Service</td>
<td>Automobile Maintenance/Decoration</td>
<td>Add Water Station</td>
</tr>
<tr>
<td>汽车服务</td>
<td>洗车场</td>
<td>洗车场</td>
<td>Auto Service</td>
<td>Car Wash</td>
<td>Car Wash</td>
</tr>
<tr>
<td>汽车服务</td>
<td>汽车俱乐部</td>
<td>汽车俱乐部</td>
<td>Auto Service</td>
<td>Automobile Club</td>
<td>Automobile Club</td>
</tr>
<tr>
<td>汽车服务</td>
<td>汽车救援</td>
<td>汽车救援</td>
<td>Auto Service</td>
<td>Automobile Rescue</td>
<td>Automobile Rescue</td>
</tr>
<tr>
<td>汽车服务</td>
<td>汽车配件销售</td>
<td>汽车配件销售</td>
<td>Auto Service</td>
<td>Automobile Parts Sales</td>
<td>Automobile Parts Sales</td>
</tr>
<tr>
<td>汽车服务</td>
<td>汽车租赁</td>
<td>汽车租赁</td>
<td>Auto Service</td>
<td>Automobile Rental</td>
<td>Automobile Rental</td>
</tr>
<tr>
<td>汽车服务</td>
<td>汽车租赁</td>
<td>汽车租赁还车</td>
<td>Auto Service</td>
<td>Automobile Rental</td>
<td>Rent-a-Car Return</td>
</tr>
<tr>
<td>汽车服务</td>
<td>二手车交易</td>
<td>二手车交易</td>
<td>Auto Service</td>
<td>Used Automobile Dealer</td>
<td>Used Automobile Dealer</td>
</tr>
<tr>
<td>汽车服务</td>
<td>充电站</td>
<td>充电站</td>
<td>Auto Service</td>
<td>Charging Station</td>
<td>Charging Station</td>
</tr>
<tr>
<td>汽车销售</td>
<td>汽车销售</td>
<td>汽车销售</td>
<td>Auto Dealers</td>
<td>Automobile Sales</td>
<td>Automobile Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>大众特约销售</td>
<td>大众销售</td>
<td>Auto Dealers</td>
<td>Volkswagen Franchised Sales</td>
<td>Volkswagen Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>大众特约销售</td>
<td>上海大众销售</td>
<td>Auto Dealers</td>
<td>Volkswagen Franchised Sales</td>
<td>Shanghai Volkswagen Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>大众特约销售</td>
<td>一汽-大众销售</td>
<td>Auto Dealers</td>
<td>Volkswagen Franchised Sales</td>
<td>FAW-Volkswagen Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>大众特约销售</td>
<td>斯柯达销售</td>
<td>Auto Dealers</td>
<td>Volkswagen Franchised Sales</td>
<td>Skoda Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>大众特约销售</td>
<td>进口大众销售</td>
<td>Auto Dealers</td>
<td>Volkswagen Franchised Sales</td>
<td>Import Volkswagen Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>大众特约销售</td>
<td>宾利销售</td>
<td>Auto Dealers</td>
<td>Volkswagen Franchised Sales</td>
<td>Bentley Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>大众特约销售</td>
<td>兰博基尼销售</td>
<td>Auto Dealers</td>
<td>Volkswagen Franchised Sales</td>
<td>Lamborghini Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>本田特约销售</td>
<td>本田销售</td>
<td>Auto Dealers</td>
<td>Honda Franchised Sales</td>
<td>Honda Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>本田特约销售</td>
<td>广汽本田销售</td>
<td>Auto Dealers</td>
<td>Honda Franchised Sales</td>
<td>GAC Honda Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>本田特约销售</td>
<td>东风本田销售</td>
<td>Auto Dealers</td>
<td>Honda Franchised Sales</td>
<td>Dongfeng Honda Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>本田特约销售</td>
<td>本田讴歌销售</td>
<td>Auto Dealers</td>
<td>Honda Franchised Sales</td>
<td>Acura Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>奥迪特约销售</td>
<td>奥迪销售</td>
<td>Auto Dealers</td>
<td>Audi Franchised Sales</td>
<td>Audi Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>奥迪特约销售</td>
<td>一汽-大众奥迪销售</td>
<td>Auto Dealers</td>
<td>Audi Franchised Sales</td>
<td>FAW-Audi Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>通用特约销售</td>
<td>通用销售</td>
<td>Auto Dealers</td>
<td>General Motors Franchised Sales</td>
<td>General Motors Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>通用特约销售</td>
<td>凯迪拉克销售</td>
<td>Auto Dealers</td>
<td>General Motors Franchised Sales</td>
<td>Cadillac Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>通用特约销售</td>
<td>别克销售</td>
<td>Auto Dealers</td>
<td>General Motors Franchised Sales</td>
<td>Buick Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>通用特约销售</td>
<td>雪佛兰销售</td>
<td>Auto Dealers</td>
<td>General Motors Franchised Sales</td>
<td>Chevrolet Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>通用特约销售</td>
<td>欧宝销售</td>
<td>Auto Dealers</td>
<td>General Motors Franchised Sales</td>
<td>Opel Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>通用特约销售</td>
<td>萨博销售</td>
<td>Auto Dealers</td>
<td>General Motors Franchised Sales</td>
<td>Saab Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>通用特约销售</td>
<td>沃克斯豪尔销售</td>
<td>Auto Dealers</td>
<td>General Motors Franchised Sales</td>
<td>Vauxhall Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>通用特约销售</td>
<td>土星销售</td>
<td>Auto Dealers</td>
<td>General Motors Franchised Sales</td>
<td>Saturn Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>通用特约销售</td>
<td>大宇销售</td>
<td>Auto Dealers</td>
<td>General Motors Franchised Sales</td>
<td>Daewoo Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>宝马特约销售</td>
<td>宝马销售</td>
<td>Auto Dealers</td>
<td>BMW Franchised Sales</td>
<td>BMW Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>宝马特约销售</td>
<td>宝马MINI销售</td>
<td>Auto Dealers</td>
<td>BMW Franchised Sales</td>
<td>BMW MINI Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>宝马特约销售</td>
<td>劳斯莱斯销售</td>
<td>Auto Dealers</td>
<td>BMW Franchised Sales</td>
<td>Rolls-Royce Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>日产特约销售</td>
<td>日产销售</td>
<td>Auto Dealers</td>
<td>Nissan Franchised Sales</td>
<td>Nissan Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>日产特约销售</td>
<td>东风日产销售</td>
<td>Auto Dealers</td>
<td>Nissan Franchised Sales</td>
<td>Dongfeng Nissan Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>日产特约销售</td>
<td>郑州日产销售</td>
<td>Auto Dealers</td>
<td>Nissan Franchised Sales</td>
<td>Zhengzhou Nissan Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>日产特约销售</td>
<td>英菲尼迪销售</td>
<td>Auto Dealers</td>
<td>Nissan Franchised Sales</td>
<td>Infiniti Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>雷诺特约销售</td>
<td>雷诺销售</td>
<td>Auto Dealers</td>
<td>Renault Franchised Sales</td>
<td>Renault Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>梅赛德斯-奔驰特约销售</td>
<td>梅赛德斯-奔驰销售</td>
<td>Auto Dealers</td>
<td>Mercedes-Benz Franchised Sales</td>
<td>Mercedes-Benz Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>梅赛德斯-奔驰特约销售</td>
<td>迈巴赫销售</td>
<td>Auto Dealers</td>
<td>Mercedes-Benz Franchised Sales</td>
<td>Maybach Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>梅赛德斯-奔驰特约销售</td>
<td>精灵销售</td>
<td>Auto Dealers</td>
<td>Mercedes-Benz Franchised Sales</td>
<td>Smart Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>丰田特约销售</td>
<td>丰田销售</td>
<td>Auto Dealers</td>
<td>Toyota Franchised Sales</td>
<td>Toyota Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>丰田特约销售</td>
<td>一汽丰田销售</td>
<td>Auto Dealers</td>
<td>Toyota Franchised Sales</td>
<td>FAW-Toyota Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>丰田特约销售</td>
<td>广汽丰田销售</td>
<td>Auto Dealers</td>
<td>Toyota Franchised Sales</td>
<td>GAC Toyota Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>丰田特约销售</td>
<td>雷克萨斯销售</td>
<td>Auto Dealers</td>
<td>Toyota Franchised Sales</td>
<td>Lexus Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>丰田特约销售</td>
<td>大发销售</td>
<td>Auto Dealers</td>
<td>Toyota Franchised Sales</td>
<td>Daihatsu Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>斯巴鲁特约销售</td>
<td>斯巴鲁销售</td>
<td>Auto Dealers</td>
<td>Subaru Franchised Sales</td>
<td>Subaru Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>标致雪铁龙特约销售</td>
<td>雪铁龙销售</td>
<td>Auto Dealers</td>
<td>Peugeot Citroen Franchised Sales</td>
<td>Citroen Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>标致雪铁龙特约销售</td>
<td>东风雪铁龙销售</td>
<td>Auto Dealers</td>
<td>Peugeot Citroen Franchised Sales</td>
<td>Dongfeng Citroen Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>标致雪铁龙特约销售</td>
<td>东风标致销售</td>
<td>Auto Dealers</td>
<td>Peugeot Citroen Franchised Sales</td>
<td>Dongfeng Peugeot Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>标致雪铁龙特约销售</td>
<td>DS销售</td>
<td>Auto Dealers</td>
<td>Peugeot Citroen</td>
<td>DS Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>三菱特约销售</td>
<td>三菱销售</td>
<td>Auto Dealers</td>
<td>Mitsubishi Franchised Sales</td>
<td>Mitsubishi Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>三菱特约销售</td>
<td>广汽三菱销售</td>
<td>Auto Dealers</td>
<td>Mitsubishi Franchised Sales</td>
<td>GAC Mitsubishi Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>菲亚特约销售</td>
<td>菲亚特销售</td>
<td>Auto Dealers</td>
<td>Fiat Franchised Sales</td>
<td>Fiat Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>菲亚特约销售</td>
<td>阿尔法-罗密欧销售</td>
<td>Auto Dealers</td>
<td>Fiat Franchised Sales</td>
<td>Alfa Romeo Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>法拉利特约销售</td>
<td>法拉利销售</td>
<td>Auto Dealers</td>
<td>Ferrari Franchised Sales</td>
<td>Ferrari Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>法拉利特约销售</td>
<td>玛莎拉蒂销售</td>
<td>Auto Dealers</td>
<td>Ferrari Franchised Sales</td>
<td>Maserati Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>现代特约销售</td>
<td>现代销售</td>
<td>Auto Dealers</td>
<td>Hyundai Franchised Sales</td>
<td>Hyundai Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>现代特约销售</td>
<td>进口现代销售</td>
<td>Auto Dealers</td>
<td>Hyundai Franchised Sales</td>
<td>Import Hyundai Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>现代特约销售</td>
<td>北京现代销售</td>
<td>Auto Dealers</td>
<td>Hyundai Franchised Sales</td>
<td>Beijing Hyundai Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>起亚特约销售</td>
<td>起亚销售</td>
<td>Auto Dealers</td>
<td>KIA Franchised Sales</td>
<td>KIA Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>起亚特约销售</td>
<td>进口起亚销售</td>
<td>Auto Dealers</td>
<td>KIA Franchised Sales</td>
<td>Import KIA Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>起亚特约销售</td>
<td>东风悦达起亚销售</td>
<td>Auto Dealers</td>
<td>KIA Franchised Sales</td>
<td>Dongfeng Yueda KIA Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>福特特约销售</td>
<td>福特销售</td>
<td>Auto Dealers</td>
<td>Ford Franchised Sales</td>
<td>Ford Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>福特特约销售</td>
<td>马自达销售</td>
<td>Auto Dealers</td>
<td>Ford Franchised Sales</td>
<td>Mazda Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>福特特约销售</td>
<td>林肯销售</td>
<td>Auto Dealers</td>
<td>Ford Franchised Sales</td>
<td>Lincoln Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>福特特约销售</td>
<td>水星销售</td>
<td>Auto Dealers</td>
<td>Ford Franchised Sales</td>
<td>Mercury Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>捷豹特约销售</td>
<td>捷豹销售</td>
<td>Auto Dealers</td>
<td>JAGUAR Franchised Sales</td>
<td>JAGUAR Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>路虎特约销售</td>
<td>路虎销售</td>
<td>Auto Dealers</td>
<td>Land Rover Franchised Sales</td>
<td>Land Rover Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>保时捷特约销售</td>
<td>保时捷销售</td>
<td>Auto Dealers</td>
<td>Porsche Franchised Sales</td>
<td>Porsche Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>东风特约销售</td>
<td>东风销售</td>
<td>Auto Dealers</td>
<td>DFM Franchised Sales</td>
<td>DFM Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>吉利特约销售</td>
<td>吉利销售</td>
<td>Auto Dealers</td>
<td>Geely Franchised Sales</td>
<td>Geely Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>吉利特约销售</td>
<td>沃尔沃汽车销售</td>
<td>Auto Dealers</td>
<td>Geely Franchised Sales</td>
<td>Volvo Cars Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>奇瑞特约销售</td>
<td>奇瑞销售</td>
<td>Auto Dealers</td>
<td>Chery Franchised Sales</td>
<td>Chery Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>克莱斯勒特约销售</td>
<td>克莱斯勒销售</td>
<td>Auto Dealers</td>
<td>Chrysler Franchised Sales</td>
<td>Chrysler Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>克莱斯勒特约销售</td>
<td>吉普销售</td>
<td>Auto Dealers</td>
<td>Chrysler Franchised Sales</td>
<td>Jeep Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>克莱斯勒特约销售</td>
<td>道奇销售</td>
<td>Auto Dealers</td>
<td>Chrysler Franchised Sales</td>
<td>Dodge Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>荣威销售</td>
<td>荣威销售</td>
<td>Auto Dealers</td>
<td>ROEWE Sales</td>
<td>ROEWE Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>名爵销售</td>
<td>名爵销售</td>
<td>Auto Dealers</td>
<td>MG Sales</td>
<td>MG Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>江淮销售</td>
<td>江淮销售</td>
<td>Auto Dealers</td>
<td>JAC Sales</td>
<td>JAC Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>红旗销售</td>
<td>红旗销售</td>
<td>Auto Dealers</td>
<td>Hongqi Sales</td>
<td>Hongqi Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>长安汽车销售</td>
<td>长安汽车销售</td>
<td>Auto Dealers</td>
<td>Chang’an Sales</td>
<td>Chang’an Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>海马汽车销售</td>
<td>海马汽车销售</td>
<td>Auto Dealers</td>
<td>Haima Sales</td>
<td>Haima Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>北京汽车销售</td>
<td>北京汽车销售</td>
<td>Auto Dealers</td>
<td>BAIC MOTOR Sales</td>
<td>BAIC MOTOR Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>长城汽车销售</td>
<td>长城汽车销售</td>
<td>Auto Dealers</td>
<td>Great Wall Sales</td>
<td>Great Wall Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>长城汽车销售</td>
<td>魏派汽车销售</td>
<td>Auto Dealers</td>
<td>Great Wall Sales</td>
<td>WEY Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>纳智捷销售</td>
<td>纳智捷销售</td>
<td>Auto Dealers</td>
<td>Luxgen Sales</td>
<td>Luxgen Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>广汽传祺销售</td>
<td>广汽传祺销售</td>
<td>Auto Dealers</td>
<td>GAC Trumpchi Sales</td>
<td>GAC Trumpchi Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>货车销售</td>
<td>货车销售</td>
<td>Auto Dealers</td>
<td>Truck Sales</td>
<td>Truck Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>东风货车销售</td>
<td>东风货车销售</td>
<td>Auto Dealers</td>
<td>Dongfeng Truck Sales</td>
<td>Dongfeng Truck Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>中国重汽销售</td>
<td>中国重汽销售</td>
<td>Auto Dealers</td>
<td>SINOTRUK Sales</td>
<td>SINOTRUK Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>一汽解放销售</td>
<td>一汽解放销售</td>
<td>Auto Dealers</td>
<td>FAW Jiefang Sales</td>
<td>FAW Jiefang Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>福田卡车销售</td>
<td>福田卡车销售</td>
<td>Auto Dealers</td>
<td>Foton Truck Sales</td>
<td>Foton Truck Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>陕西重汽销售</td>
<td>陕西重汽销售</td>
<td>Auto Dealers</td>
<td>Shaanxi Heavy-duty Truck Sales</td>
<td>Shaanxi Heavy-duty Truck Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>北奔重汽销售</td>
<td>北奔重汽销售</td>
<td>Auto Dealers</td>
<td>Beiben Trucks Sales</td>
<td>Beiben Trucks Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>江淮货车销售</td>
<td>江淮货车销售</td>
<td>Auto Dealers</td>
<td>JAC Truck Sales</td>
<td>JAC Truck Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>华菱星马销售</td>
<td>华菱星马销售</td>
<td>Auto Dealers</td>
<td>CAMC Sales</td>
<td>CAMC Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>成都大运汽车销售</td>
<td>成都大运汽车销售</td>
<td>Auto Dealers</td>
<td>Chengdu Dayun Automotive Sales</td>
<td>Chengdu Dayun Automotive Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>梅赛德斯-奔驰卡车销售</td>
<td>梅赛德斯-奔驰卡车销售</td>
<td>Auto Dealers</td>
<td>Mercedes-Benz Truck Sales</td>
<td>Mercedes-Benz Truck Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>德国曼恩销售</td>
<td>德国曼恩销售</td>
<td>Auto Dealers</td>
<td>MAN Sales</td>
<td>MAN Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>斯堪尼亚销售</td>
<td>斯堪尼亚销售</td>
<td>Auto Dealers</td>
<td>SCANIA Sales</td>
<td>SCANIA Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>沃尔沃卡车销售</td>
<td>沃尔沃卡车销售</td>
<td>Auto Dealers</td>
<td>Volvo Truck Sales</td>
<td>Volvo Truck Sales</td>
</tr>
<tr>
<td>汽车销售</td>
<td>观致销售</td>
<td>观致销售</td>
<td>Auto Dealers</td>
<td>Qoros Sales</td>
<td>Qoros Sales</td>
</tr>
<tr>
<td>汽车维修</td>
<td>汽车维修</td>
<td>汽车维修</td>
<td>Auto Repair</td>
<td>Automobile Repair</td>
<td>Automobile Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>汽车综合维修</td>
<td>汽车综合维修</td>
<td>Auto Repair</td>
<td>Automobile Comprehensive Repair</td>
<td>Automobile Comprehensive Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>大众特约维修</td>
<td>大众维修</td>
<td>Auto Repair</td>
<td>Volkswagen Franchised Repair</td>
<td>Volkswagen Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>大众特约维修</td>
<td>上海大众维修</td>
<td>Auto Repair</td>
<td>Volkswagen Franchised Repair</td>
<td>Shanghai Volkswagen Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>大众特约维修</td>
<td>一汽-大众维修</td>
<td>Auto Repair</td>
<td>Volkswagen Franchised Repair</td>
<td>FAW-Volkswagen Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>大众特约维修</td>
<td>斯柯达维修</td>
<td>Auto Repair</td>
<td>Volkswagen Franchised Repair</td>
<td>Skoda Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>大众特约维修</td>
<td>进口大众维修</td>
<td>Auto Repair</td>
<td>Volkswagen Franchised Repair</td>
<td>Import Volkswagen Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>大众特约维修</td>
<td>宾利维修</td>
<td>Auto Repair</td>
<td>Volkswagen Franchised Repair</td>
<td>Bentley Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>大众特约维修</td>
<td>兰博基尼维修</td>
<td>Auto Repair</td>
<td>Volkswagen Franchised Repair</td>
<td>Lamborghini Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>本田特约维修</td>
<td>本田维修</td>
<td>Auto Repair</td>
<td>Honda Franchised Repair</td>
<td>Honda Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>本田特约维修</td>
<td>广汽本田维修</td>
<td>Auto Repair</td>
<td>Honda Franchised Repair</td>
<td>GAC Honda Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>本田特约维修</td>
<td>东风本田维修</td>
<td>Auto Repair</td>
<td>Honda Franchised Repair</td>
<td>Dongfeng Honda Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>本田特约维修</td>
<td>本田讴歌维修</td>
<td>Auto Repair</td>
<td>Honda Franchised Repair</td>
<td>Acura Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>奥迪特约维修</td>
<td>奥迪维修</td>
<td>Auto Repair</td>
<td>Audi Franchised Repair</td>
<td>Audi Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>奥迪特约维修</td>
<td>一汽-大众奥迪维修</td>
<td>Auto Repair</td>
<td>Audi Franchised Repair</td>
<td>FAW-Audi Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>通用特约维修</td>
<td>通用维修</td>
<td>Auto Repair</td>
<td>General Motors Franchised Repair</td>
<td>General Motors Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>通用特约维修</td>
<td>凯迪拉克维修</td>
<td>Auto Repair</td>
<td>General Motors Franchised Repair</td>
<td>Cadillac Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>通用特约维修</td>
<td>别克维修</td>
<td>Auto Repair</td>
<td>General Motors Franchised Repair</td>
<td>Buick Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>通用特约维修</td>
<td>雪佛兰维修</td>
<td>Auto Repair</td>
<td>General Motors Franchised Repair</td>
<td>Chevrolet Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>通用特约维修</td>
<td>欧宝维修</td>
<td>Auto Repair</td>
<td>General Motors Franchised Repair</td>
<td>Opel Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>通用特约维修</td>
<td>萨博维修</td>
<td>Auto Repair</td>
<td>General Motors Franchised Repair</td>
<td>Saab Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>通用特约维修</td>
<td>沃克斯豪尔维修</td>
<td>Auto Repair</td>
<td>General Motors Franchised Repair</td>
<td>Vauxhall Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>通用特约维修</td>
<td>土星维修</td>
<td>Auto Repair</td>
<td>General Motors Franchised Repair</td>
<td>Saturn Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>通用特约维修</td>
<td>大宇维修</td>
<td>Auto Repair</td>
<td>General Motors Franchised Repair</td>
<td>Daewoo Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>宝马特约维修</td>
<td>宝马维修</td>
<td>Auto Repair</td>
<td>BMW Franchised Repair</td>
<td>BMW Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>宝马特约维修</td>
<td>宝马MINI维修</td>
<td>Auto Repair</td>
<td>BMW Franchised Repair</td>
<td>BMW MINI Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>宝马特约维修</td>
<td>劳斯莱斯维修</td>
<td>Auto Repair</td>
<td>BMW Franchised Repair</td>
<td>Rolls-Royce Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>日产特约维修</td>
<td>日产维修</td>
<td>Auto Repair</td>
<td>Nissan Franchised Repair</td>
<td>Nissan Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>日产特约维修</td>
<td>英菲尼迪维修</td>
<td>Auto Repair</td>
<td>Nissan Franchised Repair</td>
<td>Infiniti Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>日产特约维修</td>
<td>东风日产维修</td>
<td>Auto Repair</td>
<td>Nissan Franchised Repair</td>
<td>Dongfeng Nissan Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>日产特约维修</td>
<td>郑州日产维修</td>
<td>Auto Repair</td>
<td>Nissan Franchised Repair</td>
<td>Zhengzhou Nissan Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>雷诺特约维修</td>
<td>雷诺维修</td>
<td>Auto Repair</td>
<td>Renault Franchised Repair</td>
<td>Renault Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>梅赛德斯-奔驰特约维修</td>
<td>梅赛德斯-奔驰维修</td>
<td>Auto Repair</td>
<td>Mercedes-Benz Franchised Repair</td>
<td>Mercedes-Benz Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>梅赛德斯-奔驰特约维修</td>
<td>迈巴赫维修</td>
<td>Auto Repair</td>
<td>Mercedes-Benz Franchised Repair</td>
<td>Maybach Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>梅赛德斯-奔驰特约维修</td>
<td>精灵维修</td>
<td>Auto Repair</td>
<td>Mercedes-Benz Franchised Repair</td>
<td>Smart Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>丰田特约维修</td>
<td>丰田维修</td>
<td>Auto Repair</td>
<td>Toyota Franchised Repair</td>
<td>Toyota Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>丰田特约维修</td>
<td>一汽丰田维修</td>
<td>Auto Repair</td>
<td>Toyota Franchised Repair</td>
<td>FAW-Toyota Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>丰田特约维修</td>
<td>广汽丰田维修</td>
<td>Auto Repair</td>
<td>Toyota Franchised Repair</td>
<td>GAC Toyota Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>丰田特约维修</td>
<td>雷克萨斯维修</td>
<td>Auto Repair</td>
<td>Toyota Franchised Repair</td>
<td>Lexus Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>丰田特约维修</td>
<td>大发维修</td>
<td>Auto Repair</td>
<td>Toyota Franchised Repair</td>
<td>Daihatsu Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>斯巴鲁特约维修</td>
<td>斯巴鲁维修</td>
<td>Auto Repair</td>
<td>Subaru Franchised Repair</td>
<td>Subaru Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>标致雪铁龙特约维修</td>
<td>雪铁龙维修</td>
<td>Auto Repair</td>
<td>Peugeot Citroen Franchised Repair</td>
<td>Citroen Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>标致雪铁龙特约维修</td>
<td>东风标致维修</td>
<td>Auto Repair</td>
<td>Peugeot Citroen Franchised Repair</td>
<td>Dongfeng Peugeot Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>标致雪铁龙特约维修</td>
<td>东风雪铁龙维修</td>
<td>Auto Repair</td>
<td>Peugeot Citroen Franchised Repair</td>
<td>Dongfeng Citroen Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>标致雪铁龙特约维修</td>
<td>DS维修</td>
<td>Auto Repair</td>
<td>Peugeot Citroen</td>
<td>DS Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>三菱特约维修</td>
<td>三菱维修</td>
<td>Auto Repair</td>
<td>Mitsubishi Franchised Repair</td>
<td>Mitsubishi Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>三菱特约维修</td>
<td>广汽三菱维修</td>
<td>Auto Repair</td>
<td>Mitsubishi Franchised Repair</td>
<td>GAC Mitsubishi Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>菲亚特特约维修</td>
<td>菲亚特维修</td>
<td>Auto Repair</td>
<td>Fiat Franchised Repair</td>
<td>Fiat Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>菲亚特特约维修</td>
<td>阿尔法-罗密欧维修</td>
<td>Auto Repair</td>
<td>Fiat Franchised Repair</td>
<td>Alfa Romeo Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>法拉利特约维修</td>
<td>法拉利维修</td>
<td>Auto Repair</td>
<td>Ferrari Franchised Repair</td>
<td>Ferrari Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>法拉利特约维修</td>
<td>玛莎拉蒂维修</td>
<td>Auto Repair</td>
<td>Ferrari Franchised Repair</td>
<td>Maserati Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>现代特约维修</td>
<td>现代维修</td>
<td>Auto Repair</td>
<td>Hyundai Franchised Repair</td>
<td>Hyundai Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>现代特约维修</td>
<td>进口现代维修</td>
<td>Auto Repair</td>
<td>Hyundai Franchised Repair</td>
<td>Import Hyundai Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>现代特约维修</td>
<td>北京现代维修</td>
<td>Auto Repair</td>
<td>Hyundai Franchised Repair</td>
<td>Beijing Hyundai Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>起亚特约维修</td>
<td>起亚维修</td>
<td>Auto Repair</td>
<td>KIA Franchised Repair</td>
<td>KIA Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>起亚特约维修</td>
<td>进口起亚维修</td>
<td>Auto Repair</td>
<td>KIA Franchised Repair</td>
<td>Import KIA Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>起亚特约维修</td>
<td>东风悦达起亚维修</td>
<td>Auto Repair</td>
<td>KIA Franchised Repair</td>
<td>Dongfeng Yueda KIA Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>福特特约维修</td>
<td>福特维修</td>
<td>Auto Repair</td>
<td>Ford Franchised Repair</td>
<td>Ford Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>福特特约维修</td>
<td>马自达维修</td>
<td>Auto Repair</td>
<td>Ford Franchised Repair</td>
<td>Mazda Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>福特特约维修</td>
<td>林肯维修</td>
<td>Auto Repair</td>
<td>Ford Franchised Repair</td>
<td>Lincoln Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>福特特约维修</td>
<td>水星维修</td>
<td>Auto Repair</td>
<td>Ford Franchised Repair</td>
<td>Mercury Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>捷豹特约维修</td>
<td>捷豹维修</td>
<td>Auto Repair</td>
<td>JAGUAR Franchised Repair</td>
<td>JAGUAR Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>路虎特约维修</td>
<td>路虎维修</td>
<td>Auto Repair</td>
<td>Land Rover Franchised Repair</td>
<td>Land Rover Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>保时捷特约维修</td>
<td>保时捷维修</td>
<td>Auto Repair</td>
<td>Porsche Franchised Repair</td>
<td>Porsche Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>东风特约维修</td>
<td>东风维修</td>
<td>Auto Repair</td>
<td>DFM Franchised Repair</td>
<td>DFM Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>吉利特约维修</td>
<td>吉利维修</td>
<td>Auto Repair</td>
<td>Geely Franchised Repair</td>
<td>Geely Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>吉利特约维修</td>
<td>沃尔沃汽车维修</td>
<td>Auto Repair</td>
<td>Geely Franchised Repair</td>
<td>Volvo Cars Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>奇瑞特约维修</td>
<td>奇瑞维修</td>
<td>Auto Repair</td>
<td>Chery Franchised Repair</td>
<td>Chery Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>克莱斯勒特约维修</td>
<td>克莱斯勒维修</td>
<td>Auto Repair</td>
<td>Chrysler Franchised Repair</td>
<td>Chrysler Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>克莱斯勒特约维修</td>
<td>吉普维修</td>
<td>Auto Repair</td>
<td>Chrysler Franchised Repair</td>
<td>Jeep Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>克莱斯勒特约维修</td>
<td>道奇维修</td>
<td>Auto Repair</td>
<td>Chrysler Franchised Repair</td>
<td>Dodge Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>荣威维修</td>
<td>荣威维修</td>
<td>Auto Repair</td>
<td>ROEWE Repair</td>
<td>ROEWE Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>名爵维修</td>
<td>名爵维修</td>
<td>Auto Repair</td>
<td>MG Repair</td>
<td>MG Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>江淮维修</td>
<td>江淮维修</td>
<td>Auto Repair</td>
<td>JAC Repair</td>
<td>JAC Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>红旗维修</td>
<td>红旗维修</td>
<td>Auto Repair</td>
<td>Hongqi Repair</td>
<td>Hongqi Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>长安汽车维修</td>
<td>长安汽车维修</td>
<td>Auto Repair</td>
<td>Chang’an Repair</td>
<td>Chang’an Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>海马汽车维修</td>
<td>海马汽车维修</td>
<td>Auto Repair</td>
<td>Haima Repair</td>
<td>Haima Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>北京汽车维修</td>
<td>北京汽车维修</td>
<td>Auto Repair</td>
<td>BAIC MOTOR Repair</td>
<td>BAIC MOTOR Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>长城汽车维修</td>
<td>长城汽车维修</td>
<td>Auto Repair</td>
<td>Great Wall Repair</td>
<td>Great Wall Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>长城汽车维修</td>
<td>魏派汽车维修</td>
<td>Auto Repair</td>
<td>Great Wall Repair</td>
<td>WEY Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>纳智捷维修</td>
<td>纳智捷维修</td>
<td>Auto Repair</td>
<td>Luxgen Repair</td>
<td>Luxgen Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>广汽传祺维修</td>
<td>广汽传祺维修</td>
<td>Auto Repair</td>
<td>GAC Trumpchi Repair</td>
<td>GAC Trumpchi Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>货车维修</td>
<td>货车维修</td>
<td>Auto Repair</td>
<td>Truck Repair</td>
<td>Truck Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>东风货车维修</td>
<td>东风货车维修</td>
<td>Auto Repair</td>
<td>Dongfeng Truck Repair</td>
<td>Dongfeng Truck Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>中国重汽维修</td>
<td>中国重汽维修</td>
<td>Auto Repair</td>
<td>SINOTRUK Repair</td>
<td>SINOTRUK Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>一汽解放维修</td>
<td>一汽解放维修</td>
<td>Auto Repair</td>
<td>FAW Jiefang Repair</td>
<td>FAW Jiefang Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>福田卡车维修</td>
<td>福田卡车维修</td>
<td>Auto Repair</td>
<td>Foton Truck Repair</td>
<td>Foton Truck Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>陕西重汽维修</td>
<td>陕西重汽维修</td>
<td>Auto Repair</td>
<td>Shaanxi Heavy-duty Truck Repair</td>
<td>Shaanxi Heavy-duty Truck Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>北奔重汽维修</td>
<td>北奔重汽维修</td>
<td>Auto Repair</td>
<td>Beiben Trucks Repair</td>
<td>Beiben Trucks Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>江淮货车维修</td>
<td>江淮货车维修</td>
<td>Auto Repair</td>
<td>JAC Truck Repair</td>
<td>JAC Truck Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>华菱星马维修</td>
<td>华菱星马维修</td>
<td>Auto Repair</td>
<td>CAMC Repair</td>
<td>CAMC Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>成都大运汽车维修</td>
<td>成都大运汽车维修</td>
<td>Auto Repair</td>
<td>Chengdu Dayun Automotive Repair</td>
<td>Chengdu Dayun Automotive Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>梅赛德斯-奔驰卡车维修</td>
<td>梅赛德斯-奔驰卡车维修</td>
<td>Auto Repair</td>
<td>Mercedes-Benz Truck Repair</td>
<td>Mercedes-Benz Truck Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>德国曼恩维修</td>
<td>德国曼恩维修</td>
<td>Auto Repair</td>
<td>MAN Repair</td>
<td>MAN Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>斯堪尼亚维修</td>
<td>斯堪尼亚维修</td>
<td>Auto Repair</td>
<td>SCANIA Repair</td>
<td>SCANIA Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>沃尔沃卡车维修</td>
<td>沃尔沃卡车维修</td>
<td>Auto Repair</td>
<td>Volvo Truck Repair</td>
<td>Volvo Truck Repair</td>
</tr>
<tr>
<td>汽车维修</td>
<td>观致维修</td>
<td>观致维修</td>
<td>Auto Repair</td>
<td>Qoros Repair</td>
<td>Qoros Repair</td>
</tr>
<tr>
<td>摩托车服务</td>
<td>摩托车服务相关</td>
<td>摩托车服务相关</td>
<td>Motorcycle Service</td>
<td>Motorcycle Service Related</td>
<td>Motorcycle Service Related</td>
</tr>
<tr>
<td>摩托车服务</td>
<td>摩托车销售</td>
<td>摩托车销售</td>
<td>Motorcycle Service</td>
<td>Motorcycle Sales</td>
<td>Motorcycle Sales</td>
</tr>
<tr>
<td>摩托车服务</td>
<td>摩托车销售</td>
<td>宝马摩托车销售</td>
<td>Motorcycle Service</td>
<td>Motorcycle Sales</td>
<td>BMW Motorcycle Sales</td>
</tr>
<tr>
<td>摩托车服务</td>
<td>摩托车维修</td>
<td>摩托车维修</td>
<td>Motorcycle Service</td>
<td>Motorcycle Repair</td>
<td>Motorcycle Repair</td>
</tr>
<tr>
<td>摩托车服务</td>
<td>摩托车维修</td>
<td>宝马摩托车维修</td>
<td>Motorcycle Service</td>
<td>Motorcycle Repair</td>
<td>BMW Motorcycle Repair</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>餐饮相关场所</td>
<td>餐饮相关</td>
<td>Food &amp; Beverages</td>
<td>Food &amp; Beverages Related</td>
<td>Food &amp; Beverages Related</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>中餐厅</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Chinese Food Restaurant</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>综合酒楼</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Complex Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>四川菜(川菜)</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Sichuan Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>广东菜(粤菜)</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Cantonese Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>山东菜(鲁菜)</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Shandong Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>江苏菜</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Jiangsu Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>浙江菜</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Zhejiang Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>上海菜</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Shanghai Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>湖南菜(湘菜)</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Hunan Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>安徽菜(徽菜)</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Anhui Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>福建菜</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Fujian Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>北京菜</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Beijing Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>湖北菜(鄂菜)</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Hubei Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>东北菜</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Northeastern Chinese Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>云贵菜</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Yunnan &amp; Guizhou Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>西北菜</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Northwestern Chinese Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>老字号</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Traditional Brand</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>火锅店</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Hotpot Restaurant</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>特色/地方风味餐厅</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Local Special Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>海鲜酒楼</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Sea Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>中式素菜馆</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Vegetarian Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>清真菜馆</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Islamic Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>台湾菜</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Taiwan Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>中餐厅</td>
<td>潮州菜</td>
<td>Food &amp; Beverages</td>
<td>Chinese Food Restaurant</td>
<td>Chaozhou Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>外国餐厅</td>
<td>外国餐厅</td>
<td>Food &amp; Beverages</td>
<td>Foreign Food Restaurant</td>
<td>Foreign Food Restaurant</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>外国餐厅</td>
<td>西餐厅(综合风味)</td>
<td>Food &amp; Beverages</td>
<td>Foreign Food Restaurant</td>
<td>Western Restaurant</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>外国餐厅</td>
<td>日本料理</td>
<td>Food &amp; Beverages</td>
<td>Foreign Food Restaurant</td>
<td>Japanese Cuisine</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>外国餐厅</td>
<td>韩国料理</td>
<td>Food &amp; Beverages</td>
<td>Foreign Food Restaurant</td>
<td>South Korean Cuisine</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>外国餐厅</td>
<td>法式菜品餐厅</td>
<td>Food &amp; Beverages</td>
<td>Foreign Food Restaurant</td>
<td>French Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>外国餐厅</td>
<td>意式菜品餐厅</td>
<td>Food &amp; Beverages</td>
<td>Foreign Food Restaurant</td>
<td>Italian Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>外国餐厅</td>
<td>泰国/越南菜品餐厅</td>
<td>Food &amp; Beverages</td>
<td>Foreign Food Restaurant</td>
<td>Thai/Vietnamese Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>外国餐厅</td>
<td>地中海风格菜品</td>
<td>Food &amp; Beverages</td>
<td>Foreign Food Restaurant</td>
<td>Mediterranean Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>外国餐厅</td>
<td>美式风味</td>
<td>Food &amp; Beverages</td>
<td>Foreign Food Restaurant</td>
<td>American Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>外国餐厅</td>
<td>印度风味</td>
<td>Food &amp; Beverages</td>
<td>Foreign Food Restaurant</td>
<td>Indian Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>外国餐厅</td>
<td>英国式菜品餐厅</td>
<td>Food &amp; Beverages</td>
<td>Foreign Food Restaurant</td>
<td>British Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>外国餐厅</td>
<td>牛扒店(扒房)</td>
<td>Food &amp; Beverages</td>
<td>Foreign Food Restaurant</td>
<td>Steak House</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>外国餐厅</td>
<td>俄国菜</td>
<td>Food &amp; Beverages</td>
<td>Foreign Food Restaurant</td>
<td>Russian Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>外国餐厅</td>
<td>葡国菜</td>
<td>Food &amp; Beverages</td>
<td>Foreign Food Restaurant</td>
<td>Portuguese Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>外国餐厅</td>
<td>德国菜</td>
<td>Food &amp; Beverages</td>
<td>Foreign Food Restaurant</td>
<td>German Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>外国餐厅</td>
<td>巴西菜</td>
<td>Food &amp; Beverages</td>
<td>Foreign Food Restaurant</td>
<td>Brazilian Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>外国餐厅</td>
<td>墨西哥菜</td>
<td>Food &amp; Beverages</td>
<td>Foreign Food Restaurant</td>
<td>Mexican Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>外国餐厅</td>
<td>其它亚洲菜</td>
<td>Food &amp; Beverages</td>
<td>Foreign Food Restaurant</td>
<td>Other Asian Food</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>快餐厅</td>
<td>快餐厅</td>
<td>Food &amp; Beverages</td>
<td>Fast Food Restaurant</td>
<td>Fast Food Restaurant</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>快餐厅</td>
<td>肯德基</td>
<td>Food &amp; Beverages</td>
<td>Fast Food Restaurant</td>
<td>KFC</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>快餐厅</td>
<td>麦当劳</td>
<td>Food &amp; Beverages</td>
<td>Fast Food Restaurant</td>
<td>McDonald’s</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>快餐厅</td>
<td>必胜客</td>
<td>Food &amp; Beverages</td>
<td>Fast Food Restaurant</td>
<td>Pizza Hut</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>快餐厅</td>
<td>永和豆浆</td>
<td>Food &amp; Beverages</td>
<td>Fast Food Restaurant</td>
<td>Yon ho</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>快餐厅</td>
<td>茶餐厅</td>
<td>Food &amp; Beverages</td>
<td>Fast Food Restaurant</td>
<td>Teahouse</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>快餐厅</td>
<td>大家乐</td>
<td>Food &amp; Beverages</td>
<td>Fast Food Restaurant</td>
<td>Cafe de Coral</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>快餐厅</td>
<td>大快活</td>
<td>Food &amp; Beverages</td>
<td>Fast Food Restaurant</td>
<td>Fairwood</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>快餐厅</td>
<td>美心</td>
<td>Food &amp; Beverages</td>
<td>Fast Food Restaurant</td>
<td>Maxim’s</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>快餐厅</td>
<td>吉野家</td>
<td>Food &amp; Beverages</td>
<td>Fast Food Restaurant</td>
<td>Yoshinoya</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>快餐厅</td>
<td>仙跡岩</td>
<td>Food &amp; Beverages</td>
<td>Fast Food Restaurant</td>
<td>Saint’s Alp Teahouse</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>快餐厅</td>
<td>呷哺呷哺</td>
<td>Food &amp; Beverages</td>
<td>Fast Food Restaurant</td>
<td>Xiabu Xiabu</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>休闲餐饮场所</td>
<td>休闲餐饮场所</td>
<td>Food &amp; Beverages</td>
<td>Leisure Food Restaurant</td>
<td>Leisure Food Restaurant</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>咖啡厅</td>
<td>咖啡厅</td>
<td>Food &amp; Beverages</td>
<td>Coffee House</td>
<td>Coffee House</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>咖啡厅</td>
<td>星巴克咖啡</td>
<td>Food &amp; Beverages</td>
<td>Coffee House</td>
<td>Starbucks Coffee</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>咖啡厅</td>
<td>上岛咖啡</td>
<td>Food &amp; Beverages</td>
<td>Coffee House</td>
<td>UBC Coffee</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>咖啡厅</td>
<td>Pacific Coffee Company</td>
<td>Food &amp; Beverages</td>
<td>Coffee House</td>
<td>Pacific Coffee Company</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>咖啡厅</td>
<td>巴黎咖啡店</td>
<td>Food &amp; Beverages</td>
<td>Coffee House</td>
<td>Paris Cafe</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>茶艺馆</td>
<td>茶艺馆</td>
<td>Food &amp; Beverages</td>
<td>Tea House</td>
<td>Tea House</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>冷饮店</td>
<td>冷饮店</td>
<td>Food &amp; Beverages</td>
<td>Icecream Shop</td>
<td>Icecream Shop</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>糕饼店</td>
<td>糕饼店</td>
<td>Food &amp; Beverages</td>
<td>Bakery</td>
<td>Bakery</td>
</tr>
<tr>
<td>餐饮服务</td>
<td>甜品店</td>
<td>甜品店</td>
<td>Food &amp; Beverages</td>
<td>Dessert House</td>
<td>Dessert House</td>
</tr>
<tr>
<td>购物服务</td>
<td>购物相关场所</td>
<td>购物相关场所</td>
<td>Shopping</td>
<td>Shopping Related Places</td>
<td>Shopping Related Places</td>
</tr>
<tr>
<td>购物服务</td>
<td>商场</td>
<td>商场</td>
<td>Shopping</td>
<td>Shopping Plaza</td>
<td>Shopping Plaza</td>
</tr>
<tr>
<td>购物服务</td>
<td>商场</td>
<td>购物中心</td>
<td>Shopping</td>
<td>Shopping Plaza</td>
<td>Shopping Centre</td>
</tr>
<tr>
<td>购物服务</td>
<td>商场</td>
<td>普通商场</td>
<td>Shopping</td>
<td>Shopping Plaza</td>
<td>Shops</td>
</tr>
<tr>
<td>购物服务</td>
<td>商场</td>
<td>免税品店</td>
<td>Shopping</td>
<td>Shopping Plaza</td>
<td>Duty-free Shop</td>
</tr>
<tr>
<td>购物服务</td>
<td>便民商店/便利店</td>
<td>便民商店/便利店</td>
<td>Shopping</td>
<td>Convenience Store</td>
<td>Convenience Store</td>
</tr>
<tr>
<td>购物服务</td>
<td>便民商店/便利店</td>
<td>7-ELEVEn便利店</td>
<td>Shopping</td>
<td>Convenience Store</td>
<td>7-ELEVEn</td>
</tr>
<tr>
<td>购物服务</td>
<td>便民商店/便利店</td>
<td>OK便利店</td>
<td>Shopping</td>
<td>Convenience Store</td>
<td>Circle K</td>
</tr>
<tr>
<td>购物服务</td>
<td>家电电子卖场</td>
<td>家电电子卖场</td>
<td>Shopping</td>
<td>Home Electronics Hypermarket</td>
<td>Home Electronics Hypermarket</td>
</tr>
<tr>
<td>购物服务</td>
<td>家电电子卖场</td>
<td>综合家电商场</td>
<td>Shopping</td>
<td>Home Electronics Hypermarket</td>
<td>Comprehensive Home Electronics Shopping Center</td>
</tr>
<tr>
<td>购物服务</td>
<td>家电电子卖场</td>
<td>国美</td>
<td>Shopping</td>
<td>Home Electronics Hypermarket</td>
<td>GOME</td>
</tr>
<tr>
<td>购物服务</td>
<td>家电电子卖场</td>
<td>大中</td>
<td>Shopping</td>
<td>Home Electronics Hypermarket</td>
<td>Dazhong</td>
</tr>
<tr>
<td>购物服务</td>
<td>家电电子卖场</td>
<td>苏宁</td>
<td>Shopping</td>
<td>Home Electronics Hypermarket</td>
<td>Suning</td>
</tr>
<tr>
<td>购物服务</td>
<td>家电电子卖场</td>
<td>手机销售</td>
<td>Shopping</td>
<td>Home Electronics Hypermarket</td>
<td>Mobile Handsets Sales</td>
</tr>
<tr>
<td>购物服务</td>
<td>家电电子卖场</td>
<td>数码电子</td>
<td>Shopping</td>
<td>Home Electronics Hypermarket</td>
<td>Digital Electronics</td>
</tr>
<tr>
<td>购物服务</td>
<td>家电电子卖场</td>
<td>丰泽</td>
<td>Shopping</td>
<td>Home Electronics Hypermarket</td>
<td>Fortress</td>
</tr>
<tr>
<td>购物服务</td>
<td>家电电子卖场</td>
<td>苏宁镭射</td>
<td>Shopping</td>
<td>Home Electronics Hypermarket</td>
<td>Suning Citicall</td>
</tr>
<tr>
<td>购物服务</td>
<td>超级市场</td>
<td>超市</td>
<td>Shopping</td>
<td>Supermarket</td>
<td>Supermarket</td>
</tr>
<tr>
<td>购物服务</td>
<td>超级市场</td>
<td>家乐福</td>
<td>Shopping</td>
<td>Supermarket</td>
<td>Carrefour</td>
</tr>
<tr>
<td>购物服务</td>
<td>超级市场</td>
<td>沃尔玛</td>
<td>Shopping</td>
<td>Supermarket</td>
<td>Wal-Mart</td>
</tr>
<tr>
<td>购物服务</td>
<td>超级市场</td>
<td>华润</td>
<td>Shopping</td>
<td>Supermarket</td>
<td>CRC</td>
</tr>
<tr>
<td>购物服务</td>
<td>超级市场</td>
<td>北京华联</td>
<td>Shopping</td>
<td>Supermarket</td>
<td>Beijing Hualian</td>
</tr>
<tr>
<td>购物服务</td>
<td>超级市场</td>
<td>上海华联</td>
<td>Shopping</td>
<td>Supermarket</td>
<td>Shanghai Hualian</td>
</tr>
<tr>
<td>购物服务</td>
<td>超级市场</td>
<td>麦德龙</td>
<td>Shopping</td>
<td>Supermarket</td>
<td>METRO</td>
</tr>
<tr>
<td>购物服务</td>
<td>超级市场</td>
<td>乐天玛特</td>
<td>Shopping</td>
<td>Supermarket</td>
<td>LOTTE Mart</td>
</tr>
<tr>
<td>购物服务</td>
<td>超级市场</td>
<td>华堂</td>
<td>Shopping</td>
<td>Supermarket</td>
<td>Ito Yokado</td>
</tr>
<tr>
<td>购物服务</td>
<td>超级市场</td>
<td>卜蜂莲花</td>
<td>Shopping</td>
<td>Supermarket</td>
<td>Lotus</td>
</tr>
<tr>
<td>购物服务</td>
<td>超级市场</td>
<td>屈臣氏</td>
<td>Shopping</td>
<td>Supermarket</td>
<td>Watsons</td>
</tr>
<tr>
<td>购物服务</td>
<td>超级市场</td>
<td>惠康超市</td>
<td>Shopping</td>
<td>Supermarket</td>
<td>Wellcome</td>
</tr>
<tr>
<td>购物服务</td>
<td>超级市场</td>
<td>百佳超市</td>
<td>Shopping</td>
<td>Supermarket</td>
<td>PARKnSHOP</td>
</tr>
<tr>
<td>购物服务</td>
<td>超级市场</td>
<td>万宁超市</td>
<td>Shopping</td>
<td>Supermarket</td>
<td>Mannings</td>
</tr>
<tr>
<td>购物服务</td>
<td>花鸟鱼虫市场</td>
<td>花鸟鱼虫市场</td>
<td>Shopping</td>
<td>Plants &amp; Pet Market</td>
<td>Plants &amp; Pet Market</td>
</tr>
<tr>
<td>购物服务</td>
<td>花鸟鱼虫市场</td>
<td>花卉市场</td>
<td>Shopping</td>
<td>Plants &amp; Pet Market</td>
<td>Flower Shop</td>
</tr>
<tr>
<td>购物服务</td>
<td>花鸟鱼虫市场</td>
<td>宠物市场</td>
<td>Shopping</td>
<td>Plants &amp; Pet Market</td>
<td>Pet Market</td>
</tr>
<tr>
<td>购物服务</td>
<td>家居建材市场</td>
<td>家居建材市场</td>
<td>Shopping</td>
<td>Home Building Materials Market</td>
<td>Home Building Materials Market</td>
</tr>
<tr>
<td>购物服务</td>
<td>家居建材市场</td>
<td>家具建材综合市场</td>
<td>Shopping</td>
<td>Home Building Materials Market</td>
<td>Home Building Materials Market</td>
</tr>
<tr>
<td>购物服务</td>
<td>家居建材市场</td>
<td>家具城</td>
<td>Shopping</td>
<td>Home Building Materials Market</td>
<td>Furniture Store</td>
</tr>
<tr>
<td>购物服务</td>
<td>家居建材市场</td>
<td>建材五金市场</td>
<td>Shopping</td>
<td>Home Building Materials Market</td>
<td>Hardware Store</td>
</tr>
<tr>
<td>购物服务</td>
<td>家居建材市场</td>
<td>厨卫市场</td>
<td>Shopping</td>
<td>Home Building Materials Market</td>
<td>Kitchen Supply</td>
</tr>
<tr>
<td>购物服务</td>
<td>家居建材市场</td>
<td>布艺市场</td>
<td>Shopping</td>
<td>Home Building Materials Market</td>
<td>Deco Cloth Store</td>
</tr>
<tr>
<td>购物服务</td>
<td>家居建材市场</td>
<td>灯具瓷器市场</td>
<td>Shopping</td>
<td>Home Building Materials Market</td>
<td>Lighting &amp; Porcelain Market</td>
</tr>
<tr>
<td>购物服务</td>
<td>综合市场</td>
<td>综合市场</td>
<td>Shopping</td>
<td>Comprehensive Market</td>
<td>Comprehensive Market</td>
</tr>
<tr>
<td>购物服务</td>
<td>综合市场</td>
<td>小商品市场</td>
<td>Shopping</td>
<td>Comprehensive Market</td>
<td>Small Commodity Market</td>
</tr>
<tr>
<td>购物服务</td>
<td>综合市场</td>
<td>旧货市场</td>
<td>Shopping</td>
<td>Comprehensive Market</td>
<td>Flea Market</td>
</tr>
<tr>
<td>购物服务</td>
<td>综合市场</td>
<td>农副产品市场</td>
<td>Shopping</td>
<td>Comprehensive Market</td>
<td>Agricultural Products Market</td>
</tr>
<tr>
<td>购物服务</td>
<td>综合市场</td>
<td>果品市场</td>
<td>Shopping</td>
<td>Comprehensive Market</td>
<td>Fruits Market</td>
</tr>
<tr>
<td>购物服务</td>
<td>综合市场</td>
<td>蔬菜市场</td>
<td>Shopping</td>
<td>Comprehensive Market</td>
<td>Vegetable Market</td>
</tr>
<tr>
<td>购物服务</td>
<td>综合市场</td>
<td>水产海鲜市场</td>
<td>Shopping</td>
<td>Comprehensive Market</td>
<td>Seafood Market</td>
</tr>
<tr>
<td>购物服务</td>
<td>文化用品店</td>
<td>文化用品店</td>
<td>Shopping</td>
<td>Stationary Store</td>
<td>Stationary Store</td>
</tr>
<tr>
<td>购物服务</td>
<td>体育用品店</td>
<td>体育用品店</td>
<td>Shopping</td>
<td>Sports Store</td>
<td>Sports Store</td>
</tr>
<tr>
<td>购物服务</td>
<td>体育用品店</td>
<td>李宁专卖店</td>
<td>Shopping</td>
<td>Sports Store</td>
<td>Li-Ning</td>
</tr>
<tr>
<td>购物服务</td>
<td>体育用品店</td>
<td>耐克专卖店</td>
<td>Shopping</td>
<td>Sports Store</td>
<td>NIKE</td>
</tr>
<tr>
<td>购物服务</td>
<td>体育用品店</td>
<td>阿迪达斯专卖店</td>
<td>Shopping</td>
<td>Sports Store</td>
<td>adidas</td>
</tr>
<tr>
<td>购物服务</td>
<td>体育用品店</td>
<td>锐步专卖店</td>
<td>Shopping</td>
<td>Sports Store</td>
<td>Reebok</td>
</tr>
<tr>
<td>购物服务</td>
<td>体育用品店</td>
<td>彪马专卖店</td>
<td>Shopping</td>
<td>Sports Store</td>
<td>PUMA</td>
</tr>
<tr>
<td>购物服务</td>
<td>体育用品店</td>
<td>高尔夫用品店</td>
<td>Shopping</td>
<td>Sports Store</td>
<td>Golf Accessories Shop</td>
</tr>
<tr>
<td>购物服务</td>
<td>体育用品店</td>
<td>户外用品</td>
<td>Shopping</td>
<td>Sports Store</td>
<td>Outdoor Sports Shop</td>
</tr>
<tr>
<td>购物服务</td>
<td>特色商业街</td>
<td>特色商业街</td>
<td>Shopping</td>
<td>Commercial Street</td>
<td>Commercial Street</td>
</tr>
<tr>
<td>购物服务</td>
<td>特色商业街</td>
<td>步行街</td>
<td>Shopping</td>
<td>Commercial Street</td>
<td>Pedestrian Street</td>
</tr>
<tr>
<td>购物服务</td>
<td>服装鞋帽皮具店</td>
<td>服装鞋帽皮具店</td>
<td>Shopping</td>
<td>Clothing Store</td>
<td>Clothing Store</td>
</tr>
<tr>
<td>购物服务</td>
<td>服装鞋帽皮具店</td>
<td>品牌服装店</td>
<td>Shopping</td>
<td>Clothing Store</td>
<td>Brand Clothing Store</td>
</tr>
<tr>
<td>购物服务</td>
<td>服装鞋帽皮具店</td>
<td>品牌鞋店</td>
<td>Shopping</td>
<td>Clothing Store</td>
<td>Brand Shoes Store</td>
</tr>
<tr>
<td>购物服务</td>
<td>服装鞋帽皮具店</td>
<td>品牌皮具店</td>
<td>Shopping</td>
<td>Clothing Store</td>
<td>Brand Leather Ware Store</td>
</tr>
<tr>
<td>购物服务</td>
<td>服装鞋帽皮具店</td>
<td>品牌箱包店</td>
<td>Shopping</td>
<td>Clothing Store</td>
<td>Brand Bags and Suitcases Store</td>
</tr>
<tr>
<td>购物服务</td>
<td>专卖店</td>
<td>专营店</td>
<td>Shopping</td>
<td>Franchise Store</td>
<td>Franchise Store</td>
</tr>
<tr>
<td>购物服务</td>
<td>专卖店</td>
<td>古玩字画店</td>
<td>Shopping</td>
<td>Franchise Store</td>
<td>Antique Shop</td>
</tr>
<tr>
<td>购物服务</td>
<td>专卖店</td>
<td>珠宝首饰工艺品</td>
<td>Shopping</td>
<td>Franchise Store</td>
<td>Jewelry Store</td>
</tr>
<tr>
<td>购物服务</td>
<td>专卖店</td>
<td>钟表店</td>
<td>Shopping</td>
<td>Franchise Store</td>
<td>Watches Shop</td>
</tr>
<tr>
<td>购物服务</td>
<td>专卖店</td>
<td>眼镜店</td>
<td>Shopping</td>
<td>Franchise Store</td>
<td>Optical Shop</td>
</tr>
<tr>
<td>购物服务</td>
<td>专卖店</td>
<td>书店</td>
<td>Shopping</td>
<td>Franchise Store</td>
<td>Bookstore</td>
</tr>
<tr>
<td>购物服务</td>
<td>专卖店</td>
<td>音像店</td>
<td>Shopping</td>
<td>Franchise Store</td>
<td>CD/DVD Shop</td>
</tr>
<tr>
<td>购物服务</td>
<td>专卖店</td>
<td>儿童用品店</td>
<td>Shopping</td>
<td>Franchise Store</td>
<td>Children’s Store</td>
</tr>
<tr>
<td>购物服务</td>
<td>专卖店</td>
<td>自行车专卖店</td>
<td>Shopping</td>
<td>Franchise Store</td>
<td>Bike Shop</td>
</tr>
<tr>
<td>购物服务</td>
<td>专卖店</td>
<td>礼品饰品店</td>
<td>Shopping</td>
<td>Franchise Store</td>
<td>Gift Store</td>
</tr>
<tr>
<td>购物服务</td>
<td>专卖店</td>
<td>烟酒专卖店</td>
<td>Shopping</td>
<td>Franchise Store</td>
<td>Tobacco &amp; Wine Franchise Store</td>
</tr>
<tr>
<td>购物服务</td>
<td>专卖店</td>
<td>宠物用品店</td>
<td>Shopping</td>
<td>Franchise Store</td>
<td>Pet’s Store</td>
</tr>
<tr>
<td>购物服务</td>
<td>专卖店</td>
<td>摄影器材店</td>
<td>Shopping</td>
<td>Franchise Store</td>
<td>Camera Shop</td>
</tr>
<tr>
<td>购物服务</td>
<td>专卖店</td>
<td>宝马生活方式</td>
<td>Shopping</td>
<td>Franchise Store</td>
<td>BMW Lifestyle</td>
</tr>
<tr>
<td>购物服务</td>
<td>专卖店</td>
<td>土特产专卖店</td>
<td>Shopping</td>
<td>Franchise Store</td>
<td>Local Products Franchise Store</td>
</tr>
<tr>
<td>购物服务</td>
<td>特殊买卖场所</td>
<td>特殊买卖场所</td>
<td>Shopping</td>
<td>Special Trade House</td>
<td>Special Trade House</td>
</tr>
<tr>
<td>购物服务</td>
<td>特殊买卖场所</td>
<td>拍卖行</td>
<td>Shopping</td>
<td>Special Trade House</td>
<td>Auction House</td>
</tr>
<tr>
<td>购物服务</td>
<td>特殊买卖场所</td>
<td>典当行</td>
<td>Shopping</td>
<td>Special Trade House</td>
<td>Pawn House</td>
</tr>
<tr>
<td>购物服务</td>
<td>个人用品/化妆品店</td>
<td>其它个人用品店</td>
<td>Shopping</td>
<td>Personal Care Items Shop</td>
<td>Personal Care Items Shop</td>
</tr>
<tr>
<td>购物服务</td>
<td>个人用品/化妆品店</td>
<td>莎莎</td>
<td>Shopping</td>
<td>Personal Care Items Shop</td>
<td>Sasa</td>
</tr>
<tr>
<td>生活服务</td>
<td>生活服务场所</td>
<td>生活服务场所</td>
<td>Daily Life Service</td>
<td>Daily Life Service Place</td>
<td>Daily Life Service Place</td>
</tr>
<tr>
<td>生活服务</td>
<td>旅行社</td>
<td>旅行社</td>
<td>Daily Life Service</td>
<td>Travel Agency</td>
<td>Travel Agency</td>
</tr>
<tr>
<td>生活服务</td>
<td>信息咨询中心</td>
<td>信息咨询中心</td>
<td>Daily Life Service</td>
<td>Information Centre</td>
<td>Information Centre</td>
</tr>
<tr>
<td>生活服务</td>
<td>信息咨询中心</td>
<td>服务中心</td>
<td>Daily Life Service</td>
<td>Information Centre</td>
<td>Service Centre</td>
</tr>
<tr>
<td>生活服务</td>
<td>信息咨询中心</td>
<td>旅馆问讯</td>
<td>Daily Life Service</td>
<td>Information Centre</td>
<td>Enquire of Hotel</td>
</tr>
<tr>
<td>生活服务</td>
<td>信息咨询中心</td>
<td>行李查询/行李问询</td>
<td>Daily Life Service</td>
<td>Information Centre</td>
<td>Enquire of Baggage</td>
</tr>
<tr>
<td>生活服务</td>
<td>售票处</td>
<td>售票处</td>
<td>Daily Life Service</td>
<td>Ticket Office</td>
<td>Ticket Office</td>
</tr>
<tr>
<td>生活服务</td>
<td>售票处</td>
<td>飞机票代售点</td>
<td>Daily Life Service</td>
<td>Ticket Office</td>
<td>Airline Tickets Office</td>
</tr>
<tr>
<td>生活服务</td>
<td>售票处</td>
<td>火车票代售点</td>
<td>Daily Life Service</td>
<td>Ticket Office</td>
<td>Train Ticket Office</td>
</tr>
<tr>
<td>生活服务</td>
<td>售票处</td>
<td>长途汽车票代售点</td>
<td>Daily Life Service</td>
<td>Ticket Office</td>
<td>Coach Ticket Office</td>
</tr>
<tr>
<td>生活服务</td>
<td>售票处</td>
<td>船票代售点</td>
<td>Daily Life Service</td>
<td>Ticket Office</td>
<td>Ferry Ticket Office</td>
</tr>
<tr>
<td>生活服务</td>
<td>售票处</td>
<td>公交卡/月票代售点</td>
<td>Daily Life Service</td>
<td>Ticket Office</td>
<td>Bus IC Card</td>
</tr>
<tr>
<td>生活服务</td>
<td>售票处</td>
<td>公园景点售票处</td>
<td>Daily Life Service</td>
<td>Ticket Office</td>
<td>Park Box Office</td>
</tr>
<tr>
<td>生活服务</td>
<td>邮局</td>
<td>邮局</td>
<td>Daily Life Service</td>
<td>Post Office</td>
<td>Post Office</td>
</tr>
<tr>
<td>生活服务</td>
<td>邮局</td>
<td>邮政速递</td>
<td>Daily Life Service</td>
<td>Post Office</td>
<td>Express Post</td>
</tr>
<tr>
<td>生活服务</td>
<td>物流速递</td>
<td>物流速递</td>
<td>Daily Life Service</td>
<td>Logistics Service</td>
<td>Logistics Service</td>
</tr>
<tr>
<td>生活服务</td>
<td>物流速递</td>
<td>物流仓储场地</td>
<td>Daily Life Service</td>
<td>Logistics Service</td>
<td>Logistics Warehouse Space</td>
</tr>
<tr>
<td>生活服务</td>
<td>电讯营业厅</td>
<td>电讯营业厅</td>
<td>Daily Life Service</td>
<td>Telecom Office</td>
<td>Telecom Office</td>
</tr>
<tr>
<td>生活服务</td>
<td>电讯营业厅</td>
<td>中国电信营业厅</td>
<td>Daily Life Service</td>
<td>Telecom Office</td>
<td>China Telecom Office</td>
</tr>
<tr>
<td>生活服务</td>
<td>电讯营业厅</td>
<td>中国移动营业厅</td>
<td>Daily Life Service</td>
<td>Telecom Office</td>
<td>China Mobile Office</td>
</tr>
<tr>
<td>生活服务</td>
<td>电讯营业厅</td>
<td>中国联通营业厅</td>
<td>Daily Life Service</td>
<td>Telecom Office</td>
<td>China Unicom Office</td>
</tr>
<tr>
<td>生活服务</td>
<td>电讯营业厅</td>
<td>中国铁通营业厅</td>
<td>Daily Life Service</td>
<td>Telecom Office</td>
<td>China Tietong Office</td>
</tr>
<tr>
<td>生活服务</td>
<td>电讯营业厅</td>
<td>中国卫通营业厅</td>
<td>Daily Life Service</td>
<td>Telecom Office</td>
<td>China Satcom Office</td>
</tr>
<tr>
<td>生活服务</td>
<td>电讯营业厅</td>
<td>和记电讯</td>
<td>Daily Life Service</td>
<td>Telecom Office</td>
<td>Hutchison Telecommunications</td>
</tr>
<tr>
<td>生活服务</td>
<td>电讯营业厅</td>
<td>数码通电讯</td>
<td>Daily Life Service</td>
<td>Telecom Office</td>
<td>SmarTone</td>
</tr>
<tr>
<td>生活服务</td>
<td>电讯营业厅</td>
<td>电讯盈科</td>
<td>Daily Life Service</td>
<td>Telecom Office</td>
<td>PCCW</td>
</tr>
<tr>
<td>生活服务</td>
<td>电讯营业厅</td>
<td>中国移动香港</td>
<td>Daily Life Service</td>
<td>Telecom Office</td>
<td>China Mobile Hong Kong</td>
</tr>
<tr>
<td>生活服务</td>
<td>事务所</td>
<td>事务所</td>
<td>Daily Life Service</td>
<td>Professional Service Firm</td>
<td>Professional Service Firm</td>
</tr>
<tr>
<td>生活服务</td>
<td>事务所</td>
<td>律师事务所</td>
<td>Daily Life Service</td>
<td>Professional Service Firm</td>
<td>Law Firm</td>
</tr>
<tr>
<td>生活服务</td>
<td>事务所</td>
<td>会计师事务所</td>
<td>Daily Life Service</td>
<td>Professional Service Firm</td>
<td>Accounting Firm</td>
</tr>
<tr>
<td>生活服务</td>
<td>事务所</td>
<td>评估事务所</td>
<td>Daily Life Service</td>
<td>Professional Service Firm</td>
<td>Evaluation Firm</td>
</tr>
<tr>
<td>生活服务</td>
<td>事务所</td>
<td>审计事务所</td>
<td>Daily Life Service</td>
<td>Professional Service Firm</td>
<td>Audit Firm</td>
</tr>
<tr>
<td>生活服务</td>
<td>事务所</td>
<td>认证事务所</td>
<td>Daily Life Service</td>
<td>Professional Service Firm</td>
<td>Authentication Services</td>
</tr>
<tr>
<td>生活服务</td>
<td>事务所</td>
<td>专利事务所</td>
<td>Daily Life Service</td>
<td>Professional Service Firm</td>
<td>Patent Office</td>
</tr>
<tr>
<td>生活服务</td>
<td>人才市场</td>
<td>人才市场</td>
<td>Daily Life Service</td>
<td>Job Center</td>
<td>Job Center</td>
</tr>
<tr>
<td>生活服务</td>
<td>自来水营业厅</td>
<td>自来水营业厅</td>
<td>Daily Life Service</td>
<td>Water Supply Service Office</td>
<td>Water Supply Service Office</td>
</tr>
<tr>
<td>生活服务</td>
<td>电力营业厅</td>
<td>电力营业厅</td>
<td>Daily Life Service</td>
<td>Electric Supply Service Office</td>
<td>Electric Supply Service Office</td>
</tr>
<tr>
<td>生活服务</td>
<td>美容美发店</td>
<td>美容美发店</td>
<td>Daily Life Service</td>
<td>Beauty and Hairdressing Store</td>
<td>Beauty and Hairdressing Store</td>
</tr>
<tr>
<td>生活服务</td>
<td>维修站点</td>
<td>维修站点</td>
<td>Daily Life Service</td>
<td>Repair Store</td>
<td>Repair Store</td>
</tr>
<tr>
<td>生活服务</td>
<td>摄影冲印店</td>
<td>摄影冲印</td>
<td>Daily Life Service</td>
<td>Photo Finishing</td>
<td>Photo Finishing</td>
</tr>
<tr>
<td>生活服务</td>
<td>洗浴推拿场所</td>
<td>洗浴推拿场所</td>
<td>Daily Life Service</td>
<td>Bath &amp; Massage Center</td>
<td>Bath &amp; Massage Center</td>
</tr>
<tr>
<td>生活服务</td>
<td>洗衣店</td>
<td>洗衣店</td>
<td>Daily Life Service</td>
<td>Laundry</td>
<td>Laundry</td>
</tr>
<tr>
<td>生活服务</td>
<td>中介机构</td>
<td>中介机构</td>
<td>Daily Life Service</td>
<td>Agency</td>
<td>Agency</td>
</tr>
<tr>
<td>生活服务</td>
<td>搬家公司</td>
<td>搬家公司</td>
<td>Daily Life Service</td>
<td>Move Service</td>
<td>Move Service</td>
</tr>
<tr>
<td>生活服务</td>
<td>彩票彩券销售点</td>
<td>彩票彩券销售点</td>
<td>Daily Life Service</td>
<td>Lottery Store</td>
<td>Lottery Store</td>
</tr>
<tr>
<td>生活服务</td>
<td>彩票彩券销售点</td>
<td>马会投注站</td>
<td>Daily Life Service</td>
<td>Lottery Store</td>
<td>Horse-Betting Center</td>
</tr>
<tr>
<td>生活服务</td>
<td>丧葬设施</td>
<td>丧葬设施</td>
<td>Daily Life Service</td>
<td>Funeral Facilities</td>
<td>Funeral Facilities</td>
</tr>
<tr>
<td>生活服务</td>
<td>丧葬设施</td>
<td>陵园</td>
<td>Daily Life Service</td>
<td>Funeral Facilities</td>
<td>Cemetery</td>
</tr>
<tr>
<td>生活服务</td>
<td>丧葬设施</td>
<td>公墓</td>
<td>Daily Life Service</td>
<td>Funeral Facilities</td>
<td>Cemetery</td>
</tr>
<tr>
<td>生活服务</td>
<td>丧葬设施</td>
<td>殡仪馆</td>
<td>Daily Life Service</td>
<td>Funeral Facilities</td>
<td>Funeral House</td>
</tr>
<tr>
<td>生活服务</td>
<td>婴儿服务场所</td>
<td>婴儿服务场所</td>
<td>Daily Life Service</td>
<td>Baby Service Place</td>
<td>Baby Service Place</td>
</tr>
<tr>
<td>生活服务</td>
<td>婴儿服务场所</td>
<td>婴儿游泳馆</td>
<td>Daily Life Service</td>
<td>Baby Service Place</td>
<td>Baby Natatorium</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>体育休闲服务场所</td>
<td>体育休闲服务场所</td>
<td>Sports &amp; Recreation</td>
<td>Sports &amp; Recreation Places</td>
<td>Sports &amp; Recreation Places</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>运动场所</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Sports Places</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>综合体育馆</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Sports Centre</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>保龄球馆</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Bowling Hall</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>网球场</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Tennis Court</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>篮球场馆</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Basketball Stadium</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>足球场</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Football Field</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>滑雪场</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Ski Field</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>溜冰场</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Skating Rink</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>户外健身场所</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Outdoor Gym Facility</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>海滨浴场</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Public Beach</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>游泳馆</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Natatorium</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>健身中心</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Gym Center</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>乒乓球馆</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Table Tennis Hall</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>台球厅</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Pool Room</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>壁球场</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Squash Court</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>马术俱乐部</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Horse Riding Club</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>赛马场</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Race Track</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>橄榄球场</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Rugby Court</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>羽毛球场</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Badminton Court</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>运动场馆</td>
<td>跆拳道场馆</td>
<td>Sports &amp; Recreation</td>
<td>Sports Stadium</td>
<td>Taekwondo Venue</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>高尔夫相关</td>
<td>高尔夫相关</td>
<td>Sports &amp; Recreation</td>
<td>Golf Related</td>
<td>Golf Related</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>高尔夫相关</td>
<td>高尔夫球场</td>
<td>Sports &amp; Recreation</td>
<td>Golf Related</td>
<td>Golf Course</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>高尔夫相关</td>
<td>高尔夫练习场</td>
<td>Sports &amp; Recreation</td>
<td>Golf Related</td>
<td>Golf Training Course</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>娱乐场所</td>
<td>娱乐场所</td>
<td>Sports &amp; Recreation</td>
<td>Recreation Center</td>
<td>Recreation Center</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>娱乐场所</td>
<td>夜总会</td>
<td>Sports &amp; Recreation</td>
<td>Recreation Center</td>
<td>Night Club</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>娱乐场所</td>
<td>KTV</td>
<td>Sports &amp; Recreation</td>
<td>Recreation Center</td>
<td>KTV</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>娱乐场所</td>
<td>迪厅</td>
<td>Sports &amp; Recreation</td>
<td>Recreation Center</td>
<td>Disco</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>娱乐场所</td>
<td>酒吧</td>
<td>Sports &amp; Recreation</td>
<td>Recreation Center</td>
<td>Pub</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>娱乐场所</td>
<td>游戏厅</td>
<td>Sports &amp; Recreation</td>
<td>Recreation Center</td>
<td>Game Center</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>娱乐场所</td>
<td>棋牌室</td>
<td>Sports &amp; Recreation</td>
<td>Recreation Center</td>
<td>Card &amp; Chess Room</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>娱乐场所</td>
<td>博彩中心</td>
<td>Sports &amp; Recreation</td>
<td>Recreation Center</td>
<td>Lottery Center</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>娱乐场所</td>
<td>网吧</td>
<td>Sports &amp; Recreation</td>
<td>Recreation Center</td>
<td>Internet Bar</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>度假疗养场所</td>
<td>度假疗养场所</td>
<td>Sports &amp; Recreation</td>
<td>Holiday &amp; Nursing Resort</td>
<td>Holiday &amp; Nursing Resort</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>度假疗养场所</td>
<td>度假村</td>
<td>Sports &amp; Recreation</td>
<td>Holiday &amp; Nursing Resort</td>
<td>Resort</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>度假疗养场所</td>
<td>疗养院</td>
<td>Sports &amp; Recreation</td>
<td>Holiday &amp; Nursing Resort</td>
<td>Nursing Home</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>休闲场所</td>
<td>休闲场所</td>
<td>Sports &amp; Recreation</td>
<td>Recreation Place</td>
<td>Recreation Place</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>休闲场所</td>
<td>游乐场</td>
<td>Sports &amp; Recreation</td>
<td>Recreation Place</td>
<td>Amusement Park</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>休闲场所</td>
<td>垂钓园</td>
<td>Sports &amp; Recreation</td>
<td>Recreation Place</td>
<td>Fishing Spot</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>休闲场所</td>
<td>采摘园</td>
<td>Sports &amp; Recreation</td>
<td>Recreation Place</td>
<td>Plucking Park</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>休闲场所</td>
<td>露营地</td>
<td>Sports &amp; Recreation</td>
<td>Recreation Place</td>
<td>Camping Site</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>休闲场所</td>
<td>水上活动中心</td>
<td>Sports &amp; Recreation</td>
<td>Recreation Place</td>
<td>Water Sports Centre</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>影剧院</td>
<td>影剧院相关</td>
<td>Sports &amp; Recreation</td>
<td>Theatre &amp; Cinema</td>
<td>Theatre &amp; Cinema Related</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>影剧院</td>
<td>电影院</td>
<td>Sports &amp; Recreation</td>
<td>Theatre &amp; Cinema</td>
<td>Cinema</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>影剧院</td>
<td>音乐厅</td>
<td>Sports &amp; Recreation</td>
<td>Theatre &amp; Cinema</td>
<td>Concert Hall</td>
</tr>
<tr>
<td>体育休闲服务</td>
<td>影剧院</td>
<td>剧场</td>
<td>Sports &amp; Recreation</td>
<td>Theatre &amp; Cinema</td>
<td>Theatre</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>医疗保健服务场所</td>
<td>医疗保健服务场所</td>
<td>Medical Service</td>
<td>Medical and Health Care Service Place</td>
<td>Medical and Health Care Service Place</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>综合医院</td>
<td>综合医院</td>
<td>Medical Service</td>
<td>Hospital</td>
<td>Hospital</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>综合医院</td>
<td>三级甲等医院</td>
<td>Medical Service</td>
<td>Hospital</td>
<td>AAA Class Hospital</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>综合医院</td>
<td>卫生院</td>
<td>Medical Service</td>
<td>Hospital</td>
<td>Health Center</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>专科医院</td>
<td>专科医院</td>
<td>Medical Service</td>
<td>Special Hospital</td>
<td>Special Hospital</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>专科医院</td>
<td>整形美容</td>
<td>Medical Service</td>
<td>Special Hospital</td>
<td>Plastic Surgery</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>专科医院</td>
<td>口腔医院</td>
<td>Medical Service</td>
<td>Special Hospital</td>
<td>Stomatological Hospital</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>专科医院</td>
<td>眼科医院</td>
<td>Medical Service</td>
<td>Special Hospital</td>
<td>Ophthalmology Hospital</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>专科医院</td>
<td>耳鼻喉医院</td>
<td>Medical Service</td>
<td>Special Hospital</td>
<td>ENT Hospital</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>专科医院</td>
<td>胸科医院</td>
<td>Medical Service</td>
<td>Special Hospital</td>
<td>Chest Hospital</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>专科医院</td>
<td>骨科医院</td>
<td>Medical Service</td>
<td>Special Hospital</td>
<td>Orthopedic Hospital</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>专科医院</td>
<td>肿瘤医院</td>
<td>Medical Service</td>
<td>Special Hospital</td>
<td>Tumor Hospital</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>专科医院</td>
<td>脑科医院</td>
<td>Medical Service</td>
<td>Special Hospital</td>
<td>Brain Hospital</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>专科医院</td>
<td>妇科医院</td>
<td>Medical Service</td>
<td>Special Hospital</td>
<td>Maternity Hospital</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>专科医院</td>
<td>精神病医院</td>
<td>Medical Service</td>
<td>Special Hospital</td>
<td>Psychiatric Hospital</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>专科医院</td>
<td>传染病医院</td>
<td>Medical Service</td>
<td>Special Hospital</td>
<td>Infectious Disease Hospital</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>诊所</td>
<td>诊所</td>
<td>Medical Service</td>
<td>Clinic</td>
<td>Clinic</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>急救中心</td>
<td>急救中心</td>
<td>Medical Service</td>
<td>Emergency Center</td>
<td>Emergency Center</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>疾病预防机构</td>
<td>疾病预防</td>
<td>Medical Service</td>
<td>Disease Prevention Institution</td>
<td>Disease Prevention</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>医药保健销售店</td>
<td>医药保健相关</td>
<td>Medical Service</td>
<td>Pharmacy</td>
<td>Medicine Health Care Related</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>医药保健销售店</td>
<td>药房</td>
<td>Medical Service</td>
<td>Pharmacy</td>
<td>Pharmacy</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>医药保健销售店</td>
<td>医疗保健用品</td>
<td>Medical Service</td>
<td>Pharmacy</td>
<td>Medical Supplies</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>动物医疗场所</td>
<td>动物医疗场所</td>
<td>Medical Service</td>
<td>Veterinary Hospital</td>
<td>Veterinary Hospital</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>动物医疗场所</td>
<td>宠物诊所</td>
<td>Medical Service</td>
<td>Veterinary Hospital</td>
<td>Pet Clinic</td>
</tr>
<tr>
<td>医疗保健服务</td>
<td>动物医疗场所</td>
<td>兽医站</td>
<td>Medical Service</td>
<td>Veterinary Hospital</td>
<td>Veterinary Station</td>
</tr>
<tr>
<td>住宿服务</td>
<td>住宿服务相关</td>
<td>住宿服务相关</td>
<td>Accommodation Service</td>
<td>Accommodation Service Related</td>
<td>Accommodation Service Related</td>
</tr>
<tr>
<td>住宿服务</td>
<td>宾馆酒店</td>
<td>宾馆酒店</td>
<td>Accommodation Service</td>
<td>Hotel</td>
<td>Hotel</td>
</tr>
<tr>
<td>住宿服务</td>
<td>宾馆酒店</td>
<td>奢华酒店</td>
<td>Accommodation Service</td>
<td>Hotel</td>
<td>Luxury Hotel</td>
</tr>
<tr>
<td>住宿服务</td>
<td>宾馆酒店</td>
<td>五星级宾馆</td>
<td>Accommodation Service</td>
<td>Hotel</td>
<td>Five-star Hotel</td>
</tr>
<tr>
<td>住宿服务</td>
<td>宾馆酒店</td>
<td>四星级宾馆</td>
<td>Accommodation Service</td>
<td>Hotel</td>
<td>Four-star Hotel</td>
</tr>
<tr>
<td>住宿服务</td>
<td>宾馆酒店</td>
<td>三星级宾馆</td>
<td>Accommodation Service</td>
<td>Hotel</td>
<td>Three-star Hotel</td>
</tr>
<tr>
<td>住宿服务</td>
<td>宾馆酒店</td>
<td>经济型连锁酒店</td>
<td>Accommodation Service</td>
<td>Hotel</td>
<td>Economical Chain Hotel</td>
</tr>
<tr>
<td>住宿服务</td>
<td>旅馆招待所</td>
<td>旅馆招待所</td>
<td>Accommodation Service</td>
<td>Hostel</td>
<td>Hostel</td>
</tr>
<tr>
<td>住宿服务</td>
<td>旅馆招待所</td>
<td>青年旅舍</td>
<td>Accommodation Service</td>
<td>Hostel</td>
<td>Youth Hostel</td>
</tr>
<tr>
<td>风景名胜</td>
<td>风景名胜相关</td>
<td>旅游景点</td>
<td>Tourist Attraction</td>
<td>Tourist Attraction Related</td>
<td>Tourist Attraction</td>
</tr>
<tr>
<td>风景名胜</td>
<td>公园广场</td>
<td>公园广场</td>
<td>Tourist Attraction</td>
<td>Park &amp; Square</td>
<td>Park &amp; Square</td>
</tr>
<tr>
<td>风景名胜</td>
<td>公园广场</td>
<td>公园</td>
<td>Tourist Attraction</td>
<td>Park &amp; Square</td>
<td>Park</td>
</tr>
<tr>
<td>风景名胜</td>
<td>公园广场</td>
<td>动物园</td>
<td>Tourist Attraction</td>
<td>Park &amp; Square</td>
<td>Zoo</td>
</tr>
<tr>
<td>风景名胜</td>
<td>公园广场</td>
<td>植物园</td>
<td>Tourist Attraction</td>
<td>Park &amp; Square</td>
<td>Botanical Garden</td>
</tr>
<tr>
<td>风景名胜</td>
<td>公园广场</td>
<td>水族馆</td>
<td>Tourist Attraction</td>
<td>Park &amp; Square</td>
<td>Aquarium</td>
</tr>
<tr>
<td>风景名胜</td>
<td>公园广场</td>
<td>城市广场</td>
<td>Tourist Attraction</td>
<td>Park &amp; Square</td>
<td>City Plaza</td>
</tr>
<tr>
<td>风景名胜</td>
<td>公园广场</td>
<td>公园内部设施</td>
<td>Tourist Attraction</td>
<td>Park &amp; Plaza</td>
<td>Facilities within the park</td>
</tr>
<tr>
<td>风景名胜</td>
<td>风景名胜</td>
<td>风景名胜</td>
<td>Tourist Attraction</td>
<td>Scenery Spot</td>
<td>Scenery Spot</td>
</tr>
<tr>
<td>风景名胜</td>
<td>风景名胜</td>
<td>世界遗产</td>
<td>Tourist Attraction</td>
<td>Scenery Spot</td>
<td>World Heritage</td>
</tr>
<tr>
<td>风景名胜</td>
<td>风景名胜</td>
<td>国家级景点</td>
<td>Tourist Attraction</td>
<td>Scenery Spot</td>
<td>National View Spot</td>
</tr>
<tr>
<td>风景名胜</td>
<td>风景名胜</td>
<td>省级景点</td>
<td>Tourist Attraction</td>
<td>Scenery Spot</td>
<td>Provincial View Spot</td>
</tr>
<tr>
<td>风景名胜</td>
<td>风景名胜</td>
<td>纪念馆</td>
<td>Tourist Attraction</td>
<td>Scenery Spot</td>
<td>Memorial Hall</td>
</tr>
<tr>
<td>风景名胜</td>
<td>风景名胜</td>
<td>寺庙道观</td>
<td>Tourist Attraction</td>
<td>Scenery Spot</td>
<td>Buddhist &amp; Taoist Temple</td>
</tr>
<tr>
<td>风景名胜</td>
<td>风景名胜</td>
<td>教堂</td>
<td>Tourist Attraction</td>
<td>Scenery Spot</td>
<td>Church</td>
</tr>
<tr>
<td>风景名胜</td>
<td>风景名胜</td>
<td>回教寺</td>
<td>Tourist Attraction</td>
<td>Scenery Spot</td>
<td>Mosque</td>
</tr>
<tr>
<td>风景名胜</td>
<td>风景名胜</td>
<td>海滩</td>
<td>Tourist Attraction</td>
<td>Scenery Spot</td>
<td>Beach</td>
</tr>
<tr>
<td>风景名胜</td>
<td>风景名胜</td>
<td>观景点</td>
<td>Tourist Attraction</td>
<td>Scenery Spot</td>
<td>View Point</td>
</tr>
<tr>
<td>商务住宅</td>
<td>商务住宅相关</td>
<td>商务住宅相关</td>
<td>Commercial House</td>
<td>Commercial House Related</td>
<td>Commercial House Related</td>
</tr>
<tr>
<td>商务住宅</td>
<td>产业园区</td>
<td>产业园区</td>
<td>Commercial House</td>
<td>Industrial Park</td>
<td>Industrial Park</td>
</tr>
<tr>
<td>商务住宅</td>
<td>楼宇</td>
<td>楼宇相关</td>
<td>Commercial House</td>
<td>Building</td>
<td>Building Related</td>
</tr>
<tr>
<td>商务住宅</td>
<td>楼宇</td>
<td>商务写字楼</td>
<td>Commercial House</td>
<td>Building</td>
<td>Business Office Building</td>
</tr>
<tr>
<td>商务住宅</td>
<td>楼宇</td>
<td>工业大厦建筑物</td>
<td>Commercial House</td>
<td>Building</td>
<td>Industrial Building</td>
</tr>
<tr>
<td>商务住宅</td>
<td>楼宇</td>
<td>商住两用楼宇</td>
<td>Commercial House</td>
<td>Building</td>
<td>Commercial-residential Building</td>
</tr>
<tr>
<td>商务住宅</td>
<td>住宅区</td>
<td>住宅区</td>
<td>Commercial House</td>
<td>Residential Area</td>
<td>Residential Area</td>
</tr>
<tr>
<td>商务住宅</td>
<td>住宅区</td>
<td>别墅</td>
<td>Commercial House</td>
<td>Residential Area</td>
<td>Villa</td>
</tr>
<tr>
<td>商务住宅</td>
<td>住宅区</td>
<td>住宅小区</td>
<td>Commercial House</td>
<td>Residential Area</td>
<td>Residential Quarter</td>
</tr>
<tr>
<td>商务住宅</td>
<td>住宅区</td>
<td>宿舍</td>
<td>Commercial House</td>
<td>Residential Area</td>
<td>Dormitory</td>
</tr>
<tr>
<td>商务住宅</td>
<td>住宅区</td>
<td>社区中心</td>
<td>Commercial House</td>
<td>Residential Area</td>
<td>Community Center</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>政府及社会团体相关</td>
<td>政府及社会团体相关</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Governmental &amp; Social Groups Related</td>
<td>Governmental &amp; Social Groups Related</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>政府机关</td>
<td>政府机关相关</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Governmental Organization</td>
<td>Governmental Organization Related</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>政府机关</td>
<td>国家级机关及事业单位</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Governmental Organization</td>
<td>State Level Organization &amp; Institution</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>政府机关</td>
<td>省直辖市级政府及事业单位</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Governmental Organization</td>
<td>Provincial Level Government and Institution</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>政府机关</td>
<td>地市级政府及事业单位</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Governmental Organization</td>
<td>Prefecture Level Government and Institution</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>政府机关</td>
<td>区县级政府及事业单位</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Governmental Organization</td>
<td>District &amp; County Level Government and Institution</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>政府机关</td>
<td>乡镇级政府及事业单位</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Governmental Organization</td>
<td>Town Level Government and Institution</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>政府机关</td>
<td>乡镇以下级政府及事业单位</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Governmental Organization</td>
<td>Below Town level Government and Institution</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>政府机关</td>
<td>外地政府办</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Governmental Organization</td>
<td>Non-local Government Representative Office</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>外国机构</td>
<td>外国机构相关</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Foreign Organization</td>
<td>Foreign Organization Related</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>外国机构</td>
<td>外国使领馆</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Foreign Organization</td>
<td>Foreign Embassy and Consulate</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>外国机构</td>
<td>国际组织办事处</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Foreign Organization</td>
<td>Representative Office of International Organization</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>民主党派</td>
<td>民主党派</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Democratic Party</td>
<td>Democratic Party</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>社会团体</td>
<td>社会团体相关</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Social Group</td>
<td>Social Group Related</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>社会团体</td>
<td>共青团</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Social Group</td>
<td>Communist Youth League</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>社会团体</td>
<td>少先队</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Social Group</td>
<td>Young Pioneer</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>社会团体</td>
<td>妇联</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Social Group</td>
<td>Women’s Federation</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>社会团体</td>
<td>残联</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Social Group</td>
<td>Disabled Persons’ Federation</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>社会团体</td>
<td>红十字会</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Social Group</td>
<td>Red Cross</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>社会团体</td>
<td>消费者协会</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Social Group</td>
<td>Consumers’ Association</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>社会团体</td>
<td>行业协会</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Social Group</td>
<td>Industry Association</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>社会团体</td>
<td>慈善机构</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Social Group</td>
<td>Charity Organizations</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>社会团体</td>
<td>教会</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Social Group</td>
<td>Church</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>公检法机构</td>
<td>公检法机关</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Public Security Organization</td>
<td>Public Security Organization</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>公检法机构</td>
<td>公安警察</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Public Security Organization</td>
<td>Police Station</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>公检法机构</td>
<td>检察院</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Public Security Organization</td>
<td>Procuratorate</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>公检法机构</td>
<td>法院</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Public Security Organization</td>
<td>Court</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>公检法机构</td>
<td>消防机关</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Public Security Organization</td>
<td>Fire Fighting Organization</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>公检法机构</td>
<td>公证鉴定机构</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Public Security Organization</td>
<td>Notarial Survey Organization</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>公检法机构</td>
<td>社会治安机构</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Public Security Organization</td>
<td>Social Security Organization</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>交通车辆管理</td>
<td>交通车辆管理相关</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Traffic Vehicle Management</td>
<td>Traffic Vehicle Management Related</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>交通车辆管理</td>
<td>交通管理机构</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Traffic Vehicle Management</td>
<td>Traffic Management Authority</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>交通车辆管理</td>
<td>车辆管理机构</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Traffic Vehicle Management</td>
<td>Vehicle Management Authority</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>交通车辆管理</td>
<td>验车场</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Traffic Vehicle Management</td>
<td>Vehicle Assessment Service</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>交通车辆管理</td>
<td>交通执法站</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Traffic Vehicle Management</td>
<td>Traffic Management Station</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>交通车辆管理</td>
<td>车辆通行证办理处</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Traffic Vehicle Management</td>
<td>Vehicle Pass Card Office</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>交通车辆管理</td>
<td>货车相关检查站</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Traffic Vehicle Management</td>
<td>Truck Related Checkpoints</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>工商税务机构</td>
<td>工商税务机构</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Industrial and Commercial Taxation Institution</td>
<td>Industrial and Commercial Taxation Institution</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>工商税务机构</td>
<td>工商部门</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Industrial and Commercial Taxation Institution</td>
<td>Administration for Industry &amp; Commerce</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>工商税务机构</td>
<td>国税机关</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Industrial and Commercial Taxation Institution</td>
<td>State Tax Authority</td>
</tr>
<tr>
<td>政府机构及社会团体</td>
<td>工商税务机构</td>
<td>地税机关</td>
<td>Governmental Organization &amp; Social Group</td>
<td>Industrial and Commercial Taxation Institution</td>
<td>Local Tax Authority</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>科教文化场所</td>
<td>科教文化场所</td>
<td>Science/Culture &amp; Education Service</td>
<td>Science &amp; Education Cultural Place</td>
<td>Science &amp; Education Cultural Place</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>博物馆</td>
<td>博物馆</td>
<td>Science/Culture &amp; Education Service</td>
<td>Museum</td>
<td>Museum</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>博物馆</td>
<td>奥迪博物馆</td>
<td>Science/Culture &amp; Education Service</td>
<td>Museum</td>
<td>Audi Museum</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>博物馆</td>
<td>梅赛德斯-奔驰博物馆</td>
<td>Science/Culture &amp; Education Service</td>
<td>Museum</td>
<td>Mercedes-Benz Museum</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>展览馆</td>
<td>展览馆</td>
<td>Science/Culture &amp; Education Service</td>
<td>Exhibition Hall</td>
<td>Exhibition Hall</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>展览馆</td>
<td>室内展位</td>
<td>Science/Culture &amp; Education Service</td>
<td>Exhibition Hall</td>
<td>Indoor Booth</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>会展中心</td>
<td>会展中心</td>
<td>Science/Culture &amp; Education Service</td>
<td>Convention &amp; Exhibition Center</td>
<td>Convention &amp; Exhibition Center</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>美术馆</td>
<td>美术馆</td>
<td>Science/Culture &amp; Education Service</td>
<td>Art Gallery</td>
<td>Art Gallery</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>图书馆</td>
<td>图书馆</td>
<td>Science/Culture &amp; Education Service</td>
<td>Library</td>
<td>Library</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>科技馆</td>
<td>科技馆</td>
<td>Science/Culture &amp; Education Service</td>
<td>Science &amp; Technology Museum</td>
<td>Science &amp; Technology Museum</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>天文馆</td>
<td>天文馆</td>
<td>Science/Culture &amp; Education Service</td>
<td>Planetarium</td>
<td>Planetarium</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>文化宫</td>
<td>文化宫</td>
<td>Science/Culture &amp; Education Service</td>
<td>Cultural Palace</td>
<td>Cultural Palace</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>档案馆</td>
<td>档案馆</td>
<td>Science/Culture &amp; Education Service</td>
<td>Archives Hall</td>
<td>Archives Hall</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>文艺团体</td>
<td>文艺团体</td>
<td>Science/Culture &amp; Education Service</td>
<td>Arts Organization</td>
<td>Arts Organization</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>传媒机构</td>
<td>传媒机构</td>
<td>Science/Culture &amp; Education Service</td>
<td>Media Organization</td>
<td>Media Organization</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>传媒机构</td>
<td>电视台</td>
<td>Science/Culture &amp; Education Service</td>
<td>Media Organization</td>
<td>TV Station</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>传媒机构</td>
<td>电台</td>
<td>Science/Culture &amp; Education Service</td>
<td>Media Organization</td>
<td>Radio Station</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>传媒机构</td>
<td>报社</td>
<td>Science/Culture &amp; Education Service</td>
<td>Media Organization</td>
<td>Newspaper Office</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>传媒机构</td>
<td>杂志社</td>
<td>Science/Culture &amp; Education Service</td>
<td>Media Organization</td>
<td>Journal Publisher</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>传媒机构</td>
<td>出版社</td>
<td>Science/Culture &amp; Education Service</td>
<td>Media Organization</td>
<td>Publishing House</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>学校</td>
<td>学校</td>
<td>Science/Culture &amp; Education Service</td>
<td>School</td>
<td>School</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>学校</td>
<td>高等院校</td>
<td>Science/Culture &amp; Education Service</td>
<td>School</td>
<td>University &amp; College</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>学校</td>
<td>中学</td>
<td>Science/Culture &amp; Education Service</td>
<td>School</td>
<td>Middle School</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>学校</td>
<td>小学</td>
<td>Science/Culture &amp; Education Service</td>
<td>School</td>
<td>Elementary School</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>学校</td>
<td>幼儿园</td>
<td>Science/Culture &amp; Education Service</td>
<td>School</td>
<td>Kindergarten</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>学校</td>
<td>成人教育</td>
<td>Science/Culture &amp; Education Service</td>
<td>School</td>
<td>Adult Education</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>学校</td>
<td>职业技术学校</td>
<td>Science/Culture &amp; Education Service</td>
<td>School</td>
<td>Vocational Technical School</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>学校</td>
<td>学校内部设施</td>
<td>Culture &amp; Education</td>
<td>School</td>
<td>Facilities within the School</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>科研机构</td>
<td>科研机构</td>
<td>Science/Culture &amp; Education Service</td>
<td>Research Institution</td>
<td>Research Institution</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>培训机构</td>
<td>培训机构</td>
<td>Science/Culture &amp; Education Service</td>
<td>Training Institution</td>
<td>Training Institution</td>
</tr>
<tr>
<td>科教文化服务</td>
<td>驾校</td>
<td>驾校</td>
<td>Science/Culture &amp; Education Service</td>
<td>Driving School</td>
<td>Driving School</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>交通服务相关</td>
<td>交通服务相关</td>
<td>Transportation Service</td>
<td>Transportation Service Related</td>
<td>Transportation Service Related</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>机场相关</td>
<td>机场相关</td>
<td>Transportation Service</td>
<td>Airport Related</td>
<td>Airport Related</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>机场相关</td>
<td>候机室</td>
<td>Transportation Service</td>
<td>Airport Related</td>
<td>Departure Lounge</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>机场相关</td>
<td>摆渡车站</td>
<td>Transportation Service</td>
<td>Airport Related</td>
<td>The Ferry Station</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>机场相关</td>
<td>飞机场</td>
<td>Transportation Service</td>
<td>Airport Related</td>
<td>Airport</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>机场相关</td>
<td>机场出发/到达</td>
<td>Transportation Service</td>
<td>Airport Related</td>
<td>Airport Departure/Arrival</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>机场相关</td>
<td>直升机场</td>
<td>Transportation Service</td>
<td>Airport Related</td>
<td>Heliport</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>机场相关</td>
<td>机场货运处</td>
<td>Transportation Service</td>
<td>Airport Related</td>
<td>Airport Freight Station</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>火车站</td>
<td>火车站</td>
<td>Transportation Service</td>
<td>Railway Station</td>
<td>Railway Station</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>火车站</td>
<td>候车室</td>
<td>Transportation Service</td>
<td>Railway Station</td>
<td>Waiting Room</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>火车站</td>
<td>进站口/检票口</td>
<td>Transportation Service</td>
<td>Railway Station</td>
<td>Ticket Entrance</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>火车站</td>
<td>出站口</td>
<td>Transportation Service</td>
<td>Railway Station</td>
<td>Exit</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>火车站</td>
<td>站台</td>
<td>Transportation Service</td>
<td>Railway Station</td>
<td>Platform</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>火车站</td>
<td>售票</td>
<td>Transportation Service</td>
<td>Railway Station</td>
<td>Sell Ticket</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>火车站</td>
<td>退票</td>
<td>Transportation Service</td>
<td>Railway Station</td>
<td>Get a Refund for a Ticket</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>火车站</td>
<td>改签</td>
<td>Transportation Service</td>
<td>Railway Station</td>
<td>Endorse the Ticket</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>火车站</td>
<td>公安制证</td>
<td>Transportation Service</td>
<td>Railway Station</td>
<td>Public Security Accreditation</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>火车站</td>
<td>票务相关</td>
<td>Transportation Service</td>
<td>Railway Station</td>
<td>Ticket Business Correlation</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>火车站</td>
<td>货运火车站</td>
<td>Transportation Service</td>
<td>Railway Station</td>
<td>Freight Railway Station</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>港口码头</td>
<td>港口码头</td>
<td>Transportation Service</td>
<td>Port &amp; Marina</td>
<td>Port &amp; Marina</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>港口码头</td>
<td>客运港</td>
<td>Transportation Service</td>
<td>Port &amp; Marina</td>
<td>Passenger Port</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>港口码头</td>
<td>车渡口</td>
<td>Transportation Service</td>
<td>Port &amp; Marina</td>
<td>Ferry Terminal for Vehicle</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>港口码头</td>
<td>人渡口</td>
<td>Transportation Service</td>
<td>Port &amp; Marina</td>
<td>Ferry Terminal</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>港口码头</td>
<td>货运港口码头</td>
<td>Transportation Service</td>
<td>Port &amp; Marina</td>
<td>Freight Ports</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>长途汽车站</td>
<td>长途汽车站</td>
<td>Transportation Service</td>
<td>Coach Station</td>
<td>Coach Station</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>地铁站</td>
<td>地铁站</td>
<td>Transportation Service</td>
<td>Subway Station</td>
<td>Subway Station</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>地铁站</td>
<td>出入口</td>
<td>Transportation Service</td>
<td>Subway Station</td>
<td>Exit</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>轻轨站</td>
<td>轻轨站</td>
<td>Transportation Service</td>
<td>Light Rail Station</td>
<td>Light Rail Station</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>公交车站</td>
<td>公交车站相关</td>
<td>Transportation Service</td>
<td>Bus Station</td>
<td>Bus Station Related</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>公交车站</td>
<td>旅游专线车站</td>
<td>Transportation Service</td>
<td>Bus Station</td>
<td>Tourist Routes Bus Station</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>公交车站</td>
<td>普通公交站</td>
<td>Transportation Service</td>
<td>Bus Station</td>
<td>Common Bus Station</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>公交车站</td>
<td>机场巴士</td>
<td>Transportation Service</td>
<td>Bus Station</td>
<td>Airport Bus</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>班车站</td>
<td>班车站</td>
<td>Transportation Service</td>
<td>Commuter Bus Station</td>
<td>Commuter Bus Station</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>停车场</td>
<td>停车场相关</td>
<td>Transportation Service</td>
<td>Parking Lot</td>
<td>Parking Lot Related</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>停车场</td>
<td>换乘停车场</td>
<td>Transportation Service</td>
<td>Parking Lot</td>
<td>Park-and-Ride Place</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>停车场</td>
<td>公共停车场</td>
<td>Transportation Service</td>
<td>Parking Lot</td>
<td>Public Parking Lot</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>停车场</td>
<td>专用停车场</td>
<td>Transportation Service</td>
<td>Parking Lot</td>
<td>Reserved Parking Lot</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>停车场</td>
<td>路边停车场</td>
<td>Transportation Service</td>
<td>Parking Lot</td>
<td>Roadside Parking Lot</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>停车场</td>
<td>停车场入口</td>
<td>Transportation Service</td>
<td>Parking Lot</td>
<td>Parking Lot Entrance</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>停车场</td>
<td>停车场出口</td>
<td>Transportation Service</td>
<td>Parking Lot</td>
<td>Parking Lot Exit</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>停车场</td>
<td>停车场出入口</td>
<td>Transportation Service</td>
<td>Parking Lot</td>
<td>Parking Lot Entrance &amp; Exit</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>过境口岸</td>
<td>过境口岸</td>
<td>Transportation Service</td>
<td>Border Crossing</td>
<td>Border Crossing</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>出租车</td>
<td>出租车</td>
<td>Transportation Service</td>
<td>Taxi</td>
<td>Taxi</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>轮渡站</td>
<td>轮渡站</td>
<td>Transportation Service</td>
<td>Ferry Station</td>
<td>Ferry Station</td>
</tr>
<tr>
<td>交通设施服务</td>
<td>索道站</td>
<td>索道站</td>
<td>Transportation Service</td>
<td>Ropeway Station</td>
<td>Ropeway Station</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>金融保险服务机构</td>
<td>金融保险机构</td>
<td>Finance &amp; Insurance Service</td>
<td>Finance &amp; Insurance Service Institution</td>
<td>Finance &amp; Insurance Institution</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>中国人民银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>The People’s Bank of China</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>国家开发银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>China Development Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>中国进出口银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>The Export-Import Bank of China</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>中国银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Bank of China</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>中国工商银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>ICBC</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>中国建设银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>China Construction Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>中国农业银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Agricultural Bank of China</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>交通银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Bank of Communications</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>招商银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>China Merchants Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>华夏银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Huaxia Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>中信银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>China CITIC Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>中国民生银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>China Minsheng Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>中国光大银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>China Everbright Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>上海银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Bank of Shanghai</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>上海浦东发展银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Shanghai Pudong Development Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>平安银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Ping An Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>兴业银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Industrial Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>北京银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Bank of Beijing</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>广发银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>CGB</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>农村商业银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Rural Commercial Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>香港恒生银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Hong Kong Hang Seng Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>东亚银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Bank of East Asia</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>花旗银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Citibank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>渣打银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Standard Chartered Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>汇丰银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>HSBC</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>荷兰银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>ABN AMRO Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>美国运通银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>American Express Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>瑞士友邦银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>AIG Private Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>美国银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Bank of America</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>蒙特利尔银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Bank of Montreal</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>纽约银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Bank of New York</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>苏格兰皇家银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>The Royal Bank of Scotland</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>法国兴业银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Societe Generale Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>德意志银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Deutsche Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>日本三菱东京日联银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Bank of Tokyo-Mitsubishi UFJ</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>巴克莱银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Barclays Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>摩根大通银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>JPMorgan Chase Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>中国邮政储蓄银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Postal Savings Bank of China</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>香港星展银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>DBS</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>南洋商业银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Nanyang Commercial Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>上海商业银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Shanghai Commercial Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>永亨银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Wing Hang Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>香港永隆银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Wing Lung Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>创兴银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Chong Hing Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>大新银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Dah Sing Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>中信银行(国际)</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>China CITIC Bank International</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>大众银行(香港)</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Public Bank (Hong Kong)</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>北京农商银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Beijing Rural Commercial Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>上海农商银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Shanghai Rural Commercial Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>广州农商银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Guangzhou Rural Commercial Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行</td>
<td>深圳农村商业银行</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank</td>
<td>Shenzhen Rural Commercial Bank</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>银行相关</td>
<td>银行相关</td>
<td>Finance &amp; Insurance Service</td>
<td>Bank Related</td>
<td>Bank Related</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>自动提款机</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>中国银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Bank of China ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>中国工商银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>ICBC ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>中国建设银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>China Construction Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>中国农业银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Agricultural Bank of China ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>交通银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Bank of Communications ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>招商银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>China Merchants Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>华夏银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Huaxia Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>中信银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>China CITIC Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>中国民生银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>China Minsheng Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>中国光大银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>China Everbright Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>上海银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Bank of Shanghai ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>上海浦东发展银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Shanghai Pudong Development Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>平安银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Ping An Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>兴业银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Industrial Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>北京银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Bank of Beijing ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>广发银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>CGB ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>农村商业银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Rural Commercial Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>香港恒生银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Hong Kong Hang Seng Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>东亚银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Bank of East Asia ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>花旗银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Citibank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>渣打银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Standard Chartered Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>汇丰银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>HSBC ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>荷兰银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>ABN AMRO Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>美国运通银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>American Express Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>瑞士友邦银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>AIG Private Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>美国银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Bank of America ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>蒙特利尔银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Bank of Montreal ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>纽约银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Bank of New York ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>苏格兰皇家银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>The Royal Bank of Scotland ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>法国兴业银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Societe Generale Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>德意志银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Deutsche Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>日本三菱东京日联银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Bank of Tokyo-Mitsubishi UFJ ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>巴克莱银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Barclays Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>摩根大通银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>JPMorgan Chase Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>中国邮政储蓄银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Postal Savings Bank of China ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>香港星展银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>DBS ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>南洋商业银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Nanyang Commercial Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>上海商业银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Shanghai Commercial Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>永亨银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Wing Hang Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>香港永隆银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Wing Lung Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>创兴银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Chong Hing Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>大新银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Dah Sing Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>中信银行(国际)ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>China CITIC Bank International ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>大众银行(香港)ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Public Bank (Hong Kong) ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>北京农商银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Beijing Rural Commercial Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>上海农商银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Shanghai Rural Commercial Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>广州农商银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Guangzhou Rural Commercial Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>自动提款机</td>
<td>深圳农村商业银行ATM</td>
<td>Finance &amp; Insurance Service</td>
<td>ATM</td>
<td>Shenzhen Rural Commercial Bank ATM</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>保险公司</td>
<td>保险公司</td>
<td>Finance &amp; Insurance Service</td>
<td>Insurance Company</td>
<td>Insurance Company</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>保险公司</td>
<td>中国人民保险公司</td>
<td>Finance &amp; Insurance Service</td>
<td>Insurance Company</td>
<td>The People’s Insurance Company of China</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>保险公司</td>
<td>中国人寿保险公司</td>
<td>Finance &amp; Insurance Service</td>
<td>Insurance Company</td>
<td>China Life Insurance Company</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>保险公司</td>
<td>中国平安保险公司</td>
<td>Finance &amp; Insurance Service</td>
<td>Insurance Company</td>
<td>Ping An Insurance Company of China</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>保险公司</td>
<td>中国再保险公司</td>
<td>Finance &amp; Insurance Service</td>
<td>Insurance Company</td>
<td>China Reinsurance Company</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>保险公司</td>
<td>中国太平洋保险</td>
<td>Finance &amp; Insurance Service</td>
<td>Insurance Company</td>
<td>China Pacific Insurance Company</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>保险公司</td>
<td>新华人寿保险公司</td>
<td>Finance &amp; Insurance Service</td>
<td>Insurance Company</td>
<td>New China Life Insurance Company</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>保险公司</td>
<td>华泰财产保险股份有限公司</td>
<td>Finance &amp; Insurance Service</td>
<td>Insurance Company</td>
<td>Huatai Property Insurance Company Ltd.</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>保险公司</td>
<td>泰康人寿保险公司</td>
<td>Finance &amp; Insurance Service</td>
<td>Insurance Company</td>
<td>Taikang Life Insurance Company</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>证券公司</td>
<td>证券公司</td>
<td>Finance &amp; Insurance Service</td>
<td>Securities Company</td>
<td>Securities Company</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>证券公司</td>
<td>证券营业厅</td>
<td>Finance &amp; Insurance Service</td>
<td>Securities Company</td>
<td>Office of Securities Business</td>
</tr>
<tr>
<td>金融保险服务</td>
<td>财务公司</td>
<td>财务公司</td>
<td>Finance &amp; Insurance Service</td>
<td>Finance Company</td>
<td>Finance Company</td>
</tr>
<tr>
<td>公司企业</td>
<td>公司企业</td>
<td>公司企业</td>
<td>Enterprises</td>
<td>Enterprises</td>
<td>Enterprises</td>
</tr>
<tr>
<td>公司企业</td>
<td>知名企业</td>
<td>知名企业</td>
<td>Enterprises</td>
<td>Famous Enterprise</td>
<td>Famous Enterprise</td>
</tr>
<tr>
<td>公司企业</td>
<td>公司</td>
<td>公司</td>
<td>Enterprises</td>
<td>Company</td>
<td>Company</td>
</tr>
<tr>
<td>公司企业</td>
<td>公司</td>
<td>广告装饰</td>
<td>Enterprises</td>
<td>Company</td>
<td>Advertisement and Decoration</td>
</tr>
<tr>
<td>公司企业</td>
<td>公司</td>
<td>建筑公司</td>
<td>Enterprises</td>
<td>Company</td>
<td>Construction Company</td>
</tr>
<tr>
<td>公司企业</td>
<td>公司</td>
<td>医药公司</td>
<td>Enterprises</td>
<td>Company</td>
<td>Medical Company</td>
</tr>
<tr>
<td>公司企业</td>
<td>公司</td>
<td>机械电子</td>
<td>Enterprises</td>
<td>Company</td>
<td>Machinery and Electronics</td>
</tr>
<tr>
<td>公司企业</td>
<td>公司</td>
<td>冶金化工</td>
<td>Enterprises</td>
<td>Company</td>
<td>Chemical and Metallurgy</td>
</tr>
<tr>
<td>公司企业</td>
<td>公司</td>
<td>网络科技</td>
<td>Enterprises</td>
<td>Company</td>
<td>Network Science and Technology</td>
</tr>
<tr>
<td>公司企业</td>
<td>公司</td>
<td>商业贸易</td>
<td>Enterprises</td>
<td>Company</td>
<td>Commercial Trade</td>
</tr>
<tr>
<td>公司企业</td>
<td>公司</td>
<td>电信公司</td>
<td>Enterprises</td>
<td>Company</td>
<td>Telecommunication Company</td>
</tr>
<tr>
<td>公司企业</td>
<td>公司</td>
<td>矿产公司</td>
<td>Enterprises</td>
<td>Company</td>
<td>Mining Company</td>
</tr>
<tr>
<td>公司企业</td>
<td>工厂</td>
<td>工厂</td>
<td>Enterprises</td>
<td>Factory</td>
<td>Factory</td>
</tr>
<tr>
<td>公司企业</td>
<td>农林牧渔基地</td>
<td>其它农林牧渔基地</td>
<td>Enterprises</td>
<td>Farming，Forestry，Animal Husbandry and Fishery Base</td>
<td>Other Farming，Forestry，Animal Husbandry and Fishery Base</td>
</tr>
<tr>
<td>公司企业</td>
<td>农林牧渔基地</td>
<td>渔场</td>
<td>Enterprises</td>
<td>Farming，Forestry，Animal Husbandry and Fishery Base</td>
<td>Fishing Farm</td>
</tr>
<tr>
<td>公司企业</td>
<td>农林牧渔基地</td>
<td>农场</td>
<td>Enterprises</td>
<td>Farming，Forestry，Animal Husbandry and Fishery Base</td>
<td>Farm</td>
</tr>
<tr>
<td>公司企业</td>
<td>农林牧渔基地</td>
<td>林场</td>
<td>Enterprises</td>
<td>Farming，Forestry，Animal Husbandry and Fishery Base</td>
<td>Forest Farm</td>
</tr>
<tr>
<td>公司企业</td>
<td>农林牧渔基地</td>
<td>牧场</td>
<td>Enterprises</td>
<td>Farming，Forestry，Animal Husbandry and Fishery Base</td>
<td>Pasture</td>
</tr>
<tr>
<td>公司企业</td>
<td>农林牧渔基地</td>
<td>家禽养殖基地</td>
<td>Enterprises</td>
<td>Farming，Forestry，Animal Husbandry and Fishery Base</td>
<td>Poultry Breeding Base</td>
</tr>
<tr>
<td>公司企业</td>
<td>农林牧渔基地</td>
<td>蔬菜基地</td>
<td>Enterprises</td>
<td>Farming，Forestry，Animal Husbandry and Fishery Base</td>
<td>Vegetable Planting Base</td>
</tr>
<tr>
<td>公司企业</td>
<td>农林牧渔基地</td>
<td>水果基地</td>
<td>Enterprises</td>
<td>Farming，Forestry，Animal Husbandry and Fishery Base</td>
<td>Fruit Cultivation Base</td>
</tr>
<tr>
<td>公司企业</td>
<td>农林牧渔基地</td>
<td>花卉苗圃基地</td>
<td>Enterprises</td>
<td>Farming，Forestry，Animal Husbandry and Fishery Base</td>
<td>Flower Nurserey Base</td>
</tr>
<tr>
<td>道路附属设施</td>
<td>道路附属设施</td>
<td>道路附属设施</td>
<td>Road Furniture</td>
<td>Road Furniture</td>
<td>Road Furniture</td>
</tr>
<tr>
<td>道路附属设施</td>
<td>警示信息</td>
<td>警示信息</td>
<td>Road Furniture</td>
<td>Warning Sign</td>
<td>Warning Sign</td>
</tr>
<tr>
<td>道路附属设施</td>
<td>警示信息</td>
<td>摄像头</td>
<td>Road Furniture</td>
<td>Warning Sign</td>
<td>Camera</td>
</tr>
<tr>
<td>道路附属设施</td>
<td>警示信息</td>
<td>测速设施</td>
<td>Road Furniture</td>
<td>Warning Sign</td>
<td>Speed Sensor</td>
</tr>
<tr>
<td>道路附属设施</td>
<td>警示信息</td>
<td>铁路道口</td>
<td>Road Furniture</td>
<td>Warning Sign</td>
<td>Railway Crossing</td>
</tr>
<tr>
<td>道路附属设施</td>
<td>警示信息</td>
<td>违章停车</td>
<td>Road Furniture</td>
<td>Warning Sign</td>
<td>Illegal Parking</td>
</tr>
<tr>
<td>道路附属设施</td>
<td>收费站</td>
<td>收费站</td>
<td>Road Furniture</td>
<td>Toll Gate</td>
<td>Toll Gate</td>
</tr>
<tr>
<td>道路附属设施</td>
<td>收费站</td>
<td>高速收费站</td>
<td>Road Furniture</td>
<td>Toll Gate</td>
<td>Expressway Toll Gate</td>
</tr>
<tr>
<td>道路附属设施</td>
<td>收费站</td>
<td>国省道收费站</td>
<td>Road Furniture</td>
<td>Toll Gate</td>
<td>National and Provincial Road Toll Gate</td>
</tr>
<tr>
<td>道路附属设施</td>
<td>收费站</td>
<td>桥洞收费站</td>
<td>Road Furniture</td>
<td>Toll Gate</td>
<td>Tunnel &amp; Bridge Toll Gate</td>
</tr>
<tr>
<td>道路附属设施</td>
<td>服务区</td>
<td>高速服务区</td>
<td>Road Furniture</td>
<td>Service Area</td>
<td>Expressway Service Area</td>
</tr>
<tr>
<td>道路附属设施</td>
<td>服务区</td>
<td>高速加油站服务区</td>
<td>Road Furniture</td>
<td>Service Area</td>
<td>Expressway Filling Station Service Area</td>
</tr>
<tr>
<td>道路附属设施</td>
<td>服务区</td>
<td>高速停车区</td>
<td>Road Furniture</td>
<td>Service Area</td>
<td>Expressway Parking Area</td>
</tr>
<tr>
<td>道路附属设施</td>
<td>红绿灯</td>
<td>红绿灯</td>
<td>Road Furniture</td>
<td>Traffic Light</td>
<td>Traffic Light</td>
</tr>
<tr>
<td>道路附属设施</td>
<td>路牌信息</td>
<td>路牌信息</td>
<td>Road Furniture</td>
<td>Signpost</td>
<td>Signpost</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>地名地址信息</td>
<td>地名地址信息</td>
<td>Place Name &amp; Address</td>
<td>Place Name &amp; Address</td>
<td>Place Name &amp; Address</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>普通地名</td>
<td>普通地名</td>
<td>Place Name &amp; Address</td>
<td>Normal Place Name</td>
<td>Normal Place Name</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>普通地名</td>
<td>国家名</td>
<td>Place Name &amp; Address</td>
<td>Normal Place Name</td>
<td>Country Name</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>普通地名</td>
<td>省级地名</td>
<td>Place Name &amp; Address</td>
<td>Normal Place Name</td>
<td>Provincial Place Name</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>普通地名</td>
<td>直辖市级地名</td>
<td>Place Name &amp; Address</td>
<td>Normal Place Name</td>
<td>Municipal Place Name</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>普通地名</td>
<td>地市级地名</td>
<td>Place Name &amp; Address</td>
<td>Normal Place Name</td>
<td>Prefecture-level Place Name</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>普通地名</td>
<td>区县级地名</td>
<td>Place Name &amp; Address</td>
<td>Normal Place Name</td>
<td>District/County-level Place Name</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>普通地名</td>
<td>乡镇级地名</td>
<td>Place Name &amp; Address</td>
<td>Normal Place Name</td>
<td>Township-level Place Name</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>普通地名</td>
<td>街道级地名</td>
<td>Place Name &amp; Address</td>
<td>Normal Place Name</td>
<td>Subdistrict-level Place Name</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>普通地名</td>
<td>村庄级地名</td>
<td>Place Name &amp; Address</td>
<td>Normal Place Name</td>
<td>Village-level Place Name</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>普通地名</td>
<td>村组级地名</td>
<td>Place Name &amp; Address</td>
<td>Normal Place Name</td>
<td>Village Team-level Place Name</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>自然地名</td>
<td>自然地名</td>
<td>Place Name &amp; Address</td>
<td>Natural Place Name</td>
<td>Natural Place Name</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>自然地名</td>
<td>海湾海峡</td>
<td>Place Name &amp; Address</td>
<td>Natural Place Name</td>
<td>Gulf and Strait</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>自然地名</td>
<td>岛屿</td>
<td>Place Name &amp; Address</td>
<td>Natural Place Name</td>
<td>Island</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>自然地名</td>
<td>山</td>
<td>Place Name &amp; Address</td>
<td>Natural Place Name</td>
<td>Mountain</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>自然地名</td>
<td>河流</td>
<td>Place Name &amp; Address</td>
<td>Natural Place Name</td>
<td>River</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>自然地名</td>
<td>湖泊</td>
<td>Place Name &amp; Address</td>
<td>Natural Place Name</td>
<td>Lake</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>交通地名</td>
<td>交通地名</td>
<td>Place Name &amp; Address</td>
<td>Transportation Place Name</td>
<td>Transportation Place Name</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>交通地名</td>
<td>道路名</td>
<td>Place Name &amp; Address</td>
<td>Transportation Place Name</td>
<td>Road Name</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>交通地名</td>
<td>路口名</td>
<td>Place Name &amp; Address</td>
<td>Transportation Place Name</td>
<td>Name of Intersection</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>交通地名</td>
<td>环岛名</td>
<td>Place Name &amp; Address</td>
<td>Transportation Place Name</td>
<td>Name of Roundabout</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>交通地名</td>
<td>高速路出口</td>
<td>Place Name &amp; Address</td>
<td>Transportation Place Name</td>
<td>Expressway Exit</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>交通地名</td>
<td>高速路入口</td>
<td>Place Name &amp; Address</td>
<td>Transportation Place Name</td>
<td>Expressway Entrance</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>交通地名</td>
<td>立交桥</td>
<td>Place Name &amp; Address</td>
<td>Transportation Place Name</td>
<td>Motorway Interchange</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>交通地名</td>
<td>桥</td>
<td>Place Name &amp; Address</td>
<td>Transportation Place Name</td>
<td>Bridge</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>交通地名</td>
<td>城市快速路出口</td>
<td>Place Name &amp; Address</td>
<td>Transportation Place Name</td>
<td>Urban Expressway Exit</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>交通地名</td>
<td>城市快速路入口</td>
<td>Place Name &amp; Address</td>
<td>Transportation Place Name</td>
<td>Urban Expressway Entrance</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>交通地名</td>
<td>隧道</td>
<td>Place Name &amp; Address</td>
<td>Transportation Place Name</td>
<td>Tunnel</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>交通地名</td>
<td>铁路</td>
<td>Place Name &amp; Address</td>
<td>Transportation Place Name</td>
<td>Railway</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>门牌信息</td>
<td>门牌信息</td>
<td>Place Name &amp; Address</td>
<td>Address Sign</td>
<td>Address Sign</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>门牌信息</td>
<td>地名门牌</td>
<td>Place Name &amp; Address</td>
<td>Address Sign</td>
<td>Placename Sign</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>门牌信息</td>
<td>道路门牌</td>
<td>Place Name &amp; Address</td>
<td>Address Sign</td>
<td>Road Name Sign</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>门牌信息</td>
<td>楼栋号</td>
<td>Place Name &amp; Address</td>
<td>Address Sign</td>
<td>Building Number</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>市中心</td>
<td>城市中心</td>
<td>Place Name &amp; Address</td>
<td>City Center</td>
<td>City Center</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>标志性建筑物</td>
<td>标志性建筑物</td>
<td>Place Name &amp; Address</td>
<td>Landmark Buildings</td>
<td>Landmark Buildings</td>
</tr>
<tr>
<td>地名地址信息</td>
<td>热点地名</td>
<td>热点地名</td>
<td>Place Name &amp; Address</td>
<td>The hot names</td>
<td>The hot names</td>
</tr>
<tr>
<td>公共设施</td>
<td>公共设施</td>
<td>公共设施</td>
<td>Public Facility</td>
<td>Public Facility</td>
<td>Public Facility</td>
</tr>
<tr>
<td>公共设施</td>
<td>报刊亭</td>
<td>报刊亭</td>
<td>Public Facility</td>
<td>Newsstand</td>
<td>Newsstand</td>
</tr>
<tr>
<td>公共设施</td>
<td>公用电话</td>
<td>公用电话</td>
<td>Public Facility</td>
<td>Public Phone</td>
<td>Public Phone</td>
</tr>
<tr>
<td>公共设施</td>
<td>公共厕所</td>
<td>公共厕所</td>
<td>Public Facility</td>
<td>Public Toilet</td>
<td>Public Toilet</td>
</tr>
<tr>
<td>公共设施</td>
<td>公共厕所</td>
<td>男洗手间</td>
<td>Public Facility</td>
<td>Public Toilet</td>
<td>Male Toilet</td>
</tr>
<tr>
<td>公共设施</td>
<td>公共厕所</td>
<td>女洗手间</td>
<td>Public Facility</td>
<td>Public Toilet</td>
<td>Female Toilet</td>
</tr>
<tr>
<td>公共设施</td>
<td>公共厕所</td>
<td>残障洗手间/无障碍洗手间</td>
<td>Public Facility</td>
<td>Public Toilet</td>
<td>Wheelchair Accessible</td>
</tr>
<tr>
<td>公共设施</td>
<td>公共厕所</td>
<td>婴儿换洗间/哺乳室/母婴室</td>
<td>Public Facility</td>
<td>Public Toilet</td>
<td>Room of Mother and Infant</td>
</tr>
<tr>
<td>公共设施</td>
<td>紧急避难场所</td>
<td>紧急避难场所</td>
<td>Public Facility</td>
<td>Emergency Shelter</td>
<td>Emergency Shelter</td>
</tr>
<tr>
<td>事件活动</td>
<td>事件活动</td>
<td>事件活动</td>
<td>Incidents and Events</td>
<td>Incidents and Events</td>
<td>Incidents and Events</td>
</tr>
<tr>
<td>事件活动</td>
<td>公众活动</td>
<td>公众活动</td>
<td>Incidents and Events</td>
<td>Public Event</td>
<td>Public Event</td>
</tr>
<tr>
<td>事件活动</td>
<td>公众活动</td>
<td>节日庆典</td>
<td>Incidents and Events</td>
<td>Public Event</td>
<td>Festival Celebration</td>
</tr>
<tr>
<td>事件活动</td>
<td>公众活动</td>
<td>展会展览</td>
<td>Incidents and Events</td>
<td>Public Event</td>
<td>Convention &amp; Exposition</td>
</tr>
<tr>
<td>事件活动</td>
<td>公众活动</td>
<td>体育赛事</td>
<td>Incidents and Events</td>
<td>Public Event</td>
<td>Sports Event</td>
</tr>
<tr>
<td>事件活动</td>
<td>公众活动</td>
<td>文艺演出</td>
<td>Incidents and Events</td>
<td>Public Event</td>
<td>Art Performance</td>
</tr>
<tr>
<td>事件活动</td>
<td>公众活动</td>
<td>大型会议</td>
<td>Incidents and Events</td>
<td>Public Event</td>
<td>Conference</td>
</tr>
<tr>
<td>事件活动</td>
<td>公众活动</td>
<td>运营活动</td>
<td>Incidents and Events</td>
<td>Public Event</td>
<td>Operating Activities</td>
</tr>
<tr>
<td>事件活动</td>
<td>公众活动</td>
<td>商场活动</td>
<td>Incidents and Events</td>
<td>Public Event</td>
<td><a href="javascript:void(0">Marketplace Activities</a>;)</td>
</tr>
<tr>
<td>事件活动</td>
<td>突发事件</td>
<td>突发事件</td>
<td>Incidents and Events</td>
<td>Emergency</td>
<td><a href="javascript:void(0">Emergency</a>;)</td>
</tr>
<tr>
<td>事件活动</td>
<td>突发事件</td>
<td>自然灾害</td>
<td>Incidents and Events</td>
<td>Emergency</td>
<td>Natural Disaster</td>
</tr>
<tr>
<td>事件活动</td>
<td>突发事件</td>
<td>事故灾难</td>
<td>Incidents and Events</td>
<td>Emergency</td>
<td>Accident</td>
</tr>
<tr>
<td>事件活动</td>
<td>突发事件</td>
<td>城市新闻</td>
<td>Incidents and Events</td>
<td>Emergency</td>
<td>City News</td>
</tr>
<tr>
<td>事件活动</td>
<td>突发事件</td>
<td>公共卫生事件</td>
<td>Incidents and Events</td>
<td>Emergency</td>
<td>Public Health Event</td>
</tr>
<tr>
<td>事件活动</td>
<td>突发事件</td>
<td>公共社会事件</td>
<td>Incidents and Events</td>
<td>Emergency</td>
<td>Public Social Event</td>
</tr>
<tr>
<td>室内设施</td>
<td>室内设施</td>
<td>室内设施</td>
<td>Indoor facilities</td>
<td>Indoor facilities</td>
<td>Indoor facilities</td>
</tr>
<tr>
<td>通行设施</td>
<td>通行设施</td>
<td>通行设施</td>
<td>Pass Facilities</td>
<td>Pass Facilities</td>
<td>Pass Facilities</td>
</tr>
<tr>
<td>通行设施</td>
<td>建筑物门</td>
<td>建筑物门</td>
<td>Pass Facilities</td>
<td>Gate of Buildings</td>
<td>Gate of Buildings</td>
</tr>
<tr>
<td>通行设施</td>
<td>建筑物门</td>
<td>建筑物正门</td>
<td>Pass Facilities</td>
<td>Gate of Buildings</td>
<td>Main Gate of Buildings</td>
</tr>
<tr>
<td>通行设施</td>
<td>临街院门</td>
<td>临街院门</td>
<td>Pass Facilities</td>
<td>Gate of Street House</td>
<td>Gate of Street House</td>
</tr>
<tr>
<td>通行设施</td>
<td>临街院门</td>
<td>临街院正门</td>
<td>Pass Facilities</td>
<td>Gate of Street House</td>
<td>Main Entrance of Street House Gate</td>
</tr>
<tr>
<td>通行设施</td>
<td>虚拟门</td>
<td>虚拟门</td>
<td>Pass Facilities</td>
<td>Virtual Gate</td>
<td>Virtual Gate</td>
</tr>
</tbody>
</table>
<p>收集的内容范围纯主观，不定期更新。</p>

<div id="gitalk-container"></div>
<script src="https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

		<script>
		var gitalkConfig = {"clientID":"e6b75c64218ff017ed19","clientSecret":"bd6f2fb48b56274cc02080a5101296ec76990244","repo":"yuanrui.github.io","owner":"yuanrui","admin":["yuanrui"],"distractionFreeMode":false};
	    gitalkConfig.id = md5(location.pathname);
		var gitalk = new Gitalk(gitalkConfig);
	    gitalk.render("gitalk-container");
	    </script>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/资料文档/">资料文档</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2020/12/16/Spring-learning-spring-data-JPA-mysql/" title="Spring学习：数据访问层采用JPA集成MySQL" itemprop="url">Spring学习：数据访问层采用JPA集成MySQL</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Banana" target="_blank" itemprop="author">Banana</a>
		
  <p class="article-time">
    <time datetime="2020-12-16T05:58:00.000Z" itemprop="datePublished"> Published 2020-12-16</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="数据访问层采用JPA集成MySQL"><a href="#数据访问层采用JPA集成MySQL" class="headerlink" title="数据访问层采用JPA集成MySQL"></a>数据访问层采用JPA集成MySQL</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>JPA采用仓库模式实现数据持久化处理，它屏蔽底层处理细节，简化开发应用程序时对数据源处理的过程。数据访问层采用JPA，主要以Java实体类为核心，实体类封装数据字典映射数据表，结合仓库类实现数据的CRUD. 需要知道的是JPA是Java Persistence API的缩写。</p>
<p>MySQL是常见的开源免费关系型数据库，应用广泛支持良好，一般作为项目开发的首选。此次学习我们采用IDEA搭建Spring Data JPA + MySQL项目。</p>
<h2 id="项目搭建"><a href="#项目搭建" class="headerlink" title="项目搭建"></a>项目搭建</h2><ol>
<li>创建新项目</li>
</ol>
<img src="/2020/12/16/Spring-learning-spring-data-JPA-mysql/image-20201216143045844.png" class="">
<ol start="2">
<li>初始化项目，设置Group、Artifact、Package，项目采用Maven构建，Java版本采用v8</li>
</ol>
<img src="/2020/12/16/Spring-learning-spring-data-JPA-mysql/image-20201216143226651.png" class="">
<ol start="3">
<li>项目依赖选择：Spring Boot DevTools、Lombok、Spring Web、Thymeleaf、Spring Data JPA、MySQL Driver.</li>
</ol>
<img src="/2020/12/16/Spring-learning-spring-data-JPA-mysql/image-20201216143548925.png" class="">
<ol start="4">
<li>完成项目创建</li>
</ol>
<img src="/2020/12/16/Spring-learning-spring-data-JPA-mysql/image-20201216143827567.png" class="">
<h2 id="项目配置"><a href="#项目配置" class="headerlink" title="项目配置"></a>项目配置</h2><ol>
<li>修改application.properties为application.yml</li>
</ol>
<img src="/2020/12/16/Spring-learning-spring-data-JPA-mysql/image-20201216144257396.png" class="">
<ol start="2">
<li><p>设置配置文件</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10016</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/test_db?useTimezone=true&amp;serverTimezone=GMT%2b8&amp;characterEncoding=utf8</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">testUser</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">testPwdxxxxxx</span></span><br><span class="line">  <span class="attr">jpa:</span></span><br><span class="line">    <span class="attr">database:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">show-sql:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">generate-ddl:</span> <span class="literal">true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol start="3">
<li><p>pom依赖配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">exclude</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="项目编码"><a href="#项目编码" class="headerlink" title="项目编码"></a>项目编码</h2><h3 id="项目分层"><a href="#项目分层" class="headerlink" title="项目分层"></a>项目分层</h3><p>在项目正式编码前，我们简单的定义下各个package，用于项目分层化分解。</p>
<p>config包：存放项目启动相关配置类；</p>
<p>controller包：存放spring mvc Controller类；</p>
<p>domain.entity包：存放数据表相关实体类，实体类用于映射数据表；</p>
<p>domain.enums包：存放枚举类型；</p>
<p>domain.model包：存放自定义模型，用于封装数据表以外的数据结构；</p>
<p>repository包：存放仓库类，提供数据的CRUD功能；</p>
<img src="/2020/12/16/Spring-learning-spring-data-JPA-mysql/image-20201216164013081.png" class="">
<h3 id="定义实体类"><a href="#定义实体类" class="headerlink" title="定义实体类"></a>定义实体类</h3><p>使用JPA作为数据访问层的第一步是封装定义数据实体类。在UserEntity实体类中，封装映射t_user表相关字段。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.banana.authserver.domain.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YuanRui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2020-12-16 15:38:51</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Table(name = &quot;t_user&quot;)</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserEntity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Boolean disabled;</span><br><span class="line">    <span class="keyword">private</span> Boolean expired;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取 编号</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.AUTO)</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;id&quot;, nullable = false)</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置 编号</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取 用户名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;name&quot;, nullable = true, length=255)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置 用户名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取 密码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;password&quot;, nullable = true, length=255)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置 密码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取 是否禁用</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;disabled&quot;, nullable = false)</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">getDisabled</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.disabled;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置 是否禁用</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDisabled</span><span class="params">(Boolean disabled)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.disabled = disabled;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取 是否过期</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Basic</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;expired&quot;, nullable = false)</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">getExpired</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.expired;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置 是否过期</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setExpired</span><span class="params">(Boolean expired)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.expired = expired;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="创建仓库接口"><a href="#创建仓库接口" class="headerlink" title="创建仓库接口"></a>创建仓库接口</h3><p>创建UserRepository接口，使用@Repository注解，继承CrudRepository、JpaRepository、JpaSpecificationExecutor，实现对数据表t_user的CRUD.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.banana.authserver.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.banana.authserver.domain.entity.UserEntity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.JpaSpecificationExecutor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.Query;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.repository.CrudRepository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YuanRui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2020-12-16 15:33:08</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserRepository</span> <span class="keyword">extends</span> <span class="title class_">CrudRepository</span>&lt;UserEntity, Integer&gt;, JpaRepository&lt;UserEntity, Integer&gt;, JpaSpecificationExecutor&lt;UserEntity&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="创建控制器类"><a href="#创建控制器类" class="headerlink" title="创建控制器类"></a>创建控制器类</h3><p>创建HomeController，使用@Controller注解，创建一个action方法: index. index方法内部调用仓库接口，获取所有用户列表，并将模型数据传递到页面。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">package org.banana.authserver.controller;</span><br><span class="line"></span><br><span class="line">import org.banana.authserver.domain.entity.UserEntity;</span><br><span class="line">import org.banana.authserver.repository.UserRepository;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.ui.Model;</span><br><span class="line">import org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author yuanrui@live.cn</span><br><span class="line"> * @since 2020/12/16 15:47</span><br><span class="line"> */</span><br><span class="line">@Controller</span><br><span class="line">public class HomeController &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    UserRepository userRepository;</span><br><span class="line"></span><br><span class="line">    @GetMapping( value = &#123; &quot;/&quot;, &quot;/index&quot;&#125;)</span><br><span class="line">    public String index(Model model) &#123;</span><br><span class="line">        List&lt;UserEntity&gt; all = userRepository.findAll();</span><br><span class="line"></span><br><span class="line">        List list = new ArrayList&lt;String&gt;();</span><br><span class="line">        for (UserEntity ent : all)&#123;</span><br><span class="line">            list.add(ent.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        String users = String.join(&quot;,&quot;, list);</span><br><span class="line"></span><br><span class="line">        model.addAttribute(&quot;users&quot;, users);</span><br><span class="line"></span><br><span class="line">        return &quot;index&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在资源文件夹resources的templates中创建index.html文件，编辑代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;系统首页&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">系统用户：[[$&#123;users&#125;]]</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>Shift+F9调试项目，在浏览器中打开：<a target="_blank" rel="noopener" href="http://localhost:10016/">http://localhost:10016/</a></p>
<img src="/2020/12/16/Spring-learning-spring-data-JPA-mysql/image-20201216163636095.png" class="">
<h3 id="MySQL脚本"><a href="#MySQL脚本" class="headerlink" title="MySQL脚本"></a>MySQL脚本</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for t_user</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `t_user`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `t_user`  (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;编号&#x27;</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户名&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">  `disabled` bit(<span class="number">1</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> b<span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;是否禁用&#x27;</span>,</span><br><span class="line">  `expired` bit(<span class="number">1</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> b<span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;是否过期&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB AUTO_INCREMENT <span class="operator">=</span> <span class="number">3</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of t_user</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `t_user` <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, b<span class="string">&#x27;0&#x27;</span>, b<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `t_user` <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, b<span class="string">&#x27;0&#x27;</span>, b<span class="string">&#x27;0&#x27;</span>);</span><br></pre></td></tr></table></figure>

<div id="gitalk-container"></div>
<script src="https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

		<script>
		var gitalkConfig = {"clientID":"e6b75c64218ff017ed19","clientSecret":"bd6f2fb48b56274cc02080a5101296ec76990244","repo":"yuanrui.github.io","owner":"yuanrui","admin":["yuanrui"],"distractionFreeMode":false};
	    gitalkConfig.id = md5(location.pathname);
		var gitalk = new Gitalk(gitalkConfig);
	    gitalk.render("gitalk-container");
	    </script>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/学习笔记/">学习笔记</a><a href="/tags/Java/">Java</a><a href="/tags/Spring/">Spring</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2020/09/17/Unified-identity-authentication-system-platform/" title="统一身份认证系统平台功能设计" itemprop="url">统一身份认证系统平台功能设计</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Banana" target="_blank" itemprop="author">Banana</a>
		
  <p class="article-time">
    <time datetime="2020-09-17T07:02:00.000Z" itemprop="datePublished"> Published 2020-09-17</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="统一身份认证系统平台功能设计"><a href="#统一身份认证系统平台功能设计" class="headerlink" title="统一身份认证系统平台功能设计"></a>统一身份认证系统平台功能设计</h1><h2 id="系统设置"><a href="#系统设置" class="headerlink" title="系统设置"></a>系统设置</h2><h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><p>用户属性：账户、密码、盐值、姓名、电话、角色ID、组织机构ID、数字证书（编号、路径）、密码更新时间、密码错误次数、账户有效期、是否启用、备注；<br>密码连续错误次数 &gt; 5 为锁定状态；正确则置0；</p>
<h3 id="角色管理"><a href="#角色管理" class="headerlink" title="角色管理"></a>角色管理</h3><p>角色属性：角色ID、角色名称、权限项（集合）</p>
<h3 id="权限项管理"><a href="#权限项管理" class="headerlink" title="权限项管理"></a>权限项管理</h3><p>权限项属性：权限ID、应用ID、对象名称、权限类型（菜单、按钮、API）、URL、关联权限项（多个）、备注、排序编号。</p>
<h3 id="组织机构管理"><a href="#组织机构管理" class="headerlink" title="组织机构管理"></a>组织机构管理</h3><p>组织机构属性：组织机构ID、名称、代码、上级ID、级别;</p>
<h3 id="应用系统"><a href="#应用系统" class="headerlink" title="应用系统"></a>应用系统</h3><p>应用系统属性：应用ID、系统名称、图标、系统令牌、加密算法；</p>
<h3 id="安全参数"><a href="#安全参数" class="headerlink" title="安全参数"></a>安全参数</h3><p>参数：密码强度、密码有效期、初次登录必须修改密码；<br>密码强度：低：无限制<br>中：长度&gt;5; 至少2种字符组合<br>高：长度&gt;7; 至少3种字符组合<br>密码有效期：无期限、3个月、6个月、12个月；<br>密码加密方式：使用SHA256哈希算法加密加密盐值+密码原文，数据库保存加密后的密文。<br>IP登录范围：未设置时允许所有IP登录。</p>
<h3 id="日志管理"><a href="#日志管理" class="headerlink" title="日志管理"></a>日志管理</h3><p>记录所有的接口日志 和 IP;<br>对非授权的接口访问视为攻击行为，并记入安全事件日志。</p>
<h3 id="数据字典"><a href="#数据字典" class="headerlink" title="数据字典"></a>数据字典</h3><p>数据字典属性：编号、字典分类、字典名称、字典值、是否启用、排序编号。</p>
<h2 id="业务逻辑"><a href="#业务逻辑" class="headerlink" title="业务逻辑"></a>业务逻辑</h2><p>统一权限系统接口基于OAuth2.0实现验证授权流程。该接口供内部或第三方登录访问授权。</p>
<p>加密算法采用RSA 2048位进行加密解密和签名，由统一权限系统创建公钥和私钥，私钥由统一权限系统持有，公钥由第三方应用持有。采用密码模式登录时，由第三方应用将密码原文用公钥进行加密，系统收到密文后采用对应的私钥进行解码，解密原文后再使用SHA256哈希算法加密加密盐值+密码原文于数据库中的密码进行比对。</p>
<p>登录完成后系统分配Access Token，Access Token采用<a target="_blank" rel="noopener" href="https://jwt.io/">JWT</a> 格式，JWT包含头部、载荷、签名三部分。JWT采用统一权限系统发布的私钥进行签名，第三方应用接收到JWT之后使用公钥进行验证有效性。</p>
<p>JWT载荷JSON格式如下：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>英文全称</th>
<th>是否必须</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>iss</td>
<td>Issuer Identifier</td>
<td>是</td>
<td>统一权限系统URL，用于提供认证信息者的唯一标识。一般是一个https的url（不包含querystring和fragment部分）。</td>
</tr>
<tr>
<td>sub</td>
<td>Subject Identifier</td>
<td>是</td>
<td>iss提供的最终用户的标识，即用户名，在iss范围内唯一。它会被RP用来标识唯一的用户。最长为255个ASCII个字符。</td>
</tr>
<tr>
<td>name</td>
<td>Name</td>
<td>是</td>
<td>用户显示名称。</td>
</tr>
<tr>
<td>aud</td>
<td>Audience(s)</td>
<td>是</td>
<td>应用编号（AppId）</td>
</tr>
<tr>
<td>exp</td>
<td>Expiration time</td>
<td>是</td>
<td>过期时间，超过此时间的Access Token会作废不再被验证通过。</td>
</tr>
<tr>
<td>iat</td>
<td>Issued At Time</td>
<td>是</td>
<td>JWT的构建的时间。</td>
</tr>
<tr>
<td>nonce</td>
<td>Nonce</td>
<td>是</td>
<td>发送请求的时候提供的随机字符串，用来减缓重放攻击，也可以来关联Access Token和受信客户端本身的Session信息。</td>
</tr>
<tr>
<td>role</td>
<td>Role</td>
<td>否</td>
<td>角色名称</td>
</tr>
<tr>
<td>isa</td>
<td>Is Super Admin</td>
<td>否</td>
<td>是否超级管理员</td>
</tr>
</tbody>
</table>
<p>JSON内容示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;sub&quot;: &quot;SuperAdmin&quot;,</span><br><span class="line">  &quot;name&quot;: &quot;超级管理员&quot;,</span><br><span class="line">  &quot;iss&quot;: &quot;http://192.168.1.100&quot;,</span><br><span class="line">  &quot;aud&quot;: &quot;TIMS-Client-1&quot;,</span><br><span class="line">  &quot;isa&quot;: true,</span><br><span class="line">  &quot;nonce&quot;: &quot;ABCAV32hkKG&quot;,</span><br><span class="line">  &quot;role&quot;: &quot;管理员&quot;,</span><br><span class="line">  &quot;exp&quot;: 1598851053729,</span><br><span class="line">  &quot;iat&quot;: 1598246196411</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="前后端分离系统权限控制流程"><a href="#前后端分离系统权限控制流程" class="headerlink" title="前后端分离系统权限控制流程"></a>前后端分离系统权限控制流程</h4><img src="/2020/09/17/Unified-identity-authentication-system-platform/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E7%B3%BB%E7%BB%9F%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6%E6%B5%81%E7%A8%8B.png" class="">
<h4 id="应用程序登录权限控制流程"><a href="#应用程序登录权限控制流程" class="headerlink" title="应用程序登录权限控制流程"></a>应用程序登录权限控制流程</h4><img src="/2020/09/17/Unified-identity-authentication-system-platform/%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%99%BB%E5%BD%95%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6%E6%B5%81%E7%A8%8B.png" class="">
<h2 id="接口定义"><a href="#接口定义" class="headerlink" title="接口定义"></a>接口定义</h2><h4 id="1-获取Authorization-Code"><a href="#1-获取Authorization-Code" class="headerlink" title="1.获取Authorization Code"></a>1.获取Authorization Code</h4><p><strong>请求地址:</strong> <code>/oauth2/authorize</code></p>
<p><strong>请求方法:</strong> GET</p>
<p><strong>请求参数:</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">名称</th>
<th style="text-align:left">必须</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">client_id</td>
<td style="text-align:left">是</td>
<td style="text-align:left">long</td>
<td style="text-align:left">申请应用时分配的应用ID</td>
</tr>
<tr>
<td style="text-align:left">redirect_uri</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">授权回调地址, 必须和申请应用是填写的一致(参数部分可不一致)</td>
</tr>
<tr>
<td style="text-align:left">response_type</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">描述获取授权的方式， Authorization Code方式授权, <strong>response_type=code</strong></td>
</tr>
<tr>
<td style="text-align:left">scope</td>
<td style="text-align:left">否</td>
<td style="text-align:left">string</td>
<td style="text-align:left">申请scope权限所需参数，可一次申请多个scope权限，用空格分隔。</td>
</tr>
<tr>
<td style="text-align:left">state</td>
<td style="text-align:left">否</td>
<td style="text-align:left">string</td>
<td style="text-align:left">用于保持请求和回调的状态，授权请求成功后原样带回给第三方，该参数用于防止 CSRF攻击（跨站请求伪造攻击），强烈建议第三方带上该参数</td>
</tr>
</tbody>
</table>
<p><strong>返回值:</strong></p>
<ul>
<li><strong>成功响应</strong></li>
</ul>
<p>如果授权成功，授权服务器会将用户的浏览器重定向到<code>redirect_uri</code>，并带上<code>code</code>，<code>state</code>等参数，例子如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://example.com/example?code=CODE&amp;state=STATE</span><br></pre></td></tr></table></figure>
<p><strong>返回参数说明：</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">名称</th>
<th style="text-align:left">必须</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">code</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">用来换取<code>access_token</code>的授权码，有效期为5分钟且只能用一次</td>
</tr>
<tr>
<td style="text-align:left">state</td>
<td style="text-align:left">否</td>
<td style="text-align:left">string</td>
<td style="text-align:left">如果请求时传递参数，会回传该参数</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>失败响应</strong></li>
</ul>
<p>如果授权失败，授权服务器会将用户的浏览器重定向到<code>redirect_uri</code>，并带上<code>error</code>，<code>error_description</code>, <code>state</code>等参数，例子如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://example.com/example?error=ERROR&amp;error_description=ERROR_DESCRIPTION&amp;state=STATE</span><br></pre></td></tr></table></figure>
<p><strong>返回参数说明：</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">名称</th>
<th style="text-align:left">必须</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">error</td>
<td style="text-align:left">是</td>
<td style="text-align:left">int</td>
<td style="text-align:left">OAuth定义的错误码</td>
</tr>
<tr>
<td style="text-align:left">error_description</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">错误描述信息</td>
</tr>
<tr>
<td style="text-align:left">state</td>
<td style="text-align:left">否</td>
<td style="text-align:left">string</td>
<td style="text-align:left">如果请求时传递参数，会回传该参数</td>
</tr>
</tbody>
</table>
<h4 id="2-获取Access-Token"><a href="#2-获取Access-Token" class="headerlink" title="2.获取Access Token"></a>2.获取Access Token</h4><p><strong>请求地址:</strong> <code>/oauth2/access_token</code></p>
<p><strong>请求方法:</strong> GET</p>
<p><strong>请求参数:</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">名称</th>
<th style="text-align:left">必须</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">client_id</td>
<td style="text-align:left">是</td>
<td style="text-align:left">long</td>
<td style="text-align:left">申请应用时分配的应用ID</td>
</tr>
<tr>
<td style="text-align:left">redirect_uri</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">授权回调地址, 必须和申请应用是填写的一致(参数部分可不一致)</td>
</tr>
<tr>
<td style="text-align:left">client_secret</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">申请应用时分配的系统令牌</td>
</tr>
<tr>
<td style="text-align:left">grant_type</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">固定为authorization_code</td>
</tr>
<tr>
<td style="text-align:left">code</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">第1小节中拿到的授权码</td>
</tr>
</tbody>
</table>
<p><strong>返回值:</strong></p>
<ul>
<li><strong>成功响应</strong></li>
</ul>
<p>如果请求成功，授权服务器会返回JSON格式的字符串：</p>
<ol>
<li>access_token: 要获取的Access Token</li>
<li>token_type: token类别，固定为bearer（RFC6750 定义）</li>
<li>expires_in: Access Token的有效期，以秒为单位。</li>
<li>refresh_token: 用于刷新Access Token 的 Refresh Token,所有应用都会返回该参数（10年的有效期）</li>
<li>scope: Access Token最终的访问范围，关于权限的具体信息参考scope权限列表</li>
<li>openId: 用户统一标识，可以唯一标识一个用户.网站或应用可将此ID进行存储，便于用户下次登录时辨识其身份</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  &quot;access_token&quot;: &quot;access token value&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;token_type&quot;: &quot;Bearer&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;expires_in&quot;: 360000,</span><br><span class="line"></span><br><span class="line">  &quot;refresh_token&quot;: &quot;refresh token value&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;scope&quot;: &quot;scope value&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;openId&quot;:&quot;OPENID&quot;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>失败响应</strong></li>
</ul>
<p>如果请求失败，授权服务器会返回JSON格式的字符串：</p>
<ol>
<li>error：错误码，是一个int类型的数字 请参考OAuth定义的错误码</li>
<li>error_description：一段可读的文字，用来帮助理解和解决发生的错误</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  &quot;error&quot;: &quot;error_code&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;error_description&quot;: &quot;错误描述&quot;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-Refresh-Token刷新接口"><a href="#3-Refresh-Token刷新接口" class="headerlink" title="3.Refresh Token刷新接口"></a>3.Refresh Token刷新接口</h4><p><strong>请求地址:</strong> <code>/oauth2/refresh_token</code></p>
<p><strong>请求方法:</strong> GET</p>
<p><strong>请求参数:</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">名称</th>
<th style="text-align:left">必须</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">client_id</td>
<td style="text-align:left">是</td>
<td style="text-align:left">long</td>
<td style="text-align:left">申请应用时分配的 <strong>App Id</strong></td>
</tr>
<tr>
<td style="text-align:left">redirect_uri</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">授权回调地址, 必须和申请应用是填写的一致(参数部分可不一致)</td>
</tr>
<tr>
<td style="text-align:left">client_secret</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">申请应用时分配的 <strong>App Secret</strong></td>
</tr>
<tr>
<td style="text-align:left">grant_type</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">固定为refresh_token</td>
</tr>
<tr>
<td style="text-align:left">refresh_token</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">请求授权成功时获取的刷新令牌</td>
</tr>
</tbody>
</table>
<p><strong>返回值数据:</strong></p>
<ul>
<li><strong>成功响应</strong></li>
</ul>
<p>如果请求成功，授权服务器会返回JSON格式的字符串:</p>
<ol>
<li>access_token: 要获取的Access Token</li>
<li>expires_in: Access Token的有效期，以秒为单位, 请参考Access Token生命周期</li>
<li>refresh_token: 用于刷新Access Token 的 Refresh Token,所有应用都会返回该参数（10年的有效期）</li>
<li>scope: Access Token最终的访问范围，关于权限的具体信息参考scope权限列表</li>
<li>openId: 用户统一标识，可以唯一标识一个用户.网站或应用可将此ID进行存储，便于用户下次登录时辨识其身份</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  &quot;access_token&quot;: &quot;access token value&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;expires_in&quot;: 360000,</span><br><span class="line"></span><br><span class="line">  &quot;refresh_token&quot;: &quot;refresh token value&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;scope&quot;: &quot;scope value&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;openId&quot;:&quot;2.0XXXXXXXXX&quot;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>失败响应</strong></li>
</ul>
<p>如果请求失败，授权服务器会返回JSON格式的字符串：</p>
<ol>
<li>error：错误码，是一个int类型的数字 请参考OAuth定义的错误码</li>
<li>error_description：一段人类可读的文字，用来帮助理解和解决发生的错误</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  &quot;error&quot;: &quot;error_code&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;error_description&quot;: &quot;错误描述&quot;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-密码模式登录"><a href="#4-密码模式登录" class="headerlink" title="4.密码模式登录"></a>4.密码模式登录</h4><p><strong>请求地址:</strong> <code>/oauth2/signin</code></p>
<p><strong>请求方法:</strong> GET</p>
<p><strong>请求参数:</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">名称</th>
<th style="text-align:left">必须</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">client_id</td>
<td style="text-align:left">是</td>
<td style="text-align:left">long</td>
<td style="text-align:left">申请应用时分配的应用ID</td>
</tr>
<tr>
<td style="text-align:left">client_secret</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">申请应用时分配的系统令牌</td>
</tr>
<tr>
<td style="text-align:left">grant_type</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">固定为password</td>
</tr>
<tr>
<td style="text-align:left">username</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">用户名</td>
</tr>
<tr>
<td style="text-align:left">password</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">密码，密码采用RSA公钥加密</td>
</tr>
</tbody>
</table>
<p><strong>返回值:</strong></p>
<ul>
<li><strong>成功响应</strong></li>
</ul>
<p>如果请求成功，授权服务器会返回JSON格式的字符串：</p>
<ol>
<li>access_token: 要获取的Access Token</li>
<li>expires_in: Access Token的有效期，以秒为单位。</li>
<li>refresh_token: 用于刷新Access Token 的 Refresh Token,所有应用都会返回该参数（10年的有效期）</li>
<li>scope: Access Token最终的访问范围，关于权限的具体信息参考scope权限列表</li>
<li>openId: 用户统一标识，可以唯一标识一个用户.网站或应用可将此ID进行存储，便于用户下次登录时辨识其身份</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  &quot;access_token&quot;: &quot;access token value&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;expires_in&quot;: 360000,</span><br><span class="line"></span><br><span class="line">  &quot;refresh_token&quot;: &quot;refresh token value&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;scope&quot;: &quot;scope value&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;openId&quot;:&quot;OPENID&quot;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>失败响应</strong></li>
</ul>
<p>如果请求失败，授权服务器会返回JSON格式的字符串：</p>
<ol>
<li>error：错误码，是一个int类型的数字 请参考OAuth定义的错误码</li>
<li>error_description：一段可读的文字，用来帮助理解和解决发生的错误</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  &quot;error&quot;: &quot;error_code&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;error_description&quot;: &quot;错误描述&quot;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="5-获取用户信息"><a href="#5-获取用户信息" class="headerlink" title="5. 获取用户信息"></a>5. 获取用户信息</h4><p><strong>请求地址:</strong> <code>/oauth2/account_profile</code></p>
<p><strong>请求方法:</strong> GET</p>
<p><strong>请求参数:</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">名称</th>
<th style="text-align:left">必须</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">clientId</td>
<td style="text-align:left">是</td>
<td style="text-align:left">long</td>
<td style="text-align:left">申请应用时分配的APP ID</td>
</tr>
<tr>
<td style="text-align:left">token</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">用户授权得到的访问令牌（Access Token）</td>
</tr>
</tbody>
</table>
<p><strong>返回值:</strong></p>
<ul>
<li><strong>成功</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  &quot;result&quot;: &quot;ok&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;description&quot;: &quot;成功&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;data&quot;: &#123;</span><br><span class="line"></span><br><span class="line">            &quot;name&quot;: &quot;用户编号&quot;,</span><br><span class="line"></span><br><span class="line">            &quot;userName&quot;: &quot;用户姓名&quot;,</span><br><span class="line">            </span><br><span class="line">            &quot;email&quot;: &quot;电子邮箱&quot;,</span><br><span class="line"></span><br><span class="line">            &quot;role&quot;: &quot;角色名称，多个用英文逗号分隔&quot;</span><br><span class="line"></span><br><span class="line">           &#125;,</span><br><span class="line"></span><br><span class="line">  &quot;code&quot;: 0</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>失败</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">   &quot;result&quot;: &quot;error&quot;,</span><br><span class="line"></span><br><span class="line">   &quot;description&quot;: &quot;错误描述&quot;,</span><br><span class="line"></span><br><span class="line">   &quot;code&quot;: &quot;错误码&quot;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="6-获取用户权限"><a href="#6-获取用户权限" class="headerlink" title="6. 获取用户权限"></a>6. 获取用户权限</h4><p><strong>请求地址:</strong> <code>/oauth2/get_permission</code></p>
<p><strong>请求方法:</strong> GET</p>
<p><strong>请求参数:</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">名称</th>
<th style="text-align:left">必须</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">clientId</td>
<td style="text-align:left">是</td>
<td style="text-align:left">long</td>
<td style="text-align:left">申请应用时分配的APP ID</td>
</tr>
<tr>
<td style="text-align:left">token</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">用户授权得到的访问令牌（Access Token）</td>
</tr>
</tbody>
</table>
<p><strong>返回值:</strong></p>
<ul>
<li><strong>成功</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  &quot;result&quot;: &quot;ok&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;description&quot;: &quot;成功&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;data&quot;: [&#123;</span><br><span class="line">            &quot;id&quot;: &quot;权限编号&quot;,</span><br><span class="line"></span><br><span class="line">            &quot;name&quot;: &quot;用户编号&quot;,</span><br><span class="line"></span><br><span class="line">            &quot;parentId&quot;: &quot;父权限编号&quot;,</span><br><span class="line">            </span><br><span class="line">            &quot;url&quot;: &quot;权限地址&quot;,</span><br><span class="line">            </span><br><span class="line">            &quot;icon&quot;: &quot;图标&quot;,</span><br><span class="line"></span><br><span class="line">            &quot;renderForm&quot;: &quot;呈现形式(0:菜单 1:按钮)&quot;,</span><br><span class="line"></span><br><span class="line">            &quot;openMode&quot;: &quot;打开方式(0:内部,1:弹窗)&quot;</span><br><span class="line">           &#125;</span><br><span class="line">          ]</span><br><span class="line"></span><br><span class="line">  &quot;code&quot;: 0</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>失败</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">   &quot;result&quot;: &quot;error&quot;,</span><br><span class="line"></span><br><span class="line">   &quot;description&quot;: &quot;错误描述&quot;,</span><br><span class="line"></span><br><span class="line">   &quot;code&quot;: &quot;错误码&quot;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="7-获取数据字典"><a href="#7-获取数据字典" class="headerlink" title="7. 获取数据字典"></a>7. 获取数据字典</h4><p><strong>请求地址:</strong> <code>/oauth2/get_dict</code></p>
<p><strong>请求方法:</strong> GET</p>
<p><strong>请求参数:</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">名称</th>
<th style="text-align:left">必须</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">clientId</td>
<td style="text-align:left">是</td>
<td style="text-align:left">long</td>
<td style="text-align:left">申请应用时分配的APP ID</td>
</tr>
<tr>
<td style="text-align:left">token</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">用户授权得到的访问令牌（Access Token）</td>
</tr>
<tr>
<td style="text-align:left">categoryId</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">字典分类</td>
</tr>
</tbody>
</table>
<p><strong>返回值:</strong></p>
<ul>
<li><strong>成功</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  &quot;result&quot;: &quot;ok&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;description&quot;: &quot;成功&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;data&quot;: [&#123;</span><br><span class="line">            &quot;key&quot;: &quot;字典Key&quot;,</span><br><span class="line"></span><br><span class="line">            &quot;value&quot;: &quot;字典Value&quot;      </span><br><span class="line">           &#125;</span><br><span class="line">          ]</span><br><span class="line"></span><br><span class="line">  &quot;code&quot;: 0</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>失败</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">   &quot;result&quot;: &quot;error&quot;,</span><br><span class="line"></span><br><span class="line">   &quot;description&quot;: &quot;错误描述&quot;,</span><br><span class="line"></span><br><span class="line">   &quot;code&quot;: &quot;错误码&quot;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="8-获取组织机构"><a href="#8-获取组织机构" class="headerlink" title="8. 获取组织机构"></a>8. 获取组织机构</h4><p><strong>请求地址:</strong> <code>/oauth2/get_org</code></p>
<p><strong>请求方法:</strong> GET</p>
<p><strong>请求参数:</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">名称</th>
<th style="text-align:left">必须</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">token</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">用户授权得到的访问令牌（Access Token）</td>
</tr>
</tbody>
</table>
<p><strong>返回值:</strong></p>
<ul>
<li><strong>成功</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  &quot;result&quot;: &quot;ok&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;description&quot;: &quot;成功&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;data&quot;: [&#123;</span><br><span class="line">            &quot;id&quot;: &quot;组织机构编号&quot;,</span><br><span class="line"></span><br><span class="line">            &quot;name&quot;: &quot;组织机构名称&quot;,</span><br><span class="line"></span><br><span class="line">            &quot;parentId&quot;: &quot;组织机构父编号&quot;,</span><br><span class="line"></span><br><span class="line">            &quot;remark&quot;: &quot;备注&quot;</span><br><span class="line">           &#125;</span><br><span class="line">          ]</span><br><span class="line"></span><br><span class="line">  &quot;code&quot;: 0</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>失败</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">   &quot;result&quot;: &quot;error&quot;,</span><br><span class="line"></span><br><span class="line">   &quot;description&quot;: &quot;错误描述&quot;,</span><br><span class="line"></span><br><span class="line">   &quot;code&quot;: &quot;错误码&quot;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="9-权限校验"><a href="#9-权限校验" class="headerlink" title="9. 权限校验"></a>9. 权限校验</h4><p><strong>请求地址:</strong> <code>/oauth2/verify_permission</code></p>
<p><strong>请求方法:</strong> GET</p>
<p><strong>请求参数:</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">名称</th>
<th style="text-align:left">必须</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">token</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">用户授权得到的访问令牌（Access Token）</td>
</tr>
<tr>
<td style="text-align:left">permissionId</td>
<td style="text-align:left">是</td>
<td style="text-align:left">string</td>
<td style="text-align:left">权限编号</td>
</tr>
</tbody>
</table>
<p><strong>返回值:</strong></p>
<ul>
<li><strong>成功</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  &quot;result&quot;: &quot;ok&quot;,</span><br><span class="line"></span><br><span class="line">  &quot;description&quot;: &quot;成功&quot;,</span><br><span class="line">  </span><br><span class="line">  &quot;code&quot;: 0</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>失败</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">   &quot;result&quot;: &quot;error&quot;,</span><br><span class="line"></span><br><span class="line">   &quot;description&quot;: &quot;错误描述&quot;,</span><br><span class="line"></span><br><span class="line">   &quot;code&quot;: &quot;错误码&quot;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="数据库设计"><a href="#数据库设计" class="headerlink" title="数据库设计"></a>数据库设计</h2><img src="/2020/09/17/Unified-identity-authentication-system-platform/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1.png" class="">
<div id="gitalk-container"></div>
<script src="https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

		<script>
		var gitalkConfig = {"clientID":"e6b75c64218ff017ed19","clientSecret":"bd6f2fb48b56274cc02080a5101296ec76990244","repo":"yuanrui.github.io","owner":"yuanrui","admin":["yuanrui"],"distractionFreeMode":false};
	    gitalkConfig.id = md5(location.pathname);
		var gitalk = new Gitalk(gitalkConfig);
	    gitalk.render("gitalk-container");
	    </script>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/开发笔记/">开发笔记</a><a href="/tags/系统设计/">系统设计</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2020/08/19/Schedule-analysis-of-duty-management/" title="勤务管理之排班分析" itemprop="url">勤务管理之排班分析</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Banana" target="_blank" itemprop="author">Banana</a>
		
  <p class="article-time">
    <time datetime="2020-08-19T07:20:46.000Z" itemprop="datePublished"> Published 2020-08-19</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>排班是人力资源精细化控制的基础，一个好的排班管理不仅能调动人员的工作积极性，也能提高工作效率，提高劳动力生产力。</p>
<p>对于排班管理而言，需要考虑：时间、人员、地点、工作事项、工作设备和环境要求等几个要素。针对不同需求场景，包含的要素需要有所侧重，其中时间和人员是最为核心的要素，毕竟排班讲究的是合适的时间安排合适的人去做某某事情。当然还有可能包含合适的地点，但是在一些固定工作场所的前提下，地点相对时间、人员而言属性不是那么重要。</p>
<h3 id="固定场所排班分析"><a href="#固定场所排班分析" class="headerlink" title="固定场所排班分析"></a>固定场所排班分析</h3><p>假设，某交巡警支队后台视频监控部门排班管理，需要保障道路交通持续不断的安全运维，对工作人员要求按照早班、中班、夜班三个班次进行轮换上班上岗。针对这种场景，工作场所一般是固定的，每个员工的工作内容一般是固化下来的，每天只需要按部就班执行即可。那么在这里，主要包含时间、人员这两个要素。</p>
<p>该部门的排班表如下：</p>
<table>
<thead>
<tr>
<th>日期</th>
<th>班次</th>
<th>人员</th>
</tr>
</thead>
<tbody>
<tr>
<td>2020-08-15</td>
<td>早班（8:00～16:00）</td>
<td>令狐冲 郭靖 杨过</td>
</tr>
<tr>
<td>2020-08-15</td>
<td>中班（16:00～24:00）</td>
<td>任盈盈 黄蓉 小龙女</td>
</tr>
<tr>
<td>2020-08-15</td>
<td>夜班（24:00～8:00）</td>
<td>乔峰 虚竹 段誉</td>
</tr>
<tr>
<td>2020-08-16</td>
<td>早班（8:00～16:00）</td>
<td>黄药师 一灯大师 周伯通</td>
</tr>
<tr>
<td>2020-08-16</td>
<td>中班（16:00～24:00）</td>
<td>令狐冲 郭靖 杨过</td>
</tr>
<tr>
<td>2020-08-16</td>
<td>夜班（24:00～8:00）</td>
<td>任盈盈 黄蓉 小龙女</td>
</tr>
<tr>
<td>…</td>
<td></td>
</tr>
</tbody>
</table>
<p>从这个排班表中，我们可以抽象出：日期、班次(时段)、人员这三个属性。一般班次属性可单独抽象出来，班次包含：班次名称、开始时间、结束时间和作用范围。作用范围可以为工作日、周末、节假日等选项。</p>
<p><img src="_images/勤务模板-班次设置.png" alt=""></p>
<p>结合到排列组合来讲，我们可以将人员进行按班次进行分组管理，每个分组对应一个班次即班组。有了班次和人员分组之后，我们可以设置班次的起始人员分组，然后按照班次顺序依次和人员分组进行循环对应。这也是自动排班管理的一种简单实现方式。</p>
<h3 id="变化场所排班分析"><a href="#变化场所排班分析" class="headerlink" title="变化场所排班分析"></a>变化场所排班分析</h3><h4 id="举例分析"><a href="#举例分析" class="headerlink" title="举例分析"></a>举例分析</h4><p>通过上述分析，排班管理看上去做起来好像很容易？然而并没有那么简单，这里包含很多假定，班次时段是固定的，人员班组页面没有出现请假等情况。排班管理还需要考虑时间、人员、场所变化的情形，这个需要我们从变化的情景中找到合适的规律。下面我们根据一个时间和地点均存在变化的例子来分析排班。</p>
<p>某部门外勤某日排班表（2020年8月17日）如下：</p>
<table>
<thead>
<tr>
<th>部门</th>
<th>岗位类型</th>
<th>执勤地点</th>
<th>时段</th>
<th>人员</th>
</tr>
</thead>
<tbody>
<tr>
<td>一大队</td>
<td>早晚高峰岗</td>
<td>四公里</td>
<td>7:00-10:00</td>
<td>令狐冲 郭靖 杨过</td>
</tr>
<tr>
<td>一大队</td>
<td>早晚高峰岗</td>
<td>五公里</td>
<td>7:00-10:00</td>
<td>任盈盈 黄蓉 小龙女</td>
</tr>
<tr>
<td>一大队</td>
<td>早晚高峰岗</td>
<td>六公里</td>
<td>7:00-10:00</td>
<td>乔峰 虚竹 段誉</td>
</tr>
<tr>
<td>一大队</td>
<td>路面巡逻岗</td>
<td></td>
<td>7:00-10:00</td>
<td>黄药师 一灯大师 周伯通</td>
</tr>
<tr>
<td>二大队</td>
<td>早晚高峰岗</td>
<td>茶园</td>
<td>7:00-9:30</td>
<td>令狐冲 郭靖 杨过</td>
</tr>
<tr>
<td>二大队</td>
<td>早晚高峰岗</td>
<td>长生桥</td>
<td>7:00-9:30</td>
<td>任盈盈 黄蓉 小龙女</td>
</tr>
<tr>
<td>…</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>站在支队领导的角度，支队对各所属大队提出每日执勤要求包含：部门、岗位类型、执勤地点、时段、人员数量。一个部门下有多个岗位类型，同一岗位类型有多个执勤地点，部门、岗位类型、执勤地点可以设置不同的时段和多个人员。每日的排班表，会对岗位类型和执勤地点进行适当的调整。大致上，周一到周五的排班表内容基本相同，周末有所变化，节假日需做针对性安排。</p>
<p>外勤的业务模式具有支队安排，大队上报人员的特点，由支队安排需要执勤的岗位、地点、时段，由大队管理员上报每天的执勤人员。支队以周为单位，安排周一至周天的每天勤务安排，可设置节假日和指定日期的勤务。</p>
<p>如何根据这些规则进行的合适的勤务安排呢？</p>
<h4 id="勤务模板"><a href="#勤务模板" class="headerlink" title="勤务模板"></a>勤务模板</h4><p>勤务模板，勤务模板是需求落地通往实现的桥梁。模板的存在是对特定规则的一个抽象，需要我们抽象出模板的用途、分类、状态、规则等信息。就排班管理而言需要：模板名称、模板类型、模板状态、日期选项、时段规则等信息。注意这里的日期选项和时段规则是合集关系，一个日期选项可以包含多个时段规则，时段通俗的叫法也称班次。这里的日期选项可以归纳为工作日、周末、节假日、星期等范围选项。在人员安排时，可根据日期查找对应的日期选项，找到对应的时段规则，然后根据时段规则分配人员。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">假设某单位有如下上班时间设置：</span><br><span class="line">周一到周五每天八点到下午五点上班。</span><br><span class="line">日期选项为：工作日，时段规则为：8:00-17:00</span><br><span class="line"></span><br><span class="line">假设某单位有如下上班时间设置：</span><br><span class="line">周一上午八点到十二点上班，下午休息。</span><br><span class="line">周二到周五每天八点到到下午五点上班。</span><br><span class="line">这里日期选项为：星期，星期包含：星期一、星期二、星期三、星期四、星期五、星期六、星期日。</span><br><span class="line">规则：星期一 8:00-12:00 下午休息</span><br><span class="line">     星期二 8:00-17:00</span><br><span class="line">     星期三 8:00-17:00</span><br><span class="line">     星期四 8:00-17:00</span><br><span class="line">     星期五 8:00-17:00</span><br><span class="line">     星期六 休息</span><br><span class="line">     星期日 休息</span><br></pre></td></tr></table></figure>
<h4 id="勤务模板特征"><a href="#勤务模板特征" class="headerlink" title="勤务模板特征"></a>勤务模板特征</h4><p>按照星期来执行时段班次的编排，是一个常用的途径。星期排班有以下几个特点：</p>
<ol>
<li>循环性，星期具有天然的循环滚动属性，总是一周接着一周，每周天数固定7天。</li>
<li>直观性，可横向比较（比如周一和周二），也可纵向比较（比如本周一和上周一）。</li>
<li>规则影响范围有限，一个周的排班规则设置好之后，修改指定星期时只影响未来，不影响过去。假设现在是周三，修改周四的规则表示修改明天的规则；修改周一的规则，表示修改下周的规则，对本周一不影响。</li>
<li>工作日容易实现，按照国家法律规定实行五天工作制，周一到周五为工作日，周末休息。工作日的排班一般通过周一到周五来实现，但还需要考虑法定节假日范围的影响。</li>
</ol>
<p>星期+周末+节假日能够满足一年中所有日期场景。</p>
<p>根据每周设置执勤岗位。</p>
<img src="/2020/08/19/Schedule-analysis-of-duty-management/%E5%8B%A4%E5%8A%A1%E6%A8%A1%E6%9D%BF-%E6%AF%8F%E5%91%A8.png" class="">
<p>根据节假日设置执勤岗位，同理可对指定日期进行勤务安排。</p>
<img src="/2020/08/19/Schedule-analysis-of-duty-management/%E5%8B%A4%E5%8A%A1%E6%A8%A1%E6%9D%BF-%E8%8A%82%E5%81%87%E6%97%A5.png" class="">
<p>延伸，既然星期有连续性也可循环迭代，那是否还有其他日期选项可以供模板设置呢？根据按天循环勤务安排，也是属于一个备选方案。我们可以设置天数范围用于周期性循环，再设置一个起始日期作为生效的开始条件，即可模拟星期的循环性。按月天数范围一般不超过31天。同理可设置按年进行设置，天数范围不超过366天。</p>
<img src="/2020/08/19/Schedule-analysis-of-duty-management/%E5%8B%A4%E5%8A%A1%E6%A8%A1%E6%9D%BF-%E6%AF%8F%E6%9C%88.png" class="">
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>总结，对于工作场所和班次固定的排班，可按工作日、周末、节假日设置相应的班次时间段。对于工作场所、日期和时段不固定的情况，推荐使用星期加节假日排班，按天数循环方案备选。星期的循环连续特性，能够满足大多数场景，当然也存在特殊情况。特殊情况应当特殊处理，比如设置特定日期的班次规则。需要指出的是，一般而言指定日期的设置优先级高于节假日，节假日的优先级高于星期设置，星期设置的优先级最低。</p>
<p>勤务模板管理可根据部门、工作场所、日期、时段的需要，配置不同类型的模板。</p>
<img src="/2020/08/19/Schedule-analysis-of-duty-management/%E5%8B%A4%E5%8A%A1%E6%A8%A1%E6%9D%BF-%E6%A8%A1%E6%9D%BF%E5%88%97%E8%A1%A8.png" class="">
<p>有了排班模板后，下一步就是根据将人员分配到日期上，同时满足对应的时段（班次）规则。另外再补充说明下，时段的范围需要考虑跨天的情景，单个时段的总时长不能超过24小时，多个时段的时长合计小于等于24小时。</p>

<div id="gitalk-container"></div>
<script src="https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

		<script>
		var gitalkConfig = {"clientID":"e6b75c64218ff017ed19","clientSecret":"bd6f2fb48b56274cc02080a5101296ec76990244","repo":"yuanrui.github.io","owner":"yuanrui","admin":["yuanrui"],"distractionFreeMode":false};
	    gitalkConfig.id = md5(location.pathname);
		var gitalk = new Gitalk(gitalkConfig);
	    gitalk.render("gitalk-container");
	    </script>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/开发笔记/">开发笔记</a><a href="/tags/系统设计/">系统设计</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">Next&lt;span&gt;&lt;&#x2F;span&gt;</a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github Card</p>
<div class="github-card" data-github="yuanrui" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>
  </div>



  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/Net/" title=".Net">.Net<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/Mvc/Net/" title=".Net">.Net<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/Net/Ado-Net/" title="Ado.Net">Ado.Net<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Asp-Net/" title="Asp.Net">Asp.Net<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Net/Asp-Net/" title="Asp.Net">Asp.Net<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Mvc/Net/Asp-Net/" title="Asp.Net">Asp.Net<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/Hexo/" title="Hexo">Hexo<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Javascript/" title="Javascript">Javascript<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Mvc/" title="Mvc">Mvc<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/Net/Ado-Net/MySql/" title="MySql">MySql<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/MySql/" title="MySql">MySql<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Sql/MySql/" title="MySql">MySql<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Oracle/" title="Oracle">Oracle<sup>11</sup></a></li>
		  
		
		  
			<li><a href="/categories/Python/" title="Python">Python<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Sql/" title="Sql">Sql<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Oracle/Sql/" title="Sql">Sql<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/Net/Ado-Net/MySql/Sql/" title="Sql">Sql<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/MySql/Sql/" title="Sql">Sql<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/开发笔记/" title="开发笔记">开发笔记<sup>24</sup></a></li>
			
		
			
				<li><a href="/tags/Sql/" title="Sql">Sql<sup>12</sup></a></li>
			
		
			
				<li><a href="/tags/Oracle/" title="Oracle">Oracle<sup>11</sup></a></li>
			
		
			
				<li><a href="/tags/读书笔记/" title="读书笔记">读书笔记<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/MySql/" title="MySql">MySql<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/学习笔记/" title="学习笔记">学习笔记<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Net/" title=".Net">.Net<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/资料文档/" title="资料文档">资料文档<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/系统设计/" title="系统设计">系统设计<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Java/" title="Java">Java<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Asp-Net/" title="Asp.Net">Asp.Net<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Ado-Net/" title="Ado.Net">Ado.Net<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Markdown/" title="Markdown">Markdown<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Spring/" title="Spring">Spring<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="https://about.me/yuanrui" target="_blank" title="About Me">About Me</a>
            
          </li>
        
    </ul>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/yuanrui" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2023 
		
		<a href="/about" target="_blank" title="Banana">Banana</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e212bde22a7a15a68577c594adb72c6a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




<!-- Default Statcounter code for github page https://yuanrui.github.io -->
<script type="text/javascript">
var sc_project=12878872; 
var sc_invisible=1; 
var sc_security="5ab5bef7"; 
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js" async></script>
<noscript><div class="statcounter"><a title="Web Analytics"
href="https://statcounter.com/" target="_blank"><img class="statcounter"
src="https://c.statcounter.com/12878872/0/5ab5bef7/1/" alt="Web Analytics"
referrerPolicy="no-referrer-when-downgrade"></a></div></noscript>
<!-- End of Statcounter Code -->
<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
